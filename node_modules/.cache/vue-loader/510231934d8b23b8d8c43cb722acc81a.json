{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/pages/login.vue?vue&type=style&index=0&id=c40149d6&lang=less&scoped=true&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/pages/login.vue","mtime":1686820786541},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["\n  .login_container{\n   position: absolute;\n   top: 0;\n   left: 0;\n   width: 100%;\n   height: 100%;\n   display: flex;\n   align-items: center;\n   justify-content: center;\n   .login_page_back{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n  .login_content{\n    width: 1510rem;\n    height: 780rem;\n    background: #FFFFFF;\n    border-radius: 8rem;\n    z-index: 9;\n    display: flex;\n    .content_left{\n     position: relative;\n     height: 780rem;\n     flex:1;\n     display: flex;\n     align-items: center;\n     padding-left: 48rem;\n     .login_big_back{\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 10;\n    }\n    .login_small_back{\n      width: 713rem;\n      height: 632rem;\n      z-index: 11;\n    }\n  }\n  .content_right{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 780rem;\n    padding-right: 70rem;\n    .content{\n      background: #FFFFFF;\n      border-radius: 8rem;\n      border: 1px solid #EBEBEB;\n      width: 478rem;\n      height: 532rem;\n      padding-top:30rem;\n      .gys_box{\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        .login_input{\n          box-sizing: border-box;\n          margin-top: 32rem;\n          outline: none;\n          border:none;\n          width: 380rem;\n          height: 52rem;\n          background: #FFF8EE;\n          border-radius: 6rem;\n          padding: 0 22rem;\n          font-size: 16rem;\n        }\n        .login{\n          margin-top: 60px;\n          width: 380rem;\n          text-align: center;\n          height: 42rem;\n          line-height: 42rem;\n          background: #F37605;\n          border-radius: 4rem;\n          font-size: 14px;\n          color: #ffffff;\n          cursor: pointer;\n        }\n      }\n      .tab_row{\n        margin-bottom: 36rem;\n        display: flex;\n        align-items: center;\n        justify-content:space-around;\n        .tab_item{\n          cursor: pointer;\n          height: 40rem;\n          display: flex;\n          align-items: center;\n          justify-content:center;\n          position: relative;\n          .tab_text{\n            font-size: 18px;\n            font-weight: bold;\n            color: #666666;\n          }\n          .active_tab_text{\n            color: #333333;\n          }\n          .active_line{\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            height: 4rem;\n            background: var(--color);\n          }\n        }\n      }\n      .text{\n       color: var(--color);\n       font-size: 24rem;\n       font-weight: 500;\n       width: 100%;\n       text-align: center;\n     }\n   }\n }\n}\n}\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n\t<div class=\"login_container\">\n\t\t<img class=\"login_page_back\" src=\"../static/login_page_back.png\">\n\t\t<div class=\"login_content\">\n\t\t\t<div class=\"content_left\">\n\t\t\t\t<img class=\"login_big_back\" src=\"../static/login_big_back.png\">\n\t\t\t\t<img class=\"login_small_back\" src=\"../static/login_small_back.png\">\n\t\t\t</div>\n\t\t\t<div class=\"content_right\">\n\t\t\t\t<div class=\"content\">\n          <!-- <div class=\"tab_row\">\n            <div class=\"tab_item\" @click=\"active_tab = 'gys'\">\n              <div class=\"tab_text\" :class=\"{'active_tab_text':active_tab == 'gys'}\">供应商登录</div>\n              <div class=\"active_line\" v-if=\"active_tab == 'gys'\"></div>\n            </div>\n            <div class=\"tab_item\" @click=\"active_tab = 'sm'\">\n              <div class=\"tab_text\" :class=\"{'active_tab_text':active_tab == 'sm'}\">扫码登录</div>\n              <div class=\"active_line\" v-if=\"active_tab == 'sm'\"></div>\n            </div>\n          </div> -->\n          <div class=\"text\">{{active_tab == 'gys'?'用户名密码':'钉钉扫码一键'}}登录</div>\n          <div class=\"gys_box\" v-if=\"active_tab == 'gys'\">\n            <input class=\"login_input\" ref=\"userName\" autofocus v-model=\"user_name\" placeholder=\"请输入用户名称\" maxlength=\"20\" @keyup.enter=\"login\">\n            <input class=\"login_input\" type=\"password\" v-model=\"password\" placeholder=\"请输入登录密码\" maxlength=\"20\" @keyup.enter=\"login\">\n            <div class=\"login\" @click=\"login\">登录</div>\n          </div>\n          <div v-if=\"active_tab == 'sm'\">\n            <div id=\"container\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"less\" scoped>\n  .login_container{\n   position: absolute;\n   top: 0;\n   left: 0;\n   width: 100%;\n   height: 100%;\n   display: flex;\n   align-items: center;\n   justify-content: center;\n   .login_page_back{\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n  .login_content{\n    width: 1510rem;\n    height: 780rem;\n    background: #FFFFFF;\n    border-radius: 8rem;\n    z-index: 9;\n    display: flex;\n    .content_left{\n     position: relative;\n     height: 780rem;\n     flex:1;\n     display: flex;\n     align-items: center;\n     padding-left: 48rem;\n     .login_big_back{\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 10;\n    }\n    .login_small_back{\n      width: 713rem;\n      height: 632rem;\n      z-index: 11;\n    }\n  }\n  .content_right{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 780rem;\n    padding-right: 70rem;\n    .content{\n      background: #FFFFFF;\n      border-radius: 8rem;\n      border: 1px solid #EBEBEB;\n      width: 478rem;\n      height: 532rem;\n      padding-top:30rem;\n      .gys_box{\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        .login_input{\n          box-sizing: border-box;\n          margin-top: 32rem;\n          outline: none;\n          border:none;\n          width: 380rem;\n          height: 52rem;\n          background: #FFF8EE;\n          border-radius: 6rem;\n          padding: 0 22rem;\n          font-size: 16rem;\n        }\n        .login{\n          margin-top: 60px;\n          width: 380rem;\n          text-align: center;\n          height: 42rem;\n          line-height: 42rem;\n          background: #F37605;\n          border-radius: 4rem;\n          font-size: 14px;\n          color: #ffffff;\n          cursor: pointer;\n        }\n      }\n      .tab_row{\n        margin-bottom: 36rem;\n        display: flex;\n        align-items: center;\n        justify-content:space-around;\n        .tab_item{\n          cursor: pointer;\n          height: 40rem;\n          display: flex;\n          align-items: center;\n          justify-content:center;\n          position: relative;\n          .tab_text{\n            font-size: 18px;\n            font-weight: bold;\n            color: #666666;\n          }\n          .active_tab_text{\n            color: #333333;\n          }\n          .active_line{\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            height: 4rem;\n            background: var(--color);\n          }\n        }\n      }\n      .text{\n       color: var(--color);\n       font-size: 24rem;\n       font-weight: 500;\n       width: 100%;\n       text-align: center;\n     }\n   }\n }\n}\n}\n</style>\n<script>\n\timport resource from '../api/resource.js'\n\texport default{\n\t\tdata() {\n\t\t\treturn {\n        active_tab:\"gys\",     //登录类型\n        user_name:\"\",         //用户名\n        password:\"\",          //密码\n      };\n    },\n    watch:{\n      active_tab:function(n,o){\n        if(n == 'sm'){\n          this.getAppKey();\n        }else{\n          this.$nextTick(() => {\n            this.$refs.userName.focus();\n          })\n        }\n      }\n    },\n    methods: {\n      getAppKey() {\n        resource.getAppKey().then((res) => {\n         if (res.data.code == \"1\") {\n          let appKey = res.data.data.appkey;\n          this.ddLoginInit(appKey);\n        } else {\n          this.$message.warning(res.data.msg);\n        }\n      });\n      },\n      ddLoginInit(appKey) {\n        let url = `${location.origin}/api/scancodes/ewmlogin`;\n        const goto = encodeURIComponent(\n         `https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=${appKey}&response_type=code&scope=snsapi_login&state=STATE&redirect_uri=${url}`\n         );\n        window.DDLogin({\n         id: \"container\",\n         goto: goto,\n         style: \"border:none;background-color:#FFFFFF;margin:0 auto;\",\n        \t\twidth: \"100%\", //官方参数 365\n        \t\theight: \"300\", //官方参数 400\n          });\n        let handleMessage = (event) => {\n         let origin = event.origin;\n         if (origin == \"https://login.dingtalk.com\") {\n          const loginTmpCode = event.data;\n          window.location.href = `https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=${appKey}&response_type=code&scope=snsapi_login&state=STATE&redirect_uri=${url}&loginTmpCode=${loginTmpCode}`;\n        }\n      };\n      if (typeof window.addEventListener != \"undefined\") {\n       window.addEventListener(\"message\", handleMessage, false);\n     } else if (typeof window.attachEvent != \"undefined\") {\n       window.attachEvent(\"onmessage\", handleMessage);\n     }\n   },\n     //点击登录\n   login(){\n    if(this.user_name == ''){\n      this.$message.warning('请输入用户名');\n      return;\n    }else if(this.password == ''){\n      this.$message.warning('请输入密码');\n      return;\n    }\n    let arg = {\n      username:this.user_name,\n      password:this.password\n    }\n    resource.supplierLogin(arg).then(res => {\n      if (res.data.code == \"1\") {\n        sessionStorage.setItem(\"cache\",true);\n        let data = res.data.data;\n        sessionStorage.setItem(\"user_type\", data.user_type);\n        sessionStorage.setItem(\"ding_user_id\", data.ding_user_id);\n        sessionStorage.setItem(\"ding_user_name\", data.ding_user_name);\n        sessionStorage.setItem(\"secret_key\", data.secret_key);\n        sessionStorage.setItem(\"login_token\", data.login_token);\n        sessionStorage.setItem(\"supplier_name\", data.supplier_name);\n        let user_info = {\n          user_type:data.user_type,\n          ding_user_id:data.ding_user_id,\n          ding_user_name:data.ding_user_name,\n          login_token:data.login_token,\n          secret_key:data.secret_key,\n          supplier_name:data.supplier_name,\n        }\n        this.$store.commit('setToken',user_info);\n        let domain = data.img_domain;\n        this.$store.commit('setDomain',domain);\n        sessionStorage.setItem(\"domain\",domain);\n\n        let menu_list = [{\n          menu_name:'首页',\n          web_url:\"gys_index\"\n        },{\n          menu_name:'我的款式',\n          web_url:\"gys_supplier\"\n        },{\n          menu_name:'款式资料',\n          web_url:\"style_info\"\n        },{\n          menu_name:'爆款主推款',\n          web_url:\"b_z_page\"\n        }]\n\n        this.$store.commit(\"setMenuList\", menu_list);\n        sessionStorage.setItem(\"menu_list\",JSON.stringify(menu_list))\n\n        this.$router.replace('tab_menu');\n      } else {\n        this.$message.warning(res.data.msg);\n      }\n    })\n\n\n\n  }\n},\n}\n</script>\n"]}]}