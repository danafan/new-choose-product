{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/choose-product/src/pages/SupplyChain/pages/chain_goods_page.vue?vue&type=style&index=0&id=5241e5c0&prod&lang=less&scoped=true&","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/pages/SupplyChain/pages/chain_goods_page.vue","mtime":1676014825584},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["\n.chain_page_content{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 24rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\t.form_card{\n\t\tmargin-bottom: 16rem;\n\t\t.up_down_row{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t\talign-items: center;\n\t\t\t.selected_right{\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\t.down_arrow{\n\t\t\t\t\tmargin-left: 5rem;\n\t\t\t\t\ttransform: rotate(-90deg);\n\t\t\t\t\twidth: 14rem;\n\t\t\t\t\theight: 8rem;\n\t\t\t\t}\n\t\t\t\t.rotate{\n\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t.form_item{\n\t\t\tmargin-bottom:0 !important;\n\t\t}\n\t}\n\t.card_box{\n\t\tflex:1;\n\t\t.image{\n\t\t\t// width: 100px;\n\t\t\theight: 100px;\n\t\t}\n\t\t.item_row{\n\t\t\tdisplay: flex;\n\t\t\t.item_label{\n\t\t\t\twidth: 36px;\n\t\t\t\ttext-align:end;\n\t\t\t}\n\t\t}\n\t}\n\t.down_box{\n\t\tdisplay:flex;\n\t\tpadding:30rem;\n\t\t.upload_box{\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\t.upload_file{\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\topacity: 0;\n\t\t\t}\n\t\t}\n\t}\n}\n",{"version":3,"sources":["chain_goods_page.vue"],"names":[],"mappings":";AAuNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chain_goods_page.vue","sourceRoot":"src/pages/SupplyChain/pages","sourcesContent":["<template>\n\t<div class=\"chain_page_content\" v-loading.fullscreen.lock=\"fullscreenLoading\">\n\t\t<el-card class=\"form_card\">\n\t\t\t<div class=\"up_down_row\">\n\t\t\t\t<div class=\"selected_right\" @click=\"is_up = !is_up\">\n\t\t\t\t\t<div>{{is_up?'收起':'展开'}}</div>\n\t\t\t\t\t<img class=\"down_arrow\" :class=\"{'rotate':is_up == true}\" src=\"../../../static/down_arrow.png\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<el-form :inline=\"true\" size=\"mini\" v-show=\"is_up\">\n\t\t\t\t<el-form-item label=\"供应商：\">\n\t\t\t\t\t<el-select v-model=\"supplier_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in supplier_list\" :key=\"item.supplier_id\" :label=\"item.supplier_name\" :value=\"item.supplier_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"类目：\">\n\t\t\t\t\t<el-select v-model=\"category_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in cate_list\" :key=\"item.category_id\" :label=\"item.category_name\" :value=\"item.category_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"拍摄风格：\">\n\t\t\t\t\t<el-select v-model=\"shooting_style_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in style_list\" :key=\"item.shooting_style_id\" :label=\"item.shooting_style_name\" :value=\"item.shooting_style_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"市场：\">\n\t\t\t\t\t<el-select v-model=\"market_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in market_list\" :key=\"item.market_id\" :label=\"item.market_name\" :value=\"item.market_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"分类：\">\n\t\t\t\t\t<el-select v-model=\"classification_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in class_list\" :key=\"item.classification_id\" :label=\"item.classification_name\" :value=\"item.classification_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"审核状态：\">\n\t\t\t\t\t<el-select v-model=\"check_status_id\" clearable placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in check_status_list\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"调价审核状态：\">\n\t\t\t\t\t<el-select v-model=\"price_status\" clearable placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in adjust_status_list\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"上新日期：\">\n\t\t\t\t\t<el-date-picker v-model=\"date\" size=\"mini\" type=\"daterange\" unlink-panels value-format=\"yyyy-MM-dd\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :picker-options=\"pickerOptions\">\n\t\t\t\t\t</el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-input type=\"textarea\" autosize placeholder=\"款号/款式编码\" v-model=\"search\">\n\t\t\t\t\t</el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item class=\"form_item\">\n\t\t\t\t\t<el-button type=\"primary\" @click=\"checkPage(1)\">查询</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</el-card>\n\t\t<el-card class=\"card_box\" id=\"card_box\">\n\t\t\t<TableTitle title=\"数据列表\" id=\"table_title\">\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" v-if=\"button_list.edit_i_id == 1\" @click=\"importFn('1')\">修改款式编码</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('adjust')\" v-if=\"button_list.price_btn == 1\">调价审批</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" v-if=\"is_check == 1 && button_list.agree_refuse == 1\" @click=\"allSetting('audit_1')\">批量同意</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" v-if=\"is_check == 1 && button_list.agree_refuse == 1\" @click=\"allSetting('audit_2')\">批量拒绝</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('1')\" v-if=\"button_list.in_out == 1\">批量上架</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('0')\" v-if=\"button_list.in_out == 1\">批量下架</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('3')\" v-if=\"button_list.del == 1\">批量删除</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('2')\" v-if=\"button_list.abu == 1\">批量对接推单</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"$router.push('/edit_goods?page_type=goods&goods_type=1')\" v-if=\"button_list.add == 1\">添加</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"importFn('2')\" v-if=\"button_list.add == 1\">导入</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"exportFn\">导出</el-button>\n\t\t\t</TableTitle>\n\t\t\t<el-table size=\"mini\" :data=\"data\" tooltip-effect=\"dark\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" :max-height=\"max_height\" @selection-change=\"handleSelectionChange\" v-loading=\"loading\">\n\t\t\t\t<el-table-column type=\"selection\" width=\"55\" fixed>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"款号\" prop=\"style_name\"></el-table-column>\n\t\t\t\t<el-table-column label=\"款式编码\" width=\"140\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div class=\"item_row\">\n\t\t\t\t\t\t\t<div class=\"item_label\">普通：</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div v-for=\"item in scope.row.new_i_id\">{{item}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"item_row\">\n\t\t\t\t\t\t\t<div class=\"item_label\">BD：</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div v-for=\"item in scope.row.new_bd_i_id\">{{item}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"图片\" width=\"150\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div v-if=\"scope.row.images.length == 0\">暂无</div>\n\t\t\t\t\t\t<el-carousel trigger=\"hover\" indicator-position=\"none\" :autoplay=\"false\" height=\"100px\" v-else>\n\t\t\t\t\t\t\t<el-carousel-item v-for=\"item in scope.row.images\" :key=\"item\">\n\t\t\t\t\t\t\t\t<el-image :z-index=\"2006\" class=\"image\" :src=\"item\" fit=\"scale-down\" :preview-src-list=\"scope.row.images\"></el-image>\n\t\t\t\t\t\t\t</el-carousel-item>\n\t\t\t\t\t\t</el-carousel>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"网盘地址\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button class=\"pre_wrap\" size=\"small\" type=\"text\" @click=\"windowOpen(scope.row.net_disk_address,scope.row.or_net_disk_address)\">访问链接</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"成本价\" prop=\"cost_price\"></el-table-column>\n\t\t\t\t<el-table-column label=\"颜色\" prop=\"color\"></el-table-column>\n\t\t\t\t<el-table-column label=\"尺码\" prop=\"size\"></el-table-column>\n\t\t\t\t<el-table-column label=\"面料\" prop=\"fabric\"></el-table-column>\n\t\t\t\t<el-table-column label=\"市场\" prop=\"market\"></el-table-column>\n\t\t\t\t<el-table-column label=\"是否对接推单\" width=\"100\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div>{{scope.row.abutment_type == 1?'是':'否'}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"供应商\" prop=\"supplier\"></el-table-column>\n\t\t\t\t<el-table-column label=\"提供拍照\" prop=\"common_text\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div>{{scope.row.photograph == 1?'是':'否'}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"拍摄风格\" prop=\"shooting_style\"></el-table-column>\n\t\t\t\t<el-table-column label=\"类目\" prop=\"category\"></el-table-column>\n\t\t\t\t<el-table-column label=\"分类\" prop=\"classification\"></el-table-column>\n\t\t\t\t<el-table-column label=\"合作模式\" prop=\"mode\"></el-table-column>\n\t\t\t\t<el-table-column label=\"备注\" prop=\"remark\"></el-table-column>\n\t\t\t\t<el-table-column label=\"上新时间\" width=\"160\" prop=\"new_time_name\"></el-table-column>\n\t\t\t\t<el-table-column label=\"审核状态\" prop=\"common_text\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 1\">上架待审核</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 2\">已上架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 3\">拒绝上架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 4\">下架待审核</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 5\">已下架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 6\">拒绝下架</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button size=\"small\" type=\"text\" @click=\"adjustAudit(scope.row.style_id)\" v-if=\"scope.row.price_status == '1' && button_list.price_btn == 1\">调价审批</el-button>\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"(scope.row.check_status == 1 || scope.row.check_status == 4) && button_list.agree_refuse == 1\" @click=\"$router.push('/edit_goods?page_type=goods&goods_type=4&style_id=' + scope.row.style_id)\">审核</el-button>\n\t\t\t\t\t\t<el-button style=\"margin-right: 10px\" type=\"text\" size=\"small\" v-if=\"scope.row.check_status == 2 || scope.row.check_status == 6\" @click=\"$router.push('/image_setting?style_id=' + scope.row.style_id + '&style_name=' + scope.row.style_name)\">图片管理</el-button>\n\t\t\t\t\t\t<el-dropdown size=\"small\" @command=\"handleCommand($event,scope.row.style_id)\" v-if=\"scope.row.check_status == 2 || scope.row.check_status == 6 && (button_list.info == 1 || button_list.edit == 1 || button_list.del == 1)\">\n\t\t\t\t\t\t\t<el-button type=\"text\" size=\"small\">\n\t\t\t\t\t\t\t\t更多<i class=\"el-icon-arrow-down el-icon--right\"></i>\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<el-dropdown-menu slot=\"dropdown\">\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"1\" v-if=\"button_list.info == 1\">查看</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"2\" v-if=\"button_list.edit == 1\">编辑</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"3\" v-if=\"button_list.del == 1\">删除</el-dropdown-item>\n\t\t\t\t\t\t\t</el-dropdown-menu>\n\t\t\t\t\t\t</el-dropdown>\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"(scope.row.check_status == 2 || scope.row.check_status == 5 || scope.row.check_status == 6) && button_list.in_out == 1\" @click=\"checkStatus(scope.row.style_id,scope.row.check_status)\">{{scope.row.check_status == 2 || scope.row.check_status == 6?'下架':'上架'}}</el-button>\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"(scope.row.check_status == 3 || scope.row.check_status == 5) && button_list.reset == 1\" @click=\"$router.push('/edit_goods?page_type=goods&goods_type=5&style_id=' + scope.row.style_id)\">重新提交</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t\t<PaginationWidget id=\"bottom_row\" :total=\"total\" :page=\"page\" :pagesize=\"100\" @checkPage=\"checkPage\"/>\n\t\t</el-card>\n\t\t<el-dialog :visible.sync=\"import_dialog\" width=\"30%\">\n\t\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t\t<div>导入</div>\n\t\t\t\t<img class=\"close_icon\" src=\"../../../static/close_icon.png\" @click=\"import_dialog = false\">\n\t\t\t</div>\n\t\t\t<div class=\"down_box\">\n\t\t\t\t<el-button type=\"primary\" plain size=\"small\" @click=\"downTemplate\">下载模版<i class=\"el-icon-download el-icon--right\"></i></el-button>\n\t\t\t\t<div class=\"upload_box\">\n\t\t\t\t\t<el-button type=\"primary\" size=\"small\">\n\t\t\t\t\t\t导入\n\t\t\t\t\t\t<i class=\"el-icon-upload el-icon--right\"></i>\n\t\t\t\t\t</el-button>\n\t\t\t\t\t<input type=\"file\" ref=\"csvUpload\" class=\"upload_file\" accept=\".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" @change=\"uploadCsv\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t\t<el-button size=\"small\" @click=\"import_dialog = false\">取消</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t\t<!-- 调价审批 -->\n\t\t<el-dialog width=\"30%\" :visible.sync=\"adjust_dialog\" @close=\"closeAdjust\">\n\t\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t\t<div>调价审批</div>\n\t\t\t\t<img class=\"close_icon\" src=\"../../../static/close_icon.png\" @click=\"adjust_dialog = false\">\n\t\t\t</div>\n\t\t\t<div style=\"padding:20px\">\n\t\t\t\t<el-form>\n\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t<el-radio-group v-model=\"adjust_type\">\n\t\t\t\t\t\t\t<el-radio :label=\"1\">同意</el-radio>\n\t\t\t\t\t\t\t<el-radio :label=\"2\">拒绝</el-radio>\n\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item v-if=\"adjust_type == 2\">\n\t\t\t\t\t\t<el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入拒绝原因\" v-model=\"refuse_reason\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t</div>\n\t\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t\t<el-button size=\"small\" @click=\"adjust_dialog = false\">取 消</el-button>\n\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"confirmAdjust\">确 定</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</div>\n</template>\n<style lang=\"less\" scoped>\n.chain_page_content{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 24rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\t.form_card{\n\t\tmargin-bottom: 16rem;\n\t\t.up_down_row{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t\talign-items: center;\n\t\t\t.selected_right{\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\t.down_arrow{\n\t\t\t\t\tmargin-left: 5rem;\n\t\t\t\t\ttransform: rotate(-90deg);\n\t\t\t\t\twidth: 14rem;\n\t\t\t\t\theight: 8rem;\n\t\t\t\t}\n\t\t\t\t.rotate{\n\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t.form_item{\n\t\t\tmargin-bottom:0 !important;\n\t\t}\n\t}\n\t.card_box{\n\t\tflex:1;\n\t\t.image{\n\t\t\t// width: 100px;\n\t\t\theight: 100px;\n\t\t}\n\t\t.item_row{\n\t\t\tdisplay: flex;\n\t\t\t.item_label{\n\t\t\t\twidth: 36px;\n\t\t\t\ttext-align:end;\n\t\t\t}\n\t\t}\n\t}\n\t.down_box{\n\t\tdisplay:flex;\n\t\tpadding:30rem;\n\t\t.upload_box{\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\t.upload_file{\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\topacity: 0;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n<script>\n\timport commonResource from '../../../api/common_resource.js'\n\timport resource from '../../../api/chain_resource.js'\n\timport { getNowDate,getCurrentDate } from \"../../../api/date.js\";\n\n\timport { exportPost } from \"../../../api/export.js\";\n\n\timport { MessageBox, Message } from \"element-ui\";\n\n\timport TableTitle from '../components/table_title.vue'\n\timport PaginationWidget from '../../../components/pagination_widget.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tis_up:false,\n\t\t\t\tloading:false,\n\t\t\t\tsupplier_list:[],\t\t//供应商列表\n\t\t\t\tsupplier_ids:[],\t\t//选中的供应商\n\t\t\t\tcate_list:[],\t\t\t//类目列表\n\t\t\t\tcategory_ids:[],\t\t//选中的类目\n\t\t\t\tmarket_list:[],\t\t\t//市场列表\n\t\t\t\tmarket_ids:[],\t\t\t//选中的市场\n\t\t\t\tstyle_list:[],\t\t\t//拍摄风格列表\n\t\t\t\tshooting_style_ids:[],\t//选中的拍摄风格\n\t\t\t\tclass_list:[],\t\t\t//分类列表\n\t\t\t\tclassification_ids:[],\t//选中的分类\n\t\t\t\tcheck_status_list:[{\n\t\t\t\t\tname:'上架待审核',\n\t\t\t\t\tid:1\n\t\t\t\t},{\n\t\t\t\t\tname:'审核通过(已上架)',\n\t\t\t\t\tid:2\n\t\t\t\t},{\n\t\t\t\t\tname:'上架审核拒绝',\n\t\t\t\t\tid:3\n\t\t\t\t},{\n\t\t\t\t\tname:'下架待审核',\n\t\t\t\t\tid:4\n\t\t\t\t},{\n\t\t\t\t\tname:'下架审核通过(已下架)',\n\t\t\t\t\tid:5\n\t\t\t\t},{\n\t\t\t\t\tname:'下架审核拒绝',\n\t\t\t\t\tid:6\n\t\t\t\t}],\t\t\t\t\t\t//审核状态列表\n\t\t\t\tcheck_status_id:\"\",\t\t//选中的审核状态\n\t\t\t\tadjust_status_list:[{\n\t\t\t\t\tname:'待审核',\n\t\t\t\t\tid:1\n\t\t\t\t},{\n\t\t\t\t\tname:'审核通过',\n\t\t\t\t\tid:2\n\t\t\t\t},{\n\t\t\t\t\tname:'审核拒绝',\n\t\t\t\t\tid:3\n\t\t\t\t}],\t\t\t\t\t\t//调价审核状态\n\t\t\t\tprice_status:\"\",\t\t//选中的调价审核状态\n\t\t\t\tdate:[],\t\t\t\t//上新日期\n\t\t\t\tpickerOptions: {\n\t\t\t\t\tshortcuts: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"今日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getNowDate();\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"三日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getCurrentDate(3);\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"七日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getCurrentDate(7);\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}, \n\t\t\t\tsearch:\"\",\t\t\t\t//款式编码\n\t\t\t\tmax_height:0,\t\n\t\t\t\tpage:1,\n\t\t\t\tdata:[],\t\t\t\t//获取的数据\n\t\t\t\ttotal:0,\n\t\t\t\tbutton_list:{},\n\t\t\t\timport_dialog:false,\t//导入或批量修改弹窗\n\t\t\t\timport_type:\"1\",\t\t//导入弹窗类型\n\t\t\t\tmultiple_selection:[],\n\t\t\t\tis_check:0,\t\t\t\t//1:展示批量审核；0：不展示\n\t\t\t\tfullscreenLoading:false,\n\t\t\t\tstyle_id:\"\",\t\t\t\t//点击的款式ID\n\t\t\t\tadjust_dialog:false,\t\t//调价审批\n\t\t\t\tadjust_type:1,\t\t\t\t//调价审批选中的状态\n\t\t\t\trefuse_reason:\"\",\t\t\t//拒绝原因\n\t\t\t}\n\t\t},\n\t\tactivated(){\n\t\t\tif(!this.$route.meta.use_cache){\n\t\t\t\t//获取供应商列表\n\t\t\t\tthis.ajaxSupplierList();\n    \t\t\t//获取类目列表\n    \t\t\tthis.ajaxCateList();\n    \t\t\t//市场列表\n    \t\t\tthis.ajaxMarketList();\n    \t\t\t//拍摄风格列表\n    \t\t\tthis.ajaxStyleList();\n    \t\t\t//分类列表\n    \t\t\tthis.ajaxClassList();\n    \t\t\tthis.supplier_ids = [];\n    \t\t\tthis.category_ids = [];\n    \t\t\tthis.market_ids = [];\n    \t\t\tthis.classification_ids = [];\n    \t\t\tthis.shooting_style_ids = [];\n    \t\t\tthis.date = [];\n    \t\t\tthis.check_status_id = \"\";\n    \t\t\tthis.price_status = \"\";\n    \t\t\tthis.search = \"\";\n    \t\t\tthis.page = 1;\n    \t\t}\n\t\t\t//获取列表\n\t\t\tthis.getGoodsList();\n\t\t},\n\t\tdestroyed() {\n\t\t\twindow.removeEventListener(\"resize\", () => {});\n\t\t},\n\t\tmounted() {\n    \t\t//获取表格最大高度\n    \t\tthis.onResize();\n    \t\twindow.addEventListener(\"resize\", this.onResize());\n    \t},\n    \tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tsearch:function(){\n\t\t\t\t//获取表格最大高度\n\t\t\t\tthis.onResize();\n\t\t\t},\n\t\t\tis_up:function(n,o){\n    \t\t\t//获取表格最大高度\n    \t\t\tthis.onResize();\n    \t\t}\n\t\t},\n\t\tmethods: {\n    \t\t//监听屏幕大小变化\n    \t\tonResize() {\n    \t\t\tthis.$nextTick(() => {\n    \t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n    \t\t\t\tlet table_title_height = document.getElementById(\"table_title\").offsetHeight;\n    \t\t\t\tlet bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n    \t\t\t\tthis.max_height =\n    \t\t\t\tcard_box_height -\n    \t\t\t\ttable_title_height -\n    \t\t\t\tbottom_row_height -\n    \t\t\t\t60 +\n    \t\t\t\t\"px\";\n    \t\t\t});\n    \t\t},\n    \t\t//获取供应商列表\n    \t\tajaxSupplierList(){\n    \t\t\tcommonResource.ajaxSupplierList().then(res => {\n    \t\t\t\tif(res.data.code == 1){\n    \t\t\t\t\tthis.supplier_list = res.data.data;\n    \t\t\t\t}else{\n    \t\t\t\t\tthis.$message.warning(res.data.msg);\n    \t\t\t\t}\n    \t\t\t})\n    \t\t},\n\t\t\t//获取类目列表\n\t\t\tajaxCateList(){\n\t\t\t\tcommonResource.ajaxCateList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.cate_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//市场列表\n\t\t\tajaxMarketList(){\n\t\t\t\tcommonResource.ajaxMarketList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.market_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//拍摄风格列表\n\t\t\tajaxStyleList(){\n\t\t\t\tcommonResource.ajaxStyleList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.style_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//分类列表\n\t\t\tajaxClassList(){\n\t\t\t\tcommonResource.ajaxClassList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.class_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//点击批量编辑或导入\n\t\t\timportFn(type){\n\t\t\t\tthis.import_type = type;\n\t\t\t\tthis.import_dialog = true;\n\t\t\t},\n\t\t\t//下载模版\n\t\t\tdownTemplate(){\n\t\t\t\tif(this.import_type == '1'){\n\t\t\t\t\twindow.open(`${this.downLoadUrl}/file/批量更新款式编码模板.xlsx`);\n\t\t\t\t}else{\n\t\t\t\t\twindow.open(`${this.downLoadUrl}/file/商品批量导入模板.xlsx`);\n\t\t\t\t}\n\t\t\t},\n\t\t\t//导入\n\t\t\tuploadCsv(){\n\t\t\t\tif (this.$refs.csvUpload.files.length > 0) {\n\t\t\t\t\tlet files = this.$refs.csvUpload.files;\n\t\t\t\t\tthis.fullscreenLoading = true;\n\t\t\t\t\tif(this.import_type == '1'){\t//批量修改\n\t\t\t\t\t\tresource.editGoodsIid({file:files[0]}).then(res => {\n\t\t\t\t\t\t\tthis.$refs.csvUpload.value = null;\n\t\t\t\t\t\t\tthis.import_dialog = false;\n\t\t\t\t\t\t\tthis.fullscreenLoading = false;\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\tthis.page = 1;\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\t//导入\n\t\t\t\t\t\tresource.addAllProductStyle({file:files[0]}).then(res => {\n\t\t\t\t\t\t\tthis.$refs.csvUpload.value = null;\n\t\t\t\t\t\t\tthis.import_dialog = false;\n\t\t\t\t\t\t\tthis.fullscreenLoading = false;\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\tthis.page = 1;\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t//导出\n\t\t\texportFn() {\n\t\t\t\tMessageBox.confirm(\"确认导出?\", \"提示\", {\n\t\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\t\tcancelButtonText: \"取消\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tsupplier_id:this.supplier_ids.join(','),\n\t\t\t\t\t\tcategory_id:this.category_ids.join(','),\n\t\t\t\t\t\tmarket_id:this.market_ids.join(','),\n\t\t\t\t\t\tclassification_id:this.classification_ids.join(','),\n\t\t\t\t\t\tshooting_id:this.shooting_style_ids.join(','),\n\t\t\t\t\t\tstart_time:this.date && this.date.length > 0?this.date[0]:\"\",\n\t\t\t\t\t\tend_time:this.date && this.date.length > 0?this.date[1]:\"\",\n\t\t\t\t\t\tcheck_status:this.check_status_id,\n\t\t\t\t\t\tprice_status:this.price_status\n\t\t\t\t\t}\n\t\t\t\t\tlet search = \"\";\n\t\t\t\t\tif (this.search.indexOf(\"\\n\") > -1) {\n\t\t\t\t\t\tsearch = this.search.replaceAll(\"\\n\", \",\");\n\t\t\t\t\t} else if (this.search.indexOf(\" \") > -1) {\n\t\t\t\t\t\tsearch = this.search.replaceAll(\" \", \",\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearch = this.search;\n\t\t\t\t\t}\n\t\t\t\t\targ.search = search;\n\n\t\t\t\t\tvar arr = [];\n\t\t\t\t\tfor(let k in arg){\n\t\t\t\t\t\tif(arg[k]){\n\t\t\t\t\t\t\tarr.push(`${k}=${arg[k]}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet baseURL = `${location.origin}/api/productstyle/derivegetallproductstyle?${arr.join('&')}`\n\t\t\t\t\twindow.open(baseURL)\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tMessage({\n\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\tmessage: \"取消导出\",\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\t//获取列表\n\t\t\tgetGoodsList(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tsupplier_id:this.supplier_ids.join(','),\n\t\t\t\t\tcategory_id:this.category_ids.join(','),\n\t\t\t\t\tmarket_id:this.market_ids.join(','),\n\t\t\t\t\tclassification_id:this.classification_ids.join(','),\n\t\t\t\t\tshooting_id:this.shooting_style_ids.join(','),\n\t\t\t\t\tstart_time:this.date && this.date.length > 0?this.date[0]:\"\",\n\t\t\t\t\tend_time:this.date && this.date.length > 0?this.date[1]:\"\",\n\t\t\t\t\tcheck_status:this.check_status_id,\n\t\t\t\t\tprice_status:this.price_status,\n\t\t\t\t\tpage:this.page,\n\t\t\t\t\tpagesize:100\n\t\t\t\t}\n\t\t\t\tlet search = \"\";\n\t\t\t\tif (this.search.indexOf(\"\\n\") > -1) {\n\t\t\t\t\tsearch = this.search.replaceAll(\"\\n\", \",\");\n\t\t\t\t} else if (this.search.indexOf(\" \") > -1) {\n\t\t\t\t\tsearch = this.search.replaceAll(\" \", \",\");\n\t\t\t\t} else {\n\t\t\t\t\tsearch = this.search;\n\t\t\t\t}\n\t\t\t\targ.search = search;\n\t\t\t\tthis.loading = true;\n\t\t\t\tresource.getGoodsList(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.button_list = res.data.data.button_list;\n\t\t\t\t\t\tthis.total = res.data.data.total;\n\t\t\t\t\t\tlet data = res.data.data.data;\n\t\t\t\t\t\tthis.is_check = res.data.data.check;\n\t\t\t\t\t\tdata.map(item => {\n\t\t\t\t\t\t\tlet images = [];\n\t\t\t\t\t\t\titem.img.map(i => {\n\t\t\t\t\t\t\t\timages.push(this.domain + i);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\titem.images = images;\n\t\t\t\t\t\t\tif(item.i_id){\n\t\t\t\t\t\t\t\titem.new_i_id = item.i_id.split(',')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(item.bd_i_id){\n\t\t\t\t\t\t\t\titem.new_bd_i_id = item.bd_i_id.split(',')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.data = data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//切换页码\n\t\t\tcheckPage(v){\n\t\t\t\tthis.page = v;\n\t\t\t\t//获取列表\n\t\t\t\tthis.getGoodsList();\n\t\t\t},\n\t\t\t//切换多选\n\t\t\thandleSelectionChange(val) {\n\t\t\t\tthis.multiple_selection = val;\n\t\t\t},\n\t\t\t//批量操作\n\t\t\tallSetting(type){\n\t\t\t\tlet title = \"\";\t\t\t//提示标题\n\t\t\t\tlet total_num = this.multiple_selection.length;\t//选中的总数\n\t\t\t\tlet unset_num = 0;\t//不能操作的数量\n\t\t\t\tlet style_id = [];\n\t\t\t\tif(total_num == 0){\n\t\t\t\t\tthis.$message.warning('至少选择一条！');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(type == '0'){\t//下架\n\t\t\t\t\ttitle = '确认下架？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 2 || item.check_status == 6;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}else if(type == '1'){\t//上架\n\t\t\t\t\ttitle = '确认上架？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 5;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}else if(type == '2'){\t//对接推单\n\t\t\t\t\ttitle = '确认对接推单？'\n\t\t\t\t\tthis.multiple_selection.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = 0;\n\t\t\t\t}else if(type == '3'){\t//删除\n\t\t\t\t\ttitle = '确认批量删除？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 2;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}else if(type.indexOf('audit') > -1){\t//批量审批\n\t\t\t\t\tlet ids = [];\n\t\t\t\t\tthis.multiple_selection.map(item => {\n\t\t\t\t\t\tids.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tthis.$confirm(`确认批量${type.split('_')[1] == 1?'同意':'拒绝'}？`, '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tid:ids.join(','),\n\t\t\t\t\t\t\ttype:type.split('_')[1]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.auditGoods(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t\t});          \n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}else if(type == 'adjust'){\t\t\t\t\t//调价审批\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.price_status == 1;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}\n\t\t\t\tif(total_num == unset_num){\n\t\t\t\t\tthis.$message.warning('没有符合操作条件的记录！');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.$confirm(`您选择了${total_num}项，其中不可操作${unset_num}项，${title}`, '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tif(type == '0' || type == '1'){\t//上架或下架\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:style_id.join(','),\n\t\t\t\t\t\t\ttype:type\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.checkStatus(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else if(type == '2'){\t//对接推单\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:style_id.join(','),\n\t\t\t\t\t\t\ttype:1\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.setAbutmentType(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else if(type == '3'){\t//删除\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:style_id.join(',')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.delGoods(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else if(type == 'adjust'){\t\t\t\t\t//调价审批\n\t\t\t\t\t\t//调价审批\n\t\t\t\t\t\tthis.adjustAudit(style_id.join(','));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t\t//调价审批\n\t\t\tadjustAudit(style_id){\n\t\t\t\tthis.style_id = style_id;\n\t\t\t\tthis.adjust_dialog = true;\n\t\t\t},\n\t\t\t//关闭调价审批\n\t\t\tcloseAdjust(){\n\t\t\t\tthis.adjust_type = 1;\t\t\t\t//调价审批选中的状态\n\t\t\t\tthis.refuse_reason = \"\";\t\t\t//拒绝原因\n\t\t\t},\n\t\t\t//提交调价审批\n\t\t\tconfirmAdjust(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tid:this.style_id,\n\t\t\t\t\ttype:this.adjust_type,\n\t\t\t\t}\n\t\t\t\tif(this.adjust_type == 2){\n\t\t\t\t\targ['refuse_reason'] = this.refuse_reason;\n\t\t\t\t}\n\t\t\t\tresource.changePrice(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\tthis.adjust_dialog = false;\n\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//监听更多操作按钮\n\t\t\thandleCommand(e,id){\n\t\t\t\tif(e == '1'){\t//查看\n\t\t\t\t\tthis.$router.push('/edit_goods?page_type=goods&goods_type=3&style_id=' + id);\n\t\t\t\t}else if(e == '2'){\t//编辑\n\t\t\t\t\tthis.$router.push('/edit_goods?page_type=goods&goods_type=2&style_id=' + id);\n\t\t\t\t}else if(e == '3'){\t//删除\n\t\t\t\t\tthis.$confirm(`确认删除?`, '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:id\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.delGoods(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t\t});          \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t//切换上架或下架\n\t\t\tcheckStatus(style_id,type){\n\t\t\t\tthis.$confirm(`确认${type == 5?'上架':'下架'}?`, '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tstyle_id:style_id,\n\t\t\t\t\t\ttype:type == 5?1:0\n\t\t\t\t\t}\n\t\t\t\t\tresource.checkStatus(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t\twindowOpen(url,old_url){\n\t\t\t\tif(!old_url || old_url.indexOf('https://pan.baidu.com') == -1){\n\t\t\t\t\tthis.$message.warning('该地址不是网盘地址格式!')\n\t\t\t\t}else{\n\t\t\t\t\twindow.open(url)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomponents:{\n\t\t\tTableTitle,\n\t\t\tPaginationWidget\n\t\t}\n\t}\n</script>\n\n\n\n\n\n\n"]}]}