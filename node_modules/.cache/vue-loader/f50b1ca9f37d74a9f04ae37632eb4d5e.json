{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/pages/CarPage/car_page.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/pages/CarPage/car_page.vue","mtime":1688353638386},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["\n\timport resource from '../../api/resource.js'\n\timport commonResource from '../../api/common_resource.js'\n\n\timport PageTitle from '../../components/page_title.vue'\n\timport SearchWidget from '../../components/search_widget.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tsearch:\"\",\n\t\t\t\tloading:false,\n\t\t\t\tcar_goods:[],\t\t\t\t//购物车列表\n\t\t\t\tbutton_list:{},\n\t\t\t\tselected_list: [],\t\t\t//已选中的列表\n\t\t\t\tmax_height:0\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tdestroyed() {\n\t\t\twindow.removeEventListener(\"resize\", () => {});\n\t\t},\n\t\tcreated(){\n\t\t\t//获取购物车列表数量\n\t\t\tthis.getCarList();\n\t\t},\n\t\tupdated(){\n\t\t\tthis.addTableIndex();\n\t\t},\n\t\tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t},\n\t\t\t//去选中按钮是否可以点击\n\t\t\tdisabled(){\n\t\t\t\tlet disabled = false;\n\t\t\t\tlet arr = this.selected_list.filter(item => {\n\t\t\t\t\treturn item.cost_price == '';\n\t\t\t\t})\n\t\t\t\tdisabled = arr.length > 0 || this.selected_list.length == 0;\n\t\t\t\treturn disabled;\n\t\t\t},\n\t\t\t//确认选择按钮是否可点击\n\t\t\tconfirmDisabled(){\n\t\t\t\treturn this.shop_code.length == 0 || this.demand_type.length == 0 || this.send_type.length == 0 || this.is_loading;\n\t\t\t}\n\t\t},\n\t\tmounted() {\n    \t\t//获取表格最大高度\n\t\t\tthis.onResize();\n\t\t\twindow.addEventListener(\"resize\", this.onResize());\n\t\t},\n\t\tmethods: {\n\t\t\t//搜索\n\t\t\tsearchFn(value){\n\t\t\t\tthis.search = value;\n\t\t\t\t//获取购物车列表数量\n\t\t\t\tthis.getCarList();\n\t\t\t},\n\t\t\taddTableIndex() {\n\t\t\t\tlet table = document.querySelector(\".el-table__body-wrapper\");\n\t\t\t\tlet tableSelect = table.getElementsByClassName(\n\t\t\t\t\t\"el-table-column--selection\"\n\t\t\t\t\t);\n\n\t\t\t\tvar arr = Array.from(tableSelect);\n\t\t\t\tarr.forEach((item, index) => {\n\t\t\t\t\tif (item.childNodes.length == 2) {\n\t\t\t\t\t\titem.removeChild(item.lastChild);\n\t\t\t\t\t}\n\t\t\t\t\tlet span = document.createElement(\"span\");\n\t\t\t\t\tspan.innerText = index + 1;\n\t\t\t\t\titem.appendChild(span);\n\t\t\t\t});\n\t\t\t},\n    \t\t//监听屏幕大小变化\n\t\t\tonResize() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n\t\t\t\t\tlet all_title_height = document.getElementById(\"all_title\").offsetHeight;\n\t\t\t\t\tlet bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n\t\t\t\t\tthis.max_height =\n\t\t\t\t\tcard_box_height -\n\t\t\t\t\tall_title_height -\n\t\t\t\t\tbottom_row_height -\n\t\t\t\t\t30 +\n\t\t\t\t\t\"px\";\n\t\t\t\t});\n\t\t\t},\n    \t\t//获取购物车列表数量\n\t\t\tgetCarList(){\n\t\t\t\tthis.loading = true;\n\t\t\t\tresource.getCarList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.car_goods = res.data.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message,warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n    \t\t//判断是否可以选中\n\t\t\tsetStatus(row){\n\t\t\t\tif (row.status == '0') { \n\t\t\t\t\treturn true;  \n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t//切换选中\n\t\t\tchangeSelected(val) {\n\t\t\t\tthis.selected_list = val;\n\t\t\t},\n\t\t\t//点击删除\n\t\t\tdeleteFn(type,style_id){\n\t\t\t\tthis.$confirm('确认删除商品图?', '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\t//商品ID\n\t\t\t\t\tlet style_id_arr = [];\n\t\t\t\t\tthis.selected_list.map(item => {\n\t\t\t\t\t\tstyle_id_arr.push(item.select_cart_id);\n\t\t\t\t\t})\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tselect_cart_id:type == '1'?style_id:style_id_arr.join(',')\n\t\t\t\t\t}\n\t\t\t\t\tresource.removeCarGoods(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getCarList();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\tcomponents:{\n\t\t\tPageTitle,\n\t\t\tSearchWidget\n\t\t}\n\t}\n",{"version":3,"sources":["car_page.vue"],"names":[],"mappings":";AAmDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"car_page.vue","sourceRoot":"src/pages/CarPage","sourcesContent":["<template>\n\t<div class=\"padding_page\">\n\t\t<div class=\"padding_page_content\">\n\t\t\t<SearchWidget page_path=\"car_history\" @callback=\"searchFn\" placeholder=\"搜索款号\"/>\n\t\t\t<PageTitle title=\"待选记录\"/>\n\t\t\t<el-card class=\"card_box\" id=\"card_box\">\n\t\t\t\t<div class=\"all_title\" id=\"all_title\">待选（全部{{car_goods.length}}）</div>\n\t\t\t\t<el-table ref=\"multipleTable\" size=\"mini\" :data=\"car_goods\" tooltip-effect=\"dark\" style=\"width: 100%\" @selection-change=\"changeSelected\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" :max-height=\"max_height\" v-loading=\"loading\">\n\t\t\t\t\t<el-table-column type=\"selection\" width=\"85\" fixed=\"left\" :selectable=\"setStatus\">\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column label=\"图片\" width=\"150\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<div class=\"sx\" v-if=\"scope.row.status == 1\">失效</div>\n\t\t\t\t\t\t\t<div v-else-if=\"scope.row.img.length == 0\">暂无</div>\n\t\t\t\t\t\t\t<el-carousel trigger=\"hover\" indicator-position=\"none\" :autoplay=\"false\" height=\"100px\" v-else>\n\t\t\t\t\t\t\t\t<el-carousel-item v-for=\"item in scope.row.img\" :key=\"item\">\n\t\t\t\t\t\t\t\t\t<el-image :z-index=\"2006\" class=\"image\" :src=\"item\" fit=\"scale-down\" :preview-src-list=\"scope.row.img\"></el-image>\n\t\t\t\t\t\t\t\t</el-carousel-item>\n\t\t\t\t\t\t\t</el-carousel>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\n\t\t\t\t\t<el-table-column label=\"标题\" prop=\"price\" width=\"160\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<div class=\"record_title\">{{scope.row.title}}</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column label=\"款号\" prop=\"style_name\"></el-table-column>\n\t\t\t\t\t<el-table-column label=\"拍摄风格\" prop=\"shooting_style_name\"></el-table-column>\n\t\t\t\t\t<el-table-column label=\"供货价\" prop=\"supply_price\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<div>¥{{scope.row.supply_price}}</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column label=\"上新时间\" prop=\"new_time_name\" width=\"150\">\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column label=\"操作\" width=\"80\" fixed=\"right\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" @click=\"deleteFn('1',scope.row.select_cart_id)\">移除</el-button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t</el-table>\n\t\t\t\t<div class=\"bottom_row\" id=\"bottom_row\">\n\t\t\t\t\t<el-button size='mini' type=\"text\" :disabled=\"selected_list.length == 0\" @click=\"deleteFn('2')\">移除</el-button>\n\t\t\t\t\t<div>已选 {{selected_list.length}} 件</div>\n\t\t\t\t</div>\n\t\t\t</el-card>\n\t\t</div>\n\t</div>\n</template>\n<script>\n\timport resource from '../../api/resource.js'\n\timport commonResource from '../../api/common_resource.js'\n\n\timport PageTitle from '../../components/page_title.vue'\n\timport SearchWidget from '../../components/search_widget.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tsearch:\"\",\n\t\t\t\tloading:false,\n\t\t\t\tcar_goods:[],\t\t\t\t//购物车列表\n\t\t\t\tbutton_list:{},\n\t\t\t\tselected_list: [],\t\t\t//已选中的列表\n\t\t\t\tmax_height:0\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tdestroyed() {\n\t\t\twindow.removeEventListener(\"resize\", () => {});\n\t\t},\n\t\tcreated(){\n\t\t\t//获取购物车列表数量\n\t\t\tthis.getCarList();\n\t\t},\n\t\tupdated(){\n\t\t\tthis.addTableIndex();\n\t\t},\n\t\tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t},\n\t\t\t//去选中按钮是否可以点击\n\t\t\tdisabled(){\n\t\t\t\tlet disabled = false;\n\t\t\t\tlet arr = this.selected_list.filter(item => {\n\t\t\t\t\treturn item.cost_price == '';\n\t\t\t\t})\n\t\t\t\tdisabled = arr.length > 0 || this.selected_list.length == 0;\n\t\t\t\treturn disabled;\n\t\t\t},\n\t\t\t//确认选择按钮是否可点击\n\t\t\tconfirmDisabled(){\n\t\t\t\treturn this.shop_code.length == 0 || this.demand_type.length == 0 || this.send_type.length == 0 || this.is_loading;\n\t\t\t}\n\t\t},\n\t\tmounted() {\n    \t\t//获取表格最大高度\n\t\t\tthis.onResize();\n\t\t\twindow.addEventListener(\"resize\", this.onResize());\n\t\t},\n\t\tmethods: {\n\t\t\t//搜索\n\t\t\tsearchFn(value){\n\t\t\t\tthis.search = value;\n\t\t\t\t//获取购物车列表数量\n\t\t\t\tthis.getCarList();\n\t\t\t},\n\t\t\taddTableIndex() {\n\t\t\t\tlet table = document.querySelector(\".el-table__body-wrapper\");\n\t\t\t\tlet tableSelect = table.getElementsByClassName(\n\t\t\t\t\t\"el-table-column--selection\"\n\t\t\t\t\t);\n\n\t\t\t\tvar arr = Array.from(tableSelect);\n\t\t\t\tarr.forEach((item, index) => {\n\t\t\t\t\tif (item.childNodes.length == 2) {\n\t\t\t\t\t\titem.removeChild(item.lastChild);\n\t\t\t\t\t}\n\t\t\t\t\tlet span = document.createElement(\"span\");\n\t\t\t\t\tspan.innerText = index + 1;\n\t\t\t\t\titem.appendChild(span);\n\t\t\t\t});\n\t\t\t},\n    \t\t//监听屏幕大小变化\n\t\t\tonResize() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n\t\t\t\t\tlet all_title_height = document.getElementById(\"all_title\").offsetHeight;\n\t\t\t\t\tlet bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n\t\t\t\t\tthis.max_height =\n\t\t\t\t\tcard_box_height -\n\t\t\t\t\tall_title_height -\n\t\t\t\t\tbottom_row_height -\n\t\t\t\t\t30 +\n\t\t\t\t\t\"px\";\n\t\t\t\t});\n\t\t\t},\n    \t\t//获取购物车列表数量\n\t\t\tgetCarList(){\n\t\t\t\tthis.loading = true;\n\t\t\t\tresource.getCarList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.car_goods = res.data.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message,warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n    \t\t//判断是否可以选中\n\t\t\tsetStatus(row){\n\t\t\t\tif (row.status == '0') { \n\t\t\t\t\treturn true;  \n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t//切换选中\n\t\t\tchangeSelected(val) {\n\t\t\t\tthis.selected_list = val;\n\t\t\t},\n\t\t\t//点击删除\n\t\t\tdeleteFn(type,style_id){\n\t\t\t\tthis.$confirm('确认删除商品图?', '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\t//商品ID\n\t\t\t\t\tlet style_id_arr = [];\n\t\t\t\t\tthis.selected_list.map(item => {\n\t\t\t\t\t\tstyle_id_arr.push(item.select_cart_id);\n\t\t\t\t\t})\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tselect_cart_id:type == '1'?style_id:style_id_arr.join(',')\n\t\t\t\t\t}\n\t\t\t\t\tresource.removeCarGoods(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getCarList();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\tcomponents:{\n\t\t\tPageTitle,\n\t\t\tSearchWidget\n\t\t}\n\t}\n</script>\n<style lang=\"less\" scoped>\n\t.padding_page_content{\n\t\twidth: 1440rem;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t.card_box{\n\t\t\tflex:1;\n\t\t\t.all_title{\n\t\t\t\tpadding-bottom: 8rem;\n\t\t\t\tfont-size: 14rem;\n\t\t\t\tcolor: #333333;\n\t\t\t}\n\t\t\t.sx{\n\t\t\t\tbackground: #D8D8D8;\n\t\t\t\tborder:1px solid #979797;\n\t\t\t\twidth: 40px;\n\t\t\t\ttext-align: center;\n\t\t\t\theight: 16px;\n\t\t\t\tline-height: 16px;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: -12px;\n\t\t\t\ttop: 45%;\n\t\t\t\ttransform: translate(-50%,0);\n\t\t\t\tz-index: 999;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tcolor: #333333;\n\t\t\t}\n\t\t\t.image{\n\t\t\t\twidth: 100px;\n\t\t\t\theight: 100px;\n\t\t\t}\n\t\t\t.item_row{\n\t\t\t\tdisplay: flex;\n\t\t\t\t.item_label{\n\t\t\t\t\twidth: 48px;\n\t\t\t\t\ttext-align:end;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.record_title{\n\t\t\tfont-size:12rem;\n\t\t\tcolor: var(--color);\n\t\t}\n\t\t.bottom_row{\n\t\t\tpadding-top: 18rem;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t}\n\t}\n\t.select_content{\n\t\tpadding: 18rem 20rem;\n\t\t.info_title{\n\t\t\tmargin-bottom: 14rem;\n\t\t\tfont-size:14rem;\n\t\t\tcolor: #333333;\n\t\t}\n\t\t.form_box{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\t.form_content{\n\t\t\t\t.form_item{\n\t\t\t\t\tmargin-bottom: 20rem;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\t.lable{\n\t\t\t\t\t\twidth: 80rem;\n\t\t\t\t\t\tfont-size:14rem;\n\t\t\t\t\t\tcolor: #333333;\n\t\t\t\t\t\tspan{\n\t\t\t\t\t\t\tcolor: red;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.toast_content{\n\t\tpadding: 10rem 20rem;\n\t\t.toast_text{\n\t\t\tmargin-bottom: 15rem;\n\t\t}\n\t}\n</style>"]}]}