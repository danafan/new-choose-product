{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/App.vue","mtime":1687852360192},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["\n  import resource from './api/resource.js'\n  import * as dd from 'dingtalk-jsapi';\n  export default {\n    created() {\n\n      this.getUserInfo();\n      return;\n\n      let user_type = sessionStorage.getItem(\"user_type\");\n      if(user_type != '2'){ //内部\n        if(dd.env.platform != 'notInDingTalk'){ //是钉钉环境\n          //获取code\n          this.getCode();\n        }else{                                  //不是钉钉环境\n          this.getUserInfo();\n        }\n      }\n    },\n    watch:{\n      $route:function(n,o){\n        document.title = n.name;\n      }\n    },\n    methods: {\n        //获取code\n      getCode(){\n        dd.ready(() => {\n          dd.runtime.permission.requestAuthCode({\n            corpId: \"ding7828fff434921f5b\",\n            onSuccess: res =>{\n                      //获取钉钉用户信息\n              let code = res.code;\n              this.GetDingUserInfo(code);\n            },\n            onFail : err => {\n              alert('dd error: ' + JSON.stringify(err));\n            }\n          });\n        });\n      },\n          //钉钉获取用户信息\n      GetDingUserInfo(code){\n        resource.dingLogin({code:code}).then(res => {\n          if(res.data.code == 1){\n            this.getUserInfo();\n          }else{\n            this.$message.warning(res.data.msg);\n          }\n        })\n      },\n        //获取用户信息\n      getUserInfo() {\n        resource.getUserInfo().then((res) => {\n          if (res.data.code == 1) {\n            sessionStorage.setItem(\"cache\",true);\n            let data = res.data.data;\n            sessionStorage.setItem(\"user_type\", data.user_type);\n            sessionStorage.setItem(\"ding_user_id\", data.ding_user_id);\n            sessionStorage.setItem(\"ding_user_name\", data.ding_user_name);\n            sessionStorage.setItem(\"secret_key\", data.secret_key);\n            sessionStorage.setItem(\"login_token\", data.login_token);\n            let user_info = {\n              user_type:data.user_type,\n              ding_user_id:data.ding_user_id,\n              ding_user_name:data.ding_user_name,\n              login_token:data.login_token,\n              secret_key:data.secret_key\n            }\n            this.$store.commit('setToken',user_info);\n            let domain = data.img_domain;\n            this.$store.commit('setDomain',domain);\n            sessionStorage.setItem(\"domain\",domain);\n              //获取导航\n            this.getMenuNotice();\n          } else {\n            this.$message.warning(res.data.msg);\n          }\n        });\n      },\n        //获取导航\n      getMenuNotice(){\n        resource.getMenuNotice().then(res => {\n          if(res.data.code == 1){\n            let data = res.data.data;\n            let menu_list = [\n            {\n              \"menu_id\": 1,\n              \"menu_name\": \"选品中心\",\n              \"web_url\": \"index\",\n              \"icon\": \"s-order\",\n              \"show_type\": 1,\n              \"list\": []\n            },\n            {\n              \"menu_id\": 4,\n              \"menu_name\": \"供应链中心\",\n              \"web_url\": \"supply_chain\",\n              \"icon\": \"s-order\",\n              \"show_type\": 1,\n              \"list\": [\n              {\n                \"menu_id\": 7,\n                \"menu_name\": \"供应商\",\n                \"web_url\": \"chain_supplier_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": []\n              },\n              {\n                \"menu_id\": 12,\n                \"menu_name\": \"款式资料\",\n                \"web_url\": \"chain_style_info\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": [\n                {\n                  \"menu_id\": 18,\n                  \"menu_name\": \"款式资料\",\n                  \"web_url\": \"style_info\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                },\n                {\n                  \"menu_id\": 19,\n                  \"menu_name\": \"款式资料审核\",\n                  \"web_url\": \"info_audit\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                }\n                ]\n              },\n              {\n                \"menu_id\": 5,\n                \"menu_name\": \"公告管理\",\n                \"web_url\": \"chain_message_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": []\n              },\n              {\n                \"menu_id\": 10,\n                \"menu_name\": \"反馈\",\n                \"web_url\": \"chain_feekback_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": []\n              },\n              {\n                \"menu_id\": 9,\n                \"menu_name\": \"权限\",\n                \"web_url\": \"chain_permissions_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": [\n                {\n                  \"menu_id\": 13,\n                  \"menu_name\": \"权限配置\",\n                  \"web_url\": \"user_table\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                },\n                {\n                  \"menu_id\": 14,\n                  \"menu_name\": \"访问权限\",\n                  \"web_url\": \"role_table\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                },\n                {\n                  \"menu_id\": 15,\n                  \"menu_name\": \"权限录入\",\n                  \"web_url\": \"entry_table\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                }\n                ]\n              },\n              {\n                \"menu_id\": 25,\n                \"menu_name\": \"操作日志\",\n                \"web_url\": \"setting_record_page\",\n                \"icon\": \"\",\n                \"show_type\": 1,\n                \"list\": []\n              }\n              ]\n}\n]\n\n// let menu_list = data.menu_list;\n\nthis.$store.commit(\"setMenuList\", menu_list);\nsessionStorage.setItem(\"menu_list\",JSON.stringify(menu_list))\nif(window.location.hash.split('#/')[1] == ''){\n  this.$router.replace('/tab_menu')\n}\n}else{\n  this.$message.warning(res.data.msg);\n}\n})\n},\n},\n};\n",{"version":3,"sources":["App.vue"],"names":[],"mappings":";AAMA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n<script>\n  import resource from './api/resource.js'\n  import * as dd from 'dingtalk-jsapi';\n  export default {\n    created() {\n\n      this.getUserInfo();\n      return;\n\n      let user_type = sessionStorage.getItem(\"user_type\");\n      if(user_type != '2'){ //内部\n        if(dd.env.platform != 'notInDingTalk'){ //是钉钉环境\n          //获取code\n          this.getCode();\n        }else{                                  //不是钉钉环境\n          this.getUserInfo();\n        }\n      }\n    },\n    watch:{\n      $route:function(n,o){\n        document.title = n.name;\n      }\n    },\n    methods: {\n        //获取code\n      getCode(){\n        dd.ready(() => {\n          dd.runtime.permission.requestAuthCode({\n            corpId: \"ding7828fff434921f5b\",\n            onSuccess: res =>{\n                      //获取钉钉用户信息\n              let code = res.code;\n              this.GetDingUserInfo(code);\n            },\n            onFail : err => {\n              alert('dd error: ' + JSON.stringify(err));\n            }\n          });\n        });\n      },\n          //钉钉获取用户信息\n      GetDingUserInfo(code){\n        resource.dingLogin({code:code}).then(res => {\n          if(res.data.code == 1){\n            this.getUserInfo();\n          }else{\n            this.$message.warning(res.data.msg);\n          }\n        })\n      },\n        //获取用户信息\n      getUserInfo() {\n        resource.getUserInfo().then((res) => {\n          if (res.data.code == 1) {\n            sessionStorage.setItem(\"cache\",true);\n            let data = res.data.data;\n            sessionStorage.setItem(\"user_type\", data.user_type);\n            sessionStorage.setItem(\"ding_user_id\", data.ding_user_id);\n            sessionStorage.setItem(\"ding_user_name\", data.ding_user_name);\n            sessionStorage.setItem(\"secret_key\", data.secret_key);\n            sessionStorage.setItem(\"login_token\", data.login_token);\n            let user_info = {\n              user_type:data.user_type,\n              ding_user_id:data.ding_user_id,\n              ding_user_name:data.ding_user_name,\n              login_token:data.login_token,\n              secret_key:data.secret_key\n            }\n            this.$store.commit('setToken',user_info);\n            let domain = data.img_domain;\n            this.$store.commit('setDomain',domain);\n            sessionStorage.setItem(\"domain\",domain);\n              //获取导航\n            this.getMenuNotice();\n          } else {\n            this.$message.warning(res.data.msg);\n          }\n        });\n      },\n        //获取导航\n      getMenuNotice(){\n        resource.getMenuNotice().then(res => {\n          if(res.data.code == 1){\n            let data = res.data.data;\n            let menu_list = [\n            {\n              \"menu_id\": 1,\n              \"menu_name\": \"选品中心\",\n              \"web_url\": \"index\",\n              \"icon\": \"s-order\",\n              \"show_type\": 1,\n              \"list\": []\n            },\n            {\n              \"menu_id\": 4,\n              \"menu_name\": \"供应链中心\",\n              \"web_url\": \"supply_chain\",\n              \"icon\": \"s-order\",\n              \"show_type\": 1,\n              \"list\": [\n              {\n                \"menu_id\": 7,\n                \"menu_name\": \"供应商\",\n                \"web_url\": \"chain_supplier_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": []\n              },\n              {\n                \"menu_id\": 12,\n                \"menu_name\": \"款式资料\",\n                \"web_url\": \"chain_style_info\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": [\n                {\n                  \"menu_id\": 18,\n                  \"menu_name\": \"款式资料\",\n                  \"web_url\": \"style_info\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                },\n                {\n                  \"menu_id\": 19,\n                  \"menu_name\": \"款式资料审核\",\n                  \"web_url\": \"info_audit\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                }\n                ]\n              },\n              {\n                \"menu_id\": 5,\n                \"menu_name\": \"公告管理\",\n                \"web_url\": \"chain_message_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": []\n              },\n              {\n                \"menu_id\": 10,\n                \"menu_name\": \"反馈\",\n                \"web_url\": \"chain_feekback_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": []\n              },\n              {\n                \"menu_id\": 9,\n                \"menu_name\": \"权限\",\n                \"web_url\": \"chain_permissions_page\",\n                \"icon\": \"s-order\",\n                \"show_type\": 1,\n                \"list\": [\n                {\n                  \"menu_id\": 13,\n                  \"menu_name\": \"权限配置\",\n                  \"web_url\": \"user_table\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                },\n                {\n                  \"menu_id\": 14,\n                  \"menu_name\": \"访问权限\",\n                  \"web_url\": \"role_table\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                },\n                {\n                  \"menu_id\": 15,\n                  \"menu_name\": \"权限录入\",\n                  \"web_url\": \"entry_table\",\n                  \"icon\": \"s-order\",\n                  \"show_type\": 1,\n                  \"list\": []\n                }\n                ]\n              },\n              {\n                \"menu_id\": 25,\n                \"menu_name\": \"操作日志\",\n                \"web_url\": \"setting_record_page\",\n                \"icon\": \"\",\n                \"show_type\": 1,\n                \"list\": []\n              }\n              ]\n}\n]\n\n// let menu_list = data.menu_list;\n\nthis.$store.commit(\"setMenuList\", menu_list);\nsessionStorage.setItem(\"menu_list\",JSON.stringify(menu_list))\nif(window.location.hash.split('#/')[1] == ''){\n  this.$router.replace('/tab_menu')\n}\n}else{\n  this.$message.warning(res.data.msg);\n}\n})\n},\n},\n};\n</script>"]}]}