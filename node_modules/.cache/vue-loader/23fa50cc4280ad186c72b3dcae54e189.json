{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/pages/tab_menu.vue?vue&type=style&index=0&id=3d95e4f1&prod&lang=less&scoped=true&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/pages/tab_menu.vue","mtime":1686893112016},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["\n.container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .page_header {\n    border-bottom: 1px solid #F3F3F3;\n    background: #ffffff;\n    width: 100%;\n    padding-left: 60rem;\n    padding-right: 60rem;\n    height: 48rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .logo_icon{\n      width: 90rem;\n      height: 34rem;\n    }\n    .message_box{\n      position: relative;\n      width: 300rem;\n      height: 48rem;\n      display: flex;\n      align-items: center;\n      .message_icon_box{\n        margin-right: 8rem;\n        position: relative;\n        width: 13rem;\n        height: 12rem;\n        .message_icon{\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n        .num{\n          position: absolute;\n          top: -10rem;\n          right: -10rem;\n          border-radius:50%;\n          background: #F22E00;\n          height: 14rem;\n          line-height: 14rem;\n          padding-left: 3rem;\n          padding-right: 3rem;\n          font-size: 12rem;\n          color: #ffffff;\n        }\n      }\n    }\n\n    .message_content{\n      flex: 1;\n      font-size: 12rem;\n      color: var(--color);\n      word-break: break-all;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n    }\n    .header_right{\n      display: flex;\n      align-items: center;\n      font-size: 14rem;\n      color: #333333;\n      .tab_item{\n        margin-right: 30rem;\n        font-size: 14rem!important;\n        cursor:pointer;\n      }\n      .active_tab{\n        color: var(--color);\n      }\n      .user_img{\n        margin-left: 14rem;\n        margin-right: 10rem;\n        width: 24rem;\n        height: 24rem;\n      }\n      .line{\n        margin-left: 8rem;\n        margin-right: 8rem;\n        width: 1px;\n        height: 14rem;\n        background: var(--color);\n      }\n      .login_out{\n        cursor:pointer;\n      }\n    }\n  }\n  .content {\n    background-color: #f6f6f6;\n    width: 100%;\n    flex: 1;\n    position: relative;\n  }\n  .page_foot {\n    background-color: #ffffff;\n    width: 100%;\n    height: 30px;\n  }\n}\n.table_notice{\n  cursor: pointer;\n  font-size: 12rem;\n  word-break: break-all;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n\n}\n.dialog_content{\n  padding: 24px 40px;\n}\n.content{\n  color: #666666;\n}\n.time{\n  color: #999999;\n}\n",{"version":3,"sources":["tab_menu.vue"],"names":[],"mappings":";AA6ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tab_menu.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"container\" @click=\"closeFn\">\n    <div class=\"page_header\">\n      <!-- logo -->\n      <img class=\"logo_icon\" src=\"../static/logo_icon.png\" v-if=\"active_path == '/supply_chain' || notice_list.length == 0\">\n      <!-- 公告 -->\n      <el-popover placement=\"bottom-end\" width=\"420\" trigger=\"hover\" v-else>\n        <el-table :data=\"notice_list\" max-height=\"180px\" size=\"mini\" :show-header=\"false\" @row-click=\"noticeDetail\">\n          <el-table-column width=\"248\" property=\"notice_content\" label=\"内容\">\n            <template slot-scope=\"scope\">\n              <div class=\"table_notice content\" :class=\"{'time':scope.row.read_status == 1}\">{{scope.row.notice_title}}</div>\n            </template>\n          </el-table-column>\n          <el-table-column property=\"add_time\" label=\"时间\">\n            <template slot-scope=\"scope\">\n              <div class=\"table_notice time\">{{scope.row.add_time}}</div>\n            </template>\n          </el-table-column>\n        </el-table>\n        <div class=\"message_box\" slot=\"reference\">\n          <div class=\"message_icon_box\">\n            <img class=\"message_icon\" src=\"../static/message_icon.png\">\n            <div class=\"num\" v-if=\"nuread_num > 0\">{{nuread_num}}</div>\n          </div>\n          <div class=\"message_content\">{{notice_list[0].notice_title}}</div>\n        </div>\n      </el-popover>\n      <div class=\"header_right\">\n        <div class=\"tab_item\" :class=\"{'active_tab':active_index == index}\" v-for=\"(item,index) in menu_list\" @click=\"checkIndex(index)\">{{item.menu_name}}</div>\n        <div v-if=\"user_type == 2\">\n          <el-dropdown @command=\"edit_dialog = true\">\n            <div style=\"display: flex;align-items: center\">\n             <img class=\"user_img\" src=\"../static/user_img.png\">\n             <div class=\"user_name\">{{ding_user_name}}</div>\n           </div>\n           <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item>修改密码</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </div>\n      <div style=\"display: flex;align-items: center\" v-else>\n        <img class=\"user_img\" src=\"../static/user_img.png\">\n        <div class=\"user_name\">{{ding_user_name}}</div>\n      </div>\n      <div class=\"line\"></div>\n      <el-popconfirm\n      title=\"确认退出？\"\n      @confirm=\"loginOut\"\n      >\n      <div slot=\"reference\" class=\"login_out\">退出</div>\n    </el-popconfirm>\n  </div>\n</div>\n<div class=\"content\">\n  <keep-alive>\n    <router-view v-if=\"$route.meta.keepAlive\">\n    </router-view>\n  </keep-alive>\n  <router-view v-if=\"!$route.meta.keepAlive\"></router-view>\n</div>\n<div class=\"page_foot\"></div>\n<!-- 修改密码 -->\n<el-dialog width=\"30%\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :show-close=\"false\" destroy-on-close @close=\"editDialog\" :visible.sync=\"edit_dialog\">\n  <div slot=\"title\" class=\"dialog_title\">\n    <div>修改密码</div>\n    <img class=\"close_icon\" src=\"../static/close_icon.png\" @click=\"edit_dialog = false\">\n  </div>\n  <div class=\"dialog_content\">\n    <el-form size=\"mini\" label-width=\"100px\">\n      <el-form-item label=\"供应商名称：\">\n        {{supplier_name}}\n      </el-form-item>\n      <el-form-item label=\"用户名：\">\n        <div>{{ding_user_name}}</div>\n      </el-form-item>\n      <el-form-item label=\"旧密码：\" required>\n        <el-input style=\"width: 200px\" v-model=\"old_password\" maxlength=\"20\" placeholder=\"请输入旧密码\">\n        </el-input>\n      </el-form-item>\n      <el-form-item label=\"新密码：\" required>\n        <el-input style=\"width: 200px\" v-model=\"password\" maxlength=\"20\" placeholder=\"请输入新密码\">\n        </el-input>\n      </el-form-item>\n      <el-form-item label=\"确认密码：\" required>\n        <el-input style=\"width: 200px\" v-model=\"confirm_password\" maxlength=\"20\" placeholder=\"请确认密码\">\n        </el-input>\n      </el-form-item>\n    </el-form>\n  </div>\n  <div slot=\"footer\" class=\"dialog_footer\">\n    <el-button size=\"small\" @click=\"edit_dialog = false\">取消</el-button>\n    <el-button type=\"primary\" size=\"small\" @click=\"commitFn\">确定</el-button>\n  </div>\n</el-dialog>\n</div>\n</template>\n\n<style lang=\"less\" scoped>\n  .container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    .page_header {\n      border-bottom: 1px solid #F3F3F3;\n      background: #ffffff;\n      width: 100%;\n      padding-left: 60rem;\n      padding-right: 60rem;\n      height: 48rem;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      .logo_icon{\n        width: 90rem;\n        height: 34rem;\n      }\n      .message_box{\n        position: relative;\n        width: 300rem;\n        height: 48rem;\n        display: flex;\n        align-items: center;\n        .message_icon_box{\n          margin-right: 8rem;\n          position: relative;\n          width: 13rem;\n          height: 12rem;\n          .message_icon{\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          }\n          .num{\n            position: absolute;\n            top: -10rem;\n            right: -10rem;\n            border-radius:50%;\n            background: #F22E00;\n            height: 14rem;\n            line-height: 14rem;\n            padding-left: 3rem;\n            padding-right: 3rem;\n            font-size: 12rem;\n            color: #ffffff;\n          }\n        }\n      }\n\n      .message_content{\n        flex: 1;\n        font-size: 12rem;\n        color: var(--color);\n        word-break: break-all;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        display: -webkit-box;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n      }\n      .header_right{\n        display: flex;\n        align-items: center;\n        font-size: 14rem;\n        color: #333333;\n        .tab_item{\n          margin-right: 30rem;\n          font-size: 14rem!important;\n          cursor:pointer;\n        }\n        .active_tab{\n          color: var(--color);\n        }\n        .user_img{\n          margin-left: 14rem;\n          margin-right: 10rem;\n          width: 24rem;\n          height: 24rem;\n        }\n        .line{\n          margin-left: 8rem;\n          margin-right: 8rem;\n          width: 1px;\n          height: 14rem;\n          background: var(--color);\n        }\n        .login_out{\n          cursor:pointer;\n        }\n      }\n    }\n    .content {\n      background-color: #f6f6f6;\n      width: 100%;\n      flex: 1;\n      position: relative;\n    }\n    .page_foot {\n      background-color: #ffffff;\n      width: 100%;\n      height: 30px;\n    }\n  }\n  .table_notice{\n    cursor: pointer;\n    font-size: 12rem;\n    word-break: break-all;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n\n  }\n  .dialog_content{\n    padding: 24px 40px;\n  }\n  .content{\n    color: #666666;\n  }\n  .time{\n    color: #999999;\n  }\n</style>\n<script>\n  import resource from '../api/resource.js'\n  import supplierResource from '../api/supplier_resource.js'\n  export default {\n    data() {\n      return {\n        active_index:0,\n        // username: \"\",           //用户名\n        edit_dialog:false,      //修改密码弹窗\n        old_password:\"\",        //旧密码\n        password:\"\",            //新密码\n        confirm_password:\"\",    //确认密码\n      };\n    },\n    created() {\n      this.getNotice();\n      let path = window.location.hash.split('#/')[1].indexOf('?') > -1?window.location.hash.split('#/')[1].split('?')[0]:window.location.hash.split('#/')[1];\n      if(path == 'tab_menu'){\n        this.active_index = 0;\n      }else if(path == 'goods_detail'){\n        if(this.$route.query.page_path == 'supplier'){\n          this.active_index = 2;\n        }else{\n          this.active_index = 0;\n        }\n      }else if(this.user_type == '1' && this.getActiveIndex(path) == -1){\n        if(path == 'supplier_detail'){  //供应商详情\n          this.active_index = 2;\n        }else if(path == 'chain_audit_page' || path == 'chain_goods_page' || path == 'b_z_promotion_page' || path == 'chain_supplier_page' || path == 'chain_message_page' || path == 'chain_setting_page' || path == 'chain_feekback_page' || path == 'chain_permissions_page' || path == 'setting_record_page'){\n          this.active_index = 3;\n        }\n      }else{\n        this.active_index = this.getActiveIndex(path);\n      }\n      //判断是刚登录进来的直接进入首页\n      if(path == 'tab_menu'){\n       if(this.user_type == '2'){\n        this.$router.push('/gys_index')\n      }else{\n        this.$router.push('/index')\n      }\n    }\n  },\n  computed: {\n      //供应商名称\n    supplier_name() {\n      return this.$store.state.supplier_name;\n    },\n      //用户类型\n    user_type() {\n      return this.$store.state.user_type;\n    },\n      //导航列表\n    menu_list() {\n      return this.$store.state.menu_list;\n    },\n      //公告列表\n    notice_list() {\n      return this.$store.state.notice_list;\n    },\n      //未读公告数\n    nuread_num() {\n      return this.$store.state.nuread_num;\n    },\n      //当前路由\n    active_path() {\n      return this.$store.state.active_path;\n    },\n      //用户名称\n    ding_user_name() {\n      return this.$store.state.ding_user_name;\n    },\n  },\n  methods: {\n      //获取当前选中的下标\n    getActiveIndex(path){\n      return this.menu_list.findIndex(item => {\n        return item.web_url == path\n      })\n    },\n      //全局关闭筛选项下拉\n    closeFn(){\n      this.$store.commit(\"setScreen\", false);\n    },\n      //获取公告列表\n    getNotice(){\n      this.$store.dispatch('getNotice')\n    },\n      //点击切换导航\n    checkIndex(index){\n      this.active_index = index;\n      let active_path = this.menu_list[index].web_url;\n      this.$router.push(active_path);\n    },\n      //查看公告\n    noticeDetail(row, column, event){\n        //获取公告详情\n      let arg = {\n        notice_id:row.notice_id\n      }\n      resource.noticeInfo(arg).then(res => {\n        if(res.data.code == 1){\n            //获取公告列表\n          this.getNotice();\n          let active_path = `/notice_page?notice_id=${row.notice_id}`;\n          const routeData = this.$router.resolve(active_path);\n          window.open(routeData.href);\n        }else{\n          this.$message.warning(res.data.msg);\n        }\n      })\n    },\n      //关闭修改密码弹窗\n    editDialog(){\n      this.old_password = \"\";\n      this.password = \"\";\n      this.confirm_password = \"\";\n    },\n      //点击提交修改密码\n    commitFn(){\n      if(this.old_password == ''){\n        this.$message.warning('请输入旧密码!');\n        return;\n      }else if(this.password == ''){\n        this.$message.warning('请输入新密码!');\n        return;\n      }else if(this.confirm_password == ''){\n        this.$message.warning('请确认密码!');\n        return;\n      }else if(this.password !== this.confirm_password){\n        this.$message.warning('确认密码和新密码不一致!');\n        return;\n      }\n      let arg = {\n        old_password:this.old_password,\n        password:this.password,\n        confirm_password:this.confirm_password\n      }\n      supplierResource.editPwd(arg).then(res => {\n        if(res.data.code == 1){\n          this.edit_dialog = false;\n          this.$message.success(res.data.msg);\n          sessionStorage.clear();\n          this.$router.replace('/login');\n        }else{\n          this.$message.warning(res.data.msg);\n        }\n      })\n    },\n      //退出\n    loginOut(){\n      let user_id = sessionStorage.getItem(\"ding_user_id\");\n      let arg = {\n        user_id:user_id\n      }\n      resource.loginOut(arg).then(res => {\n        if(res.data.code == 1){\n          this.$message.success(res.data.msg);\n          sessionStorage.clear();\n          this.$router.replace('/login');\n        }else{\n          this.$message.warning(res.data.msg);\n        }\n      })\n    }\n  }\n};\n</script>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]}]}