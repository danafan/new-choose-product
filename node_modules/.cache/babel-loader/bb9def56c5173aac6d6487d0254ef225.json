{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/pages/SupplyChain/pages/StyleInfoPages/style_info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/pages/SupplyChain/pages/StyleInfoPages/style_info.vue","mtime":1688028015900},{"path":"/Users/fanyulong/project/2022/new-choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport commonResource from \"../../../../api/common_resource.js\";\nimport resource from \"../../../../api/chain_resource.js\";\nimport { getNowDate, getCurrentDate } from \"../../../../api/date.js\";\nimport { exportPost } from \"../../../../api/export.js\";\nimport { MessageBox, Message } from \"element-ui\";\nimport TableTitle from \"../../components/table_title.vue\";\nimport PaginationWidget from \"../../../../components/pagination_widget.vue\";\nimport UploadFile from \"../../../../components/upload_file.vue\";\nexport default {\n  data: function data() {\n    return {\n      is_up: false,\n      loading: false,\n      supplier_list: [],\n      //供应商列表\n      supplier_ids: [],\n      //选中的供应商\n      cate_list: [],\n      //类目列表\n      category_ids: [],\n      //选中的类目\n      market_list: [],\n      //市场列表\n      market_ids: [],\n      //选中的市场\n      style_list: [],\n      //拍摄风格列表\n      shooting_style_ids: [],\n      //选中的拍摄风格\n      class_list: [],\n      //分类列表\n      classification_ids: [],\n      //选中的分类\n      date: [],\n      //上新日期\n      pickerOptions: {\n        shortcuts: [{\n          text: \"今日上新\",\n          onClick: function onClick(picker) {\n            var start = getNowDate();\n            var end = getNowDate();\n            picker.$emit(\"pick\", [start, end]);\n          }\n        }, {\n          text: \"三日上新\",\n          onClick: function onClick(picker) {\n            var start = getCurrentDate(3);\n            var end = getNowDate();\n            picker.$emit(\"pick\", [start, end]);\n          }\n        }, {\n          text: \"七日上新\",\n          onClick: function onClick(picker) {\n            var start = getCurrentDate(7);\n            var end = getNowDate();\n            picker.$emit(\"pick\", [start, end]);\n          }\n        }]\n      },\n      search: \"\",\n      //款式编码\n      max_height: 0,\n      page: 1,\n      data: [],\n      //获取的数据\n      total: 0,\n      button_list: {},\n      import_dialog: false,\n      //导入或批量修改弹窗\n      multiple_selection: [],\n      //主表已选中的列表\n      fullscreenLoading: false,\n      style_id: \"\",\n      //点击的款式ID\n      dialog_type: '',\n      //1:添加；2:编辑\n      ae_dialog: false,\n      //添加或编辑弹窗\n      ae_arg: {\n        style_name: \"\",\n        title: \"\",\n        category_id: \"\",\n        classification_id: \"\",\n        fabric: \"\",\n        supplier_id: \"\",\n        remark: \"\",\n        msrp: \"\",\n        price_control: \"\",\n        tag_price: \"\",\n        settlement_price: \"\",\n        supply_price: \"\",\n        distribution_price: \"\",\n        net_disk_address: \"\"\n      },\n      //添加或编辑的内容\n      size_list: [],\n      //已添加的尺码列表\n      size_visible: false,\n      //是否展示添加尺码输入框\n      size_value: '',\n      //输入的添加尺码的内容\n      color_list: [],\n      //已添加的颜色列表\n      color_visible: false,\n      //是否展示添加颜色输入框\n      color_value: '',\n      //输入的添加颜色的内容\n      size_color_data: [],\n      //尺码和颜色生成的表格数据\n      goods_img_list: [],\n      //商品图列表\n      detail_img_list: [],\n      //详情图列表\n      style_card_list: [],\n      //风格列表\n      selected_style: [],\n      //表格已选中的列表\n      style_table_data: [],\n      //未选择的风格列表\n      active_style_index: 0,\n      //风格列表选中的下标\n      show_style_upload: true //是否显示风格图图片组件\n\n    };\n  },\n  created: function created() {\n    //获取供应商列表\n    this.ajaxSupplierList(); //获取类目列表\n\n    this.ajaxCateList(); //市场列表\n\n    this.ajaxMarketList(); //拍摄风格列表\n\n    this.ajaxStyleList(); //分类列表\n\n    this.ajaxClassList();\n    this.supplier_ids = [];\n    this.category_ids = [];\n    this.market_ids = [];\n    this.classification_ids = [];\n    this.shooting_style_ids = [];\n    this.date = [];\n    this.search = \"\";\n    this.page = 1; //获取列表\n\n    this.getGoodsList();\n  },\n  mounted: function mounted() {\n    //获取表格最大高度\n    this.onResize();\n    window.addEventListener(\"resize\", this.onResize());\n  },\n  computed: {\n    //图片前缀\n    domain: function domain() {\n      return this.$store.state.domain;\n    }\n  },\n  watch: {\n    search: function search() {\n      //获取表格最大高度\n      this.onResize();\n    },\n    is_up: function is_up(n, o) {\n      //获取表格最大高度\n      this.onResize();\n    }\n  },\n  methods: {\n    //监听屏幕大小变化\n    onResize: function onResize() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var card_box_height = document.getElementById(\"card_box\").offsetHeight;\n        var table_title_height = document.getElementById(\"table_title\").offsetHeight;\n        var bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n        _this.max_height = card_box_height - table_title_height - bottom_row_height - 60 + \"px\";\n      });\n    },\n    //获取供应商列表\n    ajaxSupplierList: function ajaxSupplierList() {\n      var _this2 = this;\n\n      commonResource.ajaxSupplierList().then(function (res) {\n        if (res.data.code == 1) {\n          _this2.supplier_list = res.data.data;\n        } else {\n          _this2.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //获取类目列表\n    ajaxCateList: function ajaxCateList() {\n      var _this3 = this;\n\n      commonResource.ajaxCateList().then(function (res) {\n        if (res.data.code == 1) {\n          _this3.cate_list = res.data.data;\n        } else {\n          _this3.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //市场列表\n    ajaxMarketList: function ajaxMarketList() {\n      var _this4 = this;\n\n      commonResource.ajaxMarketList().then(function (res) {\n        if (res.data.code == 1) {\n          _this4.market_list = res.data.data;\n        } else {\n          _this4.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //拍摄风格列表\n    ajaxStyleList: function ajaxStyleList() {\n      var _this5 = this;\n\n      commonResource.ajaxStyleList().then(function (res) {\n        if (res.data.code == 1) {\n          _this5.style_list = res.data.data;\n          _this5.style_table_data = _this5.style_list;\n        } else {\n          _this5.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //分类列表\n    ajaxClassList: function ajaxClassList() {\n      var _this6 = this;\n\n      commonResource.ajaxClassList().then(function (res) {\n        if (res.data.code == 1) {\n          _this6.class_list = res.data.data;\n        } else {\n          _this6.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //点击添加或编辑\n    openForm: function openForm(type, style_id) {\n      var _this7 = this;\n\n      this.dialog_type = type;\n      this.style_id = style_id;\n\n      if (this.dialog_type == '1') {\n        //添加\n        this.ae_dialog = true;\n        return;\n      }\n\n      resource.editProductStyleGet({\n        style_id: this.style_id\n      }).then(function (res) {\n        var data = res.data.data;\n\n        for (var k in _this7.ae_arg) {\n          _this7.ae_arg[k] = data[k];\n        }\n\n        _this7.size_color_data = data.sku.list; //商品规格\n\n        _this7.getSizeColorList();\n\n        _this7.goods_img_list = data.img; //商品图\n\n        var style_imgs = data.style_imgs; //风格图\n\n        style_imgs.map(function (item) {\n          item['image_arr'] = item.img;\n          delete item.img;\n        });\n        _this7.style_card_list = style_imgs;\n        _this7.detail_img_list = data.detail_imgs; //详情图\n\n        _this7.ae_dialog = true;\n      });\n    },\n    //删除已添加的尺寸\n    sizeClose: function sizeClose(tag) {\n      this.size_list.splice(this.size_list.indexOf(tag), 1); //根据颜色和尺码生成表格\n\n      this.setSizeColorTable();\n    },\n    //点击添加尺寸\n    addSize: function addSize() {\n      var _this8 = this;\n\n      this.size_visible = true;\n      this.$nextTick(function (_) {\n        _this8.$refs.sizeTagInput.$refs.input.focus();\n      });\n    },\n    //回车或失去焦点追加尺寸\n    sizeInputConfirm: function sizeInputConfirm() {\n      var size_value = this.size_value;\n\n      if (size_value) {\n        this.size_list.push(size_value);\n      }\n\n      this.size_visible = false;\n      this.size_value = ''; //根据颜色和尺码生成表格\n\n      this.setSizeColorTable();\n    },\n    //删除已添加的颜色\n    colorClose: function colorClose(tag) {\n      this.color_list.splice(this.color_list.indexOf(tag), 1); //根据颜色和尺码生成表格\n\n      this.setSizeColorTable();\n    },\n    //点击添加颜色\n    addColor: function addColor() {\n      var _this9 = this;\n\n      this.color_visible = true;\n      this.$nextTick(function (_) {\n        _this9.$refs.colorTagInput.$refs.input.focus();\n      });\n    },\n    //回车或失去焦点追加颜色\n    colorInputConfirm: function colorInputConfirm() {\n      var color_value = this.color_value;\n\n      if (color_value) {\n        this.color_list.push(color_value);\n      }\n\n      this.color_visible = false;\n      this.color_value = ''; //根据颜色和尺码生成表格\n\n      this.setSizeColorTable();\n    },\n    //根据颜色和尺码生成表格\n    setSizeColorTable: function setSizeColorTable() {\n      var _this10 = this;\n\n      this.size_color_data = [];\n      this.size_list.map(function (size) {\n        _this10.color_list.map(function (color) {\n          var table_row = {\n            size: size,\n            color: color,\n            sku_code: \"\"\n          };\n\n          _this10.size_color_data.push(table_row);\n        });\n      });\n    },\n    //删除某行\n    deleteRow: function deleteRow(index) {\n      this.size_color_data.splice(index, 1); //根据列表获取上面尺码和颜色列表\n\n      this.getSizeColorList();\n    },\n    //根据列表获取上面尺码和颜色列表\n    getSizeColorList: function getSizeColorList() {\n      var size_list = [];\n      var color_list = [];\n      this.size_color_data.map(function (item) {\n        size_list.push(item.size);\n        color_list.push(item.color);\n      });\n      this.size_list = Array.from(new Set(size_list));\n      this.color_list = Array.from(new Set(color_list));\n    },\n    //监听商品图列表回调\n    goodsImgCallBackFn: function goodsImgCallBackFn(img_arr) {\n      this.goods_img_list = img_arr;\n    },\n    //监听详情图列表回调\n    detailImgCallBackFn: function detailImgCallBackFn(img_arr) {\n      this.detail_img_list = img_arr;\n    },\n    //切换商品风格添加表格切换多选\n    styleChange: function styleChange(val) {\n      this.selected_style = val;\n    },\n    //确认商品风格添加表格切换多选\n    setStyleFn: function setStyleFn() {\n      var _this11 = this;\n\n      this.selected_style.map(function (item) {\n        item['image_arr'] = [];\n\n        _this11.style_card_list.push(item);\n      });\n      this.style_table_data = this.filterStyle(this.style_table_data, this.style_card_list);\n      this.$refs.stylePopover.doClose();\n    },\n    //点击删除已选的风格\n    deleteStyleTab: function deleteStyleTab(index) {\n      var _this12 = this;\n\n      this.show_style_upload = false;\n\n      if (this.active_style_index == index) {\n        this.active_style_index = 0;\n      }\n\n      var current_style = this.style_card_list[index];\n      this.style_table_data.unshift(current_style);\n      this.style_card_list.splice(index, 1);\n      this.$nextTick(function () {\n        _this12.show_style_upload = true;\n      });\n    },\n    //点击切换已选的风格\n    checkStyleTab: function checkStyleTab(index) {\n      var _this13 = this;\n\n      this.show_style_upload = false;\n      this.active_style_index = index;\n      this.$nextTick(function () {\n        _this13.show_style_upload = true;\n      });\n    },\n    //监听风格图列表回调\n    currentStyleImgCallBackFn: function currentStyleImgCallBackFn(img_arr) {\n      var new_item = JSON.parse(JSON.stringify(this.style_card_list[this.active_style_index]));\n      new_item.image_arr = img_arr;\n      this.$set(this.style_card_list, this.active_style_index, new_item);\n    },\n    //对比已选中的过滤右侧未选中的风格  \n    filterStyle: function filterStyle(arr1, arr2) {\n      return arr1.filter(function (v) {\n        return arr2.every(function (val) {\n          return val.shooting_style_id != v.shooting_style_id;\n        });\n      });\n    },\n    //点击添加或编辑的保存\n    saveAeFn: function saveAeFn() {\n      var _this14 = this;\n\n      if (this.ae_arg.style_name == '') {\n        this.$message.warning('请输入商品款号！');\n      } else if (this.ae_arg.supplier_id == '') {\n        this.$message.warning('请选择供应商！');\n      } else if (this.ae_arg.price_control == '') {\n        this.$message.warning('请输入控价！');\n      } else if (this.ae_arg.settlement_price == '') {\n        this.$message.warning('请输入结算价！');\n      } else {\n        //处理商品规格\n        var sku_null_arr = this.size_color_data.filter(function (item) {\n          return item.sku_code == '';\n        });\n\n        if (sku_null_arr.length > 0) {\n          this.$message.warning('商品规格SKU编码不能存在空白项！');\n          return;\n        }\n\n        var sku_list_arr = [];\n        this.size_color_data.map(function (item) {\n          sku_list_arr.push(\"color-\".concat(item.color, \"_size-\").concat(item.size, \"_skucode-\").concat(item.sku_code));\n        }); //处理风格图\n\n        var style_card_arg = [];\n        this.style_card_list.map(function (item) {\n          style_card_arg.push(\"\".concat(item.shooting_style_id, \"-\").concat(item.image_arr.join(',')));\n        }); //可传参数\n\n        var arg = JSON.parse(JSON.stringify(this.ae_arg));\n        arg['sku_list'] = sku_list_arr.join(',');\n        arg['img'] = this.goods_img_list.join(',');\n        arg['style_imgs'] = style_card_arg.join(';');\n        arg['detail_imgs'] = this.detail_img_list.join(',');\n\n        if (this.dialog_type == '1') {\n          //添加\n          resource.addProductStyle(arg).then(function (res) {\n            if (res.data.code == 1) {\n              _this14.$message.success(res.data.msg);\n\n              _this14.ae_dialog = false; //获取列表\n\n              _this14.getGoodsList();\n            } else {\n              _this14.$message.warning(res.data.msg);\n            }\n          });\n        } else {\n          //编辑\n          arg['style_id'] = this.style_id;\n          resource.editProductStylePost(arg).then(function (res) {\n            if (res.data.code == 1) {\n              _this14.$message.success(res.data.msg);\n\n              _this14.ae_dialog = false; //获取列表\n\n              _this14.getGoodsList();\n            } else {\n              _this14.$message.warning(res.data.msg);\n            }\n          });\n        }\n      }\n    },\n    //下载模版\n    downTemplate: function downTemplate() {\n      window.open(\"\".concat(this.downLoadUrl, \"/file/\\u5546\\u54C1\\u6279\\u91CF\\u5BFC\\u5165\\u6A21\\u677F.xlsx\"));\n    },\n    //导入\n    uploadCsv: function uploadCsv() {\n      var _this15 = this;\n\n      if (this.$refs.csvUpload.files.length > 0) {\n        var files = this.$refs.csvUpload.files;\n        this.fullscreenLoading = true;\n        resource.addAllProductStyle({\n          file: files[0]\n        }).then(function (res) {\n          _this15.$refs.csvUpload.value = null;\n          _this15.import_dialog = false;\n          _this15.fullscreenLoading = false;\n\n          if (res.data.code == 1) {\n            _this15.$message.success(res.data.msg);\n\n            _this15.page = 1; //获取列表\n\n            _this15.getGoodsList();\n          } else {\n            _this15.$message.warning(res.data.msg);\n          }\n        });\n      }\n    },\n    //导出\n    exportFn: function exportFn() {\n      var _this16 = this;\n\n      MessageBox.confirm(\"确认导出?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        var arg = {\n          supplier_id: _this16.supplier_ids.join(','),\n          category_id: _this16.category_ids.join(','),\n          market_id: _this16.market_ids.join(','),\n          classification_id: _this16.classification_ids.join(','),\n          shooting_id: _this16.shooting_style_ids.join(','),\n          start_time: _this16.date && _this16.date.length > 0 ? _this16.date[0] : \"\",\n          end_time: _this16.date && _this16.date.length > 0 ? _this16.date[1] : \"\"\n        };\n        var search = JSON.parse(JSON.stringify(_this16.search));\n\n        if (search.indexOf(\"\\n\") > -1 || search.indexOf(\" \") > -1 || search.indexOf(\"+\") > -1) {\n          if (search.indexOf(\"\\n\") > -1) {\n            search = search.replaceAll(\"\\n\", \",\");\n          }\n\n          if (search.indexOf(\" \") > -1) {\n            search = search.replaceAll(\" \", \",\");\n          }\n\n          if (search.indexOf(\"+\") > -1) {\n            search = search.replaceAll(\"+\", \"%2B\");\n          }\n        }\n\n        arg.search = search;\n        var arr = [];\n\n        for (var k in arg) {\n          if (arg[k]) {\n            arr.push(\"\".concat(k, \"=\").concat(arg[k]));\n          }\n        }\n\n        var baseURL = \"\".concat(location.origin, \"/api/productstyle/derivegetallproductstyle?\").concat(arr.join('&'));\n        window.open(baseURL);\n      }).catch(function () {\n        Message({\n          type: \"info\",\n          message: \"取消导出\"\n        });\n      });\n    },\n    //获取列表\n    getGoodsList: function getGoodsList() {\n      var _this17 = this;\n\n      var arg = {\n        supplier_id: this.supplier_ids.join(','),\n        category_id: this.category_ids.join(','),\n        market_id: this.market_ids.join(','),\n        classification_id: this.classification_ids.join(','),\n        shooting_id: this.shooting_style_ids.join(','),\n        start_time: this.date && this.date.length > 0 ? this.date[0] : \"\",\n        end_time: this.date && this.date.length > 0 ? this.date[1] : \"\",\n        page: this.page,\n        pagesize: 100\n      };\n      var search = JSON.parse(JSON.stringify(this.search));\n\n      if (search.indexOf(\"\\n\") > -1 || search.indexOf(\" \") > -1 || search.indexOf(\"+\") > -1) {\n        if (search.indexOf(\"\\n\") > -1) {\n          search = search.replaceAll(\"\\n\", \",\");\n        }\n\n        if (search.indexOf(\" \") > -1) {\n          search = search.replaceAll(\" \", \",\");\n        }\n\n        if (search.indexOf(\"+\") > -1) {\n          search = search.replaceAll(\"+\", \"%2B\");\n        }\n      }\n\n      arg.search = search;\n      this.loading = true;\n      resource.getGoodsList(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this17.loading = false;\n          var data = res.data.data;\n          _this17.button_list = data.button_list;\n          _this17.total = data.total;\n          _this17.data = data.data;\n        } else {\n          _this17.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //切换页码\n    checkPage: function checkPage(v) {\n      this.page = v; //获取列表\n\n      this.getGoodsList();\n    },\n    //切换多选\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multiple_selection = val;\n    },\n    //批量操作\n    allSetting: function allSetting(type) {\n      var _this18 = this;\n\n      var title = \"\"; //提示标题\n\n      var total_num = this.multiple_selection.length; //选中的总数\n\n      var unset_num = 0; //不能操作的数量\n\n      var style_id = [];\n\n      if (total_num == 0) {\n        this.$message.warning('至少选择一条！');\n        return;\n      }\n\n      if (type == '0') {\n        //下架\n        title = '确认下架？';\n        var unset_list = this.multiple_selection.filter(function (item) {\n          return item.check_status == 2 || item.check_status == 6;\n        });\n        unset_list.map(function (item) {\n          style_id.push(item.style_id);\n        });\n        unset_num = total_num - unset_list.length;\n      } else if (type == '1') {\n        //上架\n        title = '确认上架？';\n\n        var _unset_list = this.multiple_selection.filter(function (item) {\n          return item.check_status == 5;\n        });\n\n        _unset_list.map(function (item) {\n          style_id.push(item.style_id);\n        });\n\n        unset_num = total_num - _unset_list.length;\n      } else if (type == '3') {\n        //删除\n        title = '确认批量删除？';\n\n        var _unset_list2 = this.multiple_selection.filter(function (item) {\n          return item.check_status == 3 || item.check_status == 5;\n        });\n\n        _unset_list2.map(function (item) {\n          style_id.push(item.style_id);\n        });\n\n        unset_num = total_num - _unset_list2.length;\n      }\n\n      if (total_num == unset_num) {\n        this.$message.warning('没有符合操作条件的记录！');\n        return;\n      }\n\n      this.$confirm(\"\\u60A8\\u9009\\u62E9\\u4E86\".concat(total_num, \"\\u9879\\uFF0C\\u5176\\u4E2D\\u4E0D\\u53EF\\u64CD\\u4F5C\").concat(unset_num, \"\\u9879\\uFF0C\").concat(title), '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        if (type == '0' || type == '1') {\n          //上架或下架\n          var arg = {\n            style_id: style_id.join(','),\n            type: type\n          };\n          resource.checkStatus(arg).then(function (res) {\n            if (res.data.code == 1) {\n              _this18.$message.success(res.data.msg); //获取列表\n\n\n              _this18.getGoodsList();\n            } else {\n              _this18.$message.warning(res.data.msg);\n            }\n          });\n        } else if (type == '3') {\n          //删除\n          var _arg = {\n            style_id: style_id.join(',')\n          };\n          resource.delGoods(_arg).then(function (res) {\n            if (res.data.code == 1) {\n              _this18.$message.success(res.data.msg); //获取列表\n\n\n              _this18.getGoodsList();\n            } else {\n              _this18.$message.warning(res.data.msg);\n            }\n          });\n        }\n      }).catch(function () {\n        _this18.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    },\n    //点击查看\n    getGoodsInfo: function getGoodsInfo(type, style_id) {\n      var _this19 = this;\n\n      this.dialog_type = type;\n      resource.editProductStyleGet({\n        style_id: style_id\n      }).then(function (res) {\n        var data = res.data.data;\n\n        for (var k in _this19.ae_arg) {\n          _this19.ae_arg[k] = data[k];\n        }\n\n        _this19.size_color_data = data.sku.list; //商品规格\n\n        _this19.getSizeColorList();\n\n        _this19.goods_img_list = data.img; //商品图\n\n        var style_imgs = data.style_imgs; //风格图\n\n        style_imgs.map(function (item) {\n          item['image_arr'] = item.img;\n          delete item.img;\n        });\n        _this19.style_card_list = style_imgs;\n        _this19.detail_img_list = data.detail_imgs; //详情图\n\n        _this19.ae_dialog = true;\n      });\n    },\n    //切换上架或下架\n    checkStatus: function checkStatus(style_id, type) {\n      var _this20 = this;\n\n      this.$confirm(\"\\u786E\\u8BA4\".concat(type == 5 ? '上架' : '下架', \"?\"), '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var arg = {\n          style_id: style_id,\n          type: type == 5 ? 1 : 0\n        };\n        resource.checkStatus(arg).then(function (res) {\n          if (res.data.code == 1) {\n            _this20.$message.success(res.data.msg); //获取列表\n\n\n            _this20.getGoodsList();\n          } else {\n            _this20.$message.warning(res.data.msg);\n          }\n        });\n      }).catch(function () {\n        _this20.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    },\n    //单个删除款式资料\n    deleteGoods: function deleteGoods(style_id) {\n      var _this21 = this;\n\n      this.$confirm(\"\\u786E\\u8BA4\\u5220\\u9664?\", '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var arg = {\n          style_id: style_id\n        };\n        resource.delGoods(arg).then(function (res) {\n          if (res.data.code == 1) {\n            _this21.$message.success(res.data.msg); //获取列表\n\n\n            _this21.getGoodsList();\n          } else {\n            _this21.$message.warning(res.data.msg);\n          }\n        });\n      }).catch(function () {\n        _this21.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    },\n    windowOpen: function windowOpen(url, old_url) {\n      if (!old_url || old_url.indexOf('https://pan.baidu.com') == -1) {\n        this.$message.warning('该地址不是网盘地址格式!');\n      } else {\n        window.open(url);\n      }\n    }\n  },\n  filters: {\n    //类目过滤\n    categoryFilter: function categoryFilter(v, cate_list) {\n      var arr = cate_list.filter(function (item) {\n        return item.category_id == v;\n      });\n      return arr.length > 0 ? arr[0].category_name : '';\n    },\n    //分类过滤\n    classFilter: function classFilter(v, class_list) {\n      var arr = class_list.filter(function (item) {\n        return item.classification_id == v;\n      });\n      return arr.length > 0 ? arr[0].classification_name : '';\n    },\n    //供应商过滤\n    supplierFilter: function supplierFilter(v, supplier_list) {\n      var arr = supplier_list.filter(function (item) {\n        return item.supplier_id == v;\n      });\n      return arr.length > 0 ? arr[0].supplier_name : '';\n    }\n  },\n  components: {\n    TableTitle: TableTitle,\n    PaginationWidget: PaginationWidget,\n    UploadFile: UploadFile\n  }\n};",{"version":3,"mappings":";;;;;AAqeA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;EACAA,IADA,kBACA;IACA;MACAC,YADA;MAEAC,cAFA;MAGAC,iBAHA;MAGA;MACAC,gBAJA;MAIA;MACAC,aALA;MAKA;MACAC,gBANA;MAMA;MACAC,eAPA;MAOA;MACAC,cARA;MAQA;MACAC,cATA;MASA;MACAC,sBAVA;MAUA;MACAC,cAXA;MAWA;MACAC,sBAZA;MAYA;MACAC,QAbA;MAaA;MACAC;QACAC,YACA;UACAC,YADA;UAEAC,OAFA,mBAEAC,MAFA,EAEA;YACA;YACA;YACAA;UACA;QANA,CADA,EASA;UACAF,YADA;UAEAC,OAFA,mBAEAC,MAFA,EAEA;YACA;YACA;YACAA;UACA;QANA,CATA,EAiBA;UACAF,YADA;UAEAC,OAFA,mBAEAC,MAFA,EAEA;YACA;YACA;YACAA;UACA;QANA,CAjBA;MADA,CAdA;MA0CAC,UA1CA;MA0CA;MACAC,aA3CA;MA4CAC,OA5CA;MA6CArB,QA7CA;MA6CA;MACAsB,QA9CA;MA+CAC,eA/CA;MAgDAC,oBAhDA;MAgDA;MACAC,sBAjDA;MAiDA;MACAC,wBAlDA;MAmDAC,YAnDA;MAmDA;MACAC,eApDA;MAoDA;MACAC,gBArDA;MAqDA;MACAC;QACAC,cADA;QAEAC,SAFA;QAGAC,eAHA;QAIAC,qBAJA;QAKAC,UALA;QAMAC,eANA;QAOAC,UAPA;QAQAC,QARA;QASAC,iBATA;QAUAC,aAVA;QAWAC,oBAXA;QAYAC,gBAZA;QAaAC,sBAbA;QAcAC;MAdA,CAtDA;MAqEA;MACAC,aAtEA;MAsEA;MACAC,mBAvEA;MAuEA;MACAC,cAxEA;MAwEA;MACAC,cAzEA;MAyEA;MACAC,oBA1EA;MA0EA;MACAC,eA3EA;MA2EA;MACAC,mBA5EA;MA4EA;MACAC,kBA7EA;MA6EA;MACAC,mBA9EA;MA8EA;MACAC,mBA/EA;MA+EA;MACAC,kBAhFA;MAgFA;MACAC,oBAjFA;MAiFA;MACAC,qBAlFA;MAkFA;MACAC,uBAnFA,CAmFA;;IAnFA;EAqFA,CAvFA;EAwFAC,OAxFA,qBAwFA;IACA;IACA,wBAFA,CAGA;;IACA,oBAJA,CAKA;;IACA,sBANA,CAOA;;IACA,qBARA,CASA;;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,cAlBA,CAmBA;;IACA;EACA,CA7GA;EA8GAC,OA9GA,qBA8GA;IACA;IACA;IACAC;EACA,CAlHA;EAmHAC;IACA;IACAC,MAFA,oBAEA;MACA;IACA;EAJA,CAnHA;EAyHAC;IACA7C;MACA;MACA;IACA,CAJA;IAKAlB;MACA;MACA;IACA;EARA,CAzHA;EAmIAgE;IACA;IACAC,QAFA,sBAEA;MAAA;;MACA;QACA;QACA;QACA;QACA,mBACAC,kBACAC,kBADA,GAEAC,iBAFA,GAGA,EAHA,GAIA,IALA;MAMA,CAVA;IAWA,CAdA;IAeA;IACAC,gBAhBA,8BAgBA;MAAA;;MACAC;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAxBA;IAyBA;IACAC,YA1BA,0BA0BA;MAAA;;MACAD;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAlCA;IAmCA;IACAE,cApCA,4BAoCA;MAAA;;MACAF;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CA5CA;IA6CA;IACAG,aA9CA,2BA8CA;MAAA;;MACAH;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;IAQA,CAvDA;IAwDA;IACAI,aAzDA,2BAyDA;MAAA;;MACAJ;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAjEA;IAkEA;IACAK,QAnEA,oBAmEAC,IAnEA,EAmEAlD,QAnEA,EAmEA;MAAA;;MACA;MACA;;MACA;QAAA;QACA;QACA;MACA;;MACAmD;QAAAnD;MAAA;QACA;;QACA;UACA;QACA;;QACA,uCALA,CAKA;;QACA;;QACA,iCAPA,CAOA;;QACA,iCARA,CAQA;;QACAoD;UACAC;UACA;QACA,CAHA;QAIA;QACA,0CAdA,CAcA;;QACA;MACA,CAhBA;IAiBA,CA3FA;IA4FA;IACAC,SA7FA,qBA6FAC,GA7FA,EA6FA;MACA,sDADA,CAEA;;MACA;IACA,CAjGA;IAkGA;IACAC,OAnGA,qBAmGA;MAAA;;MACA;MACA;QACA;MACA,CAFA;IAGA,CAxGA;IAyGA;IACAC,gBA1GA,8BA0GA;MACA;;MACA;QACA;MACA;;MACA;MACA,qBANA,CAOA;;MACA;IACA,CAnHA;IAoHA;IACAC,UArHA,sBAqHAH,GArHA,EAqHA;MACA,wDADA,CAEA;;MACA;IACA,CAzHA;IA0HA;IACAI,QA3HA,sBA2HA;MAAA;;MACA;MACA;QACA;MACA,CAFA;IAGA,CAhIA;IAiIA;IACAC,iBAlIA,+BAkIA;MACA;;MACA;QACA;MACA;;MACA;MACA,sBANA,CAOA;;MACA;IACA,CA3IA;IA4IA;IACAC,iBA7IA,+BA6IA;MAAA;;MACA;MACA;QACA;UACA;YACAC,UADA;YAEAC,YAFA;YAGAC;UAHA;;UAKA;QACA,CAPA;MAQA,CATA;IAUA,CAzJA;IA0JA;IACAC,SA3JA,qBA2JAC,KA3JA,EA2JA;MACA,sCADA,CAEA;;MACA;IACA,CA/JA;IAgKA;IACAC,gBAjKA,8BAiKA;MACA;MACA;MACA;QACAjD;QACAG;MACA,CAHA;MAIA;MACA;IACA,CA1KA;IA2KA;IACA+C,kBA5KA,8BA4KAC,OA5KA,EA4KA;MACA;IACA,CA9KA;IA+KA;IACAC,mBAhLA,+BAgLAD,OAhLA,EAgLA;MACA;IACA,CAlLA;IAmLA;IACAE,WApLA,uBAoLAC,GApLA,EAoLA;MACA;IACA,CAtLA;IAuLA;IACAC,UAxLA,wBAwLA;MAAA;;MACA;QACApB;;QACA;MACA,CAHA;MAIA;MACA;IACA,CA/LA;IAgMA;IACAqB,cAjMA,0BAiMAR,KAjMA,EAiMA;MAAA;;MACA;;MACA;QACA;MACA;;MACA;MACA;MACA;MACA;QACA;MACA,CAFA;IAGA,CA5MA;IA6MA;IACAS,aA9MA,yBA8MAT,KA9MA,EA8MA;MAAA;;MACA;MACA;MACA;QACA;MACA,CAFA;IAGA,CApNA;IAqNA;IACAU,yBAtNA,qCAsNAP,OAtNA,EAsNA;MACA;MACAQ;MACA;IACA,CA1NA;IA2NA;IACAC,WA5NA,uBA4NAC,IA5NA,EA4NAC,IA5NA,EA4NA;MACA;QAAA;UAAA;QAAA;MAAA;IACA,CA9NA;IA+NA;IACAC,QAhOA,sBAgOA;MAAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;QACA;UACA;QACA,CAFA;;QAGA;UACA;UACA;QACA;;QAEA;QACA;UACAC;QACA,CAFA,EAXA,CAcA;;QACA;QACA;UACAC;QACA,CAFA,EAhBA,CAmBA;;QACA;QACAC;QACAA;QACAA;QACAA;;QACA;UAAA;UACAjC;YACA;cACA;;cACA,0BAFA,CAGA;;cACA;YACA,CALA,MAKA;cACA;YACA;UACA,CATA;QAUA,CAXA,MAWA;UAAA;UACAiC;UACAjC;YACA;cACA;;cACA,0BAFA,CAGA;;cACA;YACA,CALA,MAKA;cACA;YACA;UACA,CATA;QAUA;MAGA;IACA,CA7RA;IA8RA;IACAkC,YA/RA,0BA+RA;MACAnD;IACA,CAjSA;IAkSA;IACAoD,SAnSA,uBAmSA;MAAA;;MACA;QACA;QACA;QACAnC;UAAAoC;QAAA;UACA;UACA;UACA;;UACA;YACA;;YACA,iBAFA,CAGA;;YACA;UACA,CALA,MAKA;YACA;UACA;QACA,CAZA;MAcA;IACA,CAtTA;IAuTA;IACAC,QAxTA,sBAwTA;MAAA;;MACAC;QACAC,uBADA;QAEAC,sBAFA;QAGAzC;MAHA,GAKA0C,IALA,CAKA;QACA;UACAnF,2CADA;UAEAH,2CAFA;UAGAuF,uCAHA;UAIAtF,uDAJA;UAKAuF,iDALA;UAMAC,0EANA;UAOAC;QAPA;QASA;;QACA;UACA;YACAxG;UACA;;UACA;YACAA;UACA;;UACA;YACAA;UACA;QACA;;QAEA4F;QAEA;;QACA;UACA;YACAa;UACA;QACA;;QAEA;QACA/D;MACA,CAvCA,EAwCAgE,KAxCA,CAwCA;QACAC;UACAjD,YADA;UAEAkD;QAFA;MAIA,CA7CA;IA8CA,CAvWA;IAwWA;IACAC,YAzWA,0BAyWA;MAAA;;MACA;QACA5F,wCADA;QAEAH,wCAFA;QAGAuF,oCAHA;QAIAtF,oDAJA;QAKAuF,8CALA;QAMAC,iEANA;QAOAC,+DAPA;QAQAtG,eARA;QASA4G;MATA;MAWA;;MACA;QACA;UACA9G;QACA;;QACA;UACAA;QACA;;QACA;UACAA;QACA;MACA;;MACA4F;MAEA;MACAjC;QACA;UACA;UACA;UACA;UACA;UACA;QACA,CANA,MAMA;UACA;QACA;MACA,CAVA;IAWA,CA/YA;IAgZA;IACAoD,SAjZA,qBAiZAC,CAjZA,EAiZA;MACA,cADA,CAEA;;MACA;IACA,CArZA;IAsZA;IACAC,qBAvZA,iCAuZAjC,GAvZA,EAuZA;MACA;IACA,CAzZA;IA0ZA;IACAkC,UA3ZA,sBA2ZAxD,IA3ZA,EA2ZA;MAAA;;MACA,eADA,CACA;;MACA,+CAFA,CAEA;;MACA,kBAHA,CAGA;;MACA;;MACA;QACA;QACA;MACA;;MAEA;QAAA;QACA7C;QACA;UACA;QACA,CAFA;QAGAsG;UACA3G;QACA,CAFA;QAGA4G;MACA,CATA,MASA;QAAA;QACAvG;;QACA;UACA;QACA,CAFA;;QAGAsG;UACA3G;QACA,CAFA;;QAGA4G;MACA,CATA,MASA;QAAA;QACAvG;;QACA;UACA;QACA,CAFA;;QAGAsG;UACA3G;QACA,CAFA;;QAGA4G;MACA;;MACA;QACA;QACA;MACA;;MACA;QACAlB,uBADA;QAEAC,sBAFA;QAGAzC;MAHA,GAIA0C,IAJA,CAIA;QACA;UAAA;UACA;YACA5F,4BADA;YAEAkD;UAFA;UAIAC;YACA;cACA,uCADA,CAEA;;;cACA;YACA,CAJA,MAIA;cACA;YACA;UACA,CARA;QASA,CAdA,MAcA;UAAA;UACA;YACAnD;UADA;UAGAmD;YACA;cACA,uCADA,CAEA;;;cACA;YACA,CAJA,MAIA;cACA;YACA;UACA,CARA;QASA;MACA,CAjCA,EAiCA+C,KAjCA,CAiCA;QACA;UACAhD,YADA;UAEAkD;QAFA;MAIA,CAtCA;IAuCA,CA5eA;IA6eA;IACAS,YA9eA,wBA8eA3D,IA9eA,EA8eAlD,QA9eA,EA8eA;MAAA;;MACA;MACAmD;QAAAnD;MAAA;QACA;;QACA;UACA;QACA;;QACA,wCALA,CAKA;;QACA;;QACA,kCAPA,CAOA;;QACA,iCARA,CAQA;;QACAoD;UACAC;UACA;QACA,CAHA;QAIA;QACA,2CAdA,CAcA;;QACA;MACA,CAhBA;IAiBA,CAjgBA;IAkgBA;IACAyD,WAngBA,uBAmgBA9G,QAngBA,EAmgBAkD,IAngBA,EAmgBA;MAAA;;MACA;QACAwC,uBADA;QAEAC,sBAFA;QAGAzC;MAHA,GAIA0C,IAJA,CAIA;QACA;UACA5F,kBADA;UAEAkD;QAFA;QAIAC;UACA;YACA,uCADA,CAEA;;;YACA;UACA,CAJA,MAIA;YACA;UACA;QACA,CARA;MASA,CAlBA,EAkBA+C,KAlBA,CAkBA;QACA;UACAhD,YADA;UAEAkD;QAFA;MAIA,CAvBA;IAwBA,CA5hBA;IA6hBA;IACAW,WA9hBA,uBA8hBA/G,QA9hBA,EA8hBA;MAAA;;MACA;QACA0F,uBADA;QAEAC,sBAFA;QAGAzC;MAHA,GAIA0C,IAJA,CAIA;QACA;UACA5F;QADA;QAGAmD;UACA;YACA,uCADA,CAEA;;;YACA;UACA,CAJA,MAIA;YACA;UACA;QACA,CARA;MASA,CAjBA,EAiBA+C,KAjBA,CAiBA;QACA;UACAhD,YADA;UAEAkD;QAFA;MAIA,CAtBA;IAuBA,CAtjBA;IAujBAY,UAvjBA,sBAujBAC,GAvjBA,EAujBAC,OAvjBA,EAujBA;MACA;QACA;MACA,CAFA,MAEA;QACAhF;MACA;IACA;EA7jBA,CAnIA;EAksBAiF;IACA;IACAC;MACA;QACA;MACA,CAFA;MAGA;IACA,CAPA;IAQA;IACAC;MACA;QACA;MACA,CAFA;MAGA;IACA,CAdA;IAeA;IACAC;MACA;QACA;MACA,CAFA;MAGA;IACA;EArBA,CAlsBA;EAytBAC;IACAC,sBADA;IAEAC,kCAFA;IAGAC;EAHA;AAztBA","names":["data","is_up","loading","supplier_list","supplier_ids","cate_list","category_ids","market_list","market_ids","style_list","shooting_style_ids","class_list","classification_ids","date","pickerOptions","shortcuts","text","onClick","picker","search","max_height","page","total","button_list","import_dialog","multiple_selection","fullscreenLoading","style_id","dialog_type","ae_dialog","ae_arg","style_name","title","category_id","classification_id","fabric","supplier_id","remark","msrp","price_control","tag_price","settlement_price","supply_price","distribution_price","net_disk_address","size_list","size_visible","size_value","color_list","color_visible","color_value","size_color_data","goods_img_list","detail_img_list","style_card_list","selected_style","style_table_data","active_style_index","show_style_upload","created","mounted","window","computed","domain","watch","methods","onResize","card_box_height","table_title_height","bottom_row_height","ajaxSupplierList","commonResource","ajaxCateList","ajaxMarketList","ajaxStyleList","ajaxClassList","openForm","type","resource","style_imgs","item","sizeClose","tag","addSize","sizeInputConfirm","colorClose","addColor","colorInputConfirm","setSizeColorTable","size","color","sku_code","deleteRow","index","getSizeColorList","goodsImgCallBackFn","img_arr","detailImgCallBackFn","styleChange","val","setStyleFn","deleteStyleTab","checkStyleTab","currentStyleImgCallBackFn","new_item","filterStyle","arr1","arr2","saveAeFn","sku_list_arr","style_card_arg","arg","downTemplate","uploadCsv","file","exportFn","MessageBox","confirmButtonText","cancelButtonText","then","market_id","shooting_id","start_time","end_time","arr","catch","Message","message","getGoodsList","pagesize","checkPage","v","handleSelectionChange","allSetting","unset_list","unset_num","getGoodsInfo","checkStatus","deleteGoods","windowOpen","url","old_url","filters","categoryFilter","classFilter","supplierFilter","components","TableTitle","PaginationWidget","UploadFile"],"sourceRoot":"src/pages/SupplyChain/pages/StyleInfoPages","sources":["style_info.vue"],"sourcesContent":["<template>\n\t<div class=\"flex fc height-100\" v-loading.fullscreen.lock=\"fullscreenLoading\">\n\t\t<el-card class=\"form_card\">\n\t\t\t<div class=\"up_down_row\" :class=\"{'between':!is_up}\">\n\t\t\t\t<div class=\"search_title\" v-if=\"!is_up\">查询条件</div>\n\t\t\t\t<div class=\"selected_right\" @click=\"is_up = !is_up\">\n\t\t\t\t\t<div>{{is_up?'收起':'展开'}}</div>\n\t\t\t\t\t<img class=\"down_arrow\" :class=\"{'rotate':is_up == true}\" src=\"../../../../static/down_arrow.png\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<el-form style=\"margin-top: 10px;\" :inline=\"true\" size=\"mini\" v-show=\"is_up\">\n\t\t\t\t<el-form-item label=\"供应商：\">\n\t\t\t\t\t<el-select v-model=\"supplier_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in supplier_list\" :key=\"item.supplier_id\" :label=\"item.supplier_name\" :value=\"item.supplier_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"类目：\">\n\t\t\t\t\t<el-select v-model=\"category_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in cate_list\" :key=\"item.category_id\" :label=\"item.category_name\" :value=\"item.category_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"拍摄风格：\">\n\t\t\t\t\t<el-select v-model=\"shooting_style_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in style_list\" :key=\"item.shooting_style_id\" :label=\"item.shooting_style_name\" :value=\"item.shooting_style_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"市场：\">\n\t\t\t\t\t<el-select v-model=\"market_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in market_list\" :key=\"item.market_id\" :label=\"item.market_name\" :value=\"item.market_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"分类：\">\n\t\t\t\t\t<el-select v-model=\"classification_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in class_list\" :key=\"item.classification_id\" :label=\"item.classification_name\" :value=\"item.classification_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"上新日期：\">\n\t\t\t\t\t<el-date-picker v-model=\"date\" size=\"mini\" type=\"daterange\" unlink-panels value-format=\"yyyy-MM-dd\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :picker-options=\"pickerOptions\">\n\t\t\t\t\t</el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-input type=\"textarea\" :autosize=\"{ minRows: 1, maxRows: 4}\" placeholder=\"款号/款式编码\" v-model=\"search\">\n\t\t\t\t\t</el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item class=\"form_item\">\n\t\t\t\t\t<el-button type=\"primary\" @click=\"checkPage(1)\">查询</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</el-card>\n\t\t<el-card class=\"card_box\" id=\"card_box\">\n\t\t\t<TableTitle title=\"数据列表\" id=\"table_title\">\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('1')\" v-if=\"button_list.in_out == 1\">批量上架</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('0')\" v-if=\"button_list.in_out == 1\">批量下架</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('3')\" v-if=\"button_list.del == 1\">批量删除</el-button>\n\t\t\t\t<!-- <el-button size=\"mini\" type=\"primary\" @click=\"import_dialog = true\" v-if=\"button_list.add == 1\">导入</el-button> -->\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"exportFn\">导出</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"openForm('1')\">添加</el-button>\n\t\t\t</TableTitle>\n\t\t\t<el-table size=\"mini\" :data=\"data\" tooltip-effect=\"dark\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" :max-height=\"max_height\" @selection-change=\"handleSelectionChange\" v-loading=\"loading\">\n\t\t\t\t<el-table-column type=\"selection\" width=\"55\" fixed>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"标题\" prop=\"title\"></el-table-column>\n\t\t\t\t<el-table-column label=\"款号\" prop=\"style_name\"></el-table-column>\n\t\t\t\t<el-table-column label=\"图片\" width=\"150\" >\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div v-if=\"scope.row.img.length == 0\">暂无</div>\n\t\t\t\t\t\t<el-carousel trigger=\"hover\" indicator-position=\"none\" :autoplay=\"false\" height=\"100px\" v-if=\"scope.row.img.length > 0 && loading == false\">\n\t\t\t\t\t\t\t<el-carousel-item v-for=\"(item,index) in scope.row.img\" :key=\"index\">\n\t\t\t\t\t\t\t\t<el-image :z-index=\"2006\" class=\"image\" :src=\"item\" fit=\"scale-down\" :preview-src-list=\"scope.row.img\"></el-image>\n\t\t\t\t\t\t\t</el-carousel-item>\n\t\t\t\t\t\t</el-carousel>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"供应商\" prop=\"supplier\"></el-table-column>\n\t\t\t\t<el-table-column label=\"网盘地址\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button class=\"pre_wrap\" size=\"small\" type=\"text\" @click=\"windowOpen(scope.row.net_disk_address,scope.row.or_net_disk_address)\" v-if=\"scope.row.or_net_disk_address !== ''\">访问链接</el-button>\n\t\t\t\t\t\t<div v-else></div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"供货价\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div>¥{{scope.row.supply_price}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"分销价\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div>¥{{scope.row.distribution_price}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"控价\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div>¥{{scope.row.price_control}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"面料\" prop=\"fabric\"></el-table-column>\n\t\t\t\t<el-table-column label=\"类目\" prop=\"category\"></el-table-column>\n\t\t\t\t<el-table-column label=\"上新时间\" width=\"160\" prop=\"new_time_name\"></el-table-column>\n\t\t\t\t<el-table-column label=\"备注\" prop=\"remark\"></el-table-column>\n\t\t\t\t<el-table-column label=\"审核状态\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 1\">上架待审核</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 2\">已上架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 3\">拒绝上架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 4\">下架待审核</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 5\">已下架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 6\">拒绝下架</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"操作\" width=\"180\" fixed=\"right\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"(scope.row.check_status == 2 || scope.row.check_status == 5 || scope.row.check_status == 6) && button_list.in_out == 1\" @click=\"checkStatus(scope.row.style_id,scope.row.check_status)\">{{scope.row.check_status == 2 || scope.row.check_status == 6?'下架':'上架'}}</el-button>\n\t\t\t\t\t\t<el-button style=\"margin-right: 10px\" type=\"text\" size=\"small\"  v-if=\"button_list.info == 1\" @click=\"getGoodsInfo('3',scope.row.style_id)\">查看</el-button>\n\t\t\t\t\t\t<el-button style=\"margin-right: 10px\" type=\"text\" size=\"small\" v-if=\"scope.row.check_status != 3 && scope.row.check_status != 5 && button_list.edit == 1\" @click=\"openForm('2',scope.row.style_id)\">编辑</el-button>\n\t\t\t\t\t\t<el-button style=\"margin-right: 10px\" type=\"text\" size=\"small\" v-if=\"(scope.row.check_status == 3 || scope.row.check_status == 5) && button_list.del == 1\" @click=\"deleteGoods(scope.row.style_id)\">删除</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t\t<PaginationWidget id=\"bottom_row\" :total=\"total\" :page=\"page\" :pagesize=\"100\" @checkPage=\"checkPage\"/>\n\t\t</el-card>\n\t\t<!-- 导入 -->\n\t\t<el-dialog :visible.sync=\"import_dialog\" width=\"30%\">\n\t\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t\t<div>导入</div>\n\t\t\t\t<img class=\"close_icon\" src=\"../../../../static/close_icon.png\" @click=\"import_dialog = false\">\n\t\t\t</div>\n\t\t\t<div class=\"down_box\">\n\t\t\t\t<el-button type=\"primary\" plain size=\"small\" @click=\"downTemplate\">下载模版<i class=\"el-icon-download el-icon--right\"></i></el-button>\n\t\t\t\t<div class=\"upload_box\">\n\t\t\t\t\t<el-button type=\"primary\" size=\"small\">\n\t\t\t\t\t\t导入\n\t\t\t\t\t\t<i class=\"el-icon-upload el-icon--right\"></i>\n\t\t\t\t\t</el-button>\n\t\t\t\t\t<input type=\"file\" ref=\"csvUpload\" class=\"upload_file\" accept=\".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" @change=\"uploadCsv\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t\t<el-button size=\"small\" @click=\"import_dialog = false\">取消</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t\t<!-- 添加/编辑/详情 -->\n\t\t<el-dialog :visible.sync=\"ae_dialog\" :show-close=\"false\" top=\"30px\" width=\"65%\">\n\t\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t\t<div>{{dialog_type == '1'?'添加':dialog_type == '2'?'编辑':'详情'}}</div>\n\t\t\t\t<img class=\"close_icon\" src=\"../../../../static/close_icon.png\" @click=\"ae_dialog = false\">\n\t\t\t</div>\n\t\t\t<div class=\"ae_box\">\n\t\t\t\t<!-- 上面表单 -->\n\t\t\t\t<div class=\"flex jsb\">\n\t\t\t\t\t<el-form size=\"mini\" style=\"width: 50%;\">\n\t\t\t\t\t\t<el-form-item label=\"商品款号：\" :required=\"dialog_type != '3'\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.style_name}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"款号\" style=\"width: 172px;\" v-model=\"ae_arg.style_name\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"标题：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.title}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"标题\" style=\"width: 172px;\" v-model=\"ae_arg.title\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"类目：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.category_id | categoryFilter(cate_list)}}</div>\n\t\t\t\t\t\t\t<el-select v-model=\"ae_arg.category_id\" clearable filterable placeholder=\"全部\" v-else>\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in cate_list\" :key=\"item.category_id\" :label=\"item.category_name\" :value=\"item.category_id\">\n\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"分类：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.classification_id | classFilter(class_list)}}</div>\n\t\t\t\t\t\t\t<el-select v-model=\"ae_arg.classification_id\" clearable filterable placeholder=\"全部\" v-else>\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in class_list\" :key=\"item.classification_id\" :label=\"item.classification_name\" :value=\"item.classification_id\">\n\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"面料：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.fabric}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"面料\" style=\"width: 172px;\" v-model=\"ae_arg.fabric\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"供应商：\" :required=\"dialog_type != '3'\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.supplier_id | supplierFilter(supplier_list)}}</div>\n\t\t\t\t\t\t\t<el-select v-model=\"ae_arg.supplier_id\" clearable filterable placeholder=\"全部\" v-else>\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in supplier_list\" :key=\"item.supplier_id\" :label=\"item.supplier_name\" :value=\"item.supplier_id\">\n\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"备注：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.remark}}</div>\n\t\t\t\t\t\t\t<el-input type=\"textarea\" style=\"width: 172px;\" :autosize=\"{ minRows: 1, maxRows: 4}\" placeholder=\"备注\" v-model=\"ae_arg.remark\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t\t<el-form size=\"mini\" style=\"width: 50%;\">\n\t\t\t\t\t\t<el-form-item label=\"建议零售价：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">¥{{ae_arg.msrp}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"建议零售价\" type=\"number\" style=\"width: 172px;\" v-model=\"ae_arg.msrp\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"控价：\" :required=\"dialog_type != '3'\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">¥{{ae_arg.price_control}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"控价\" type=\"number\" style=\"width: 172px;\" v-model=\"ae_arg.price_control\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"默认结算价的1.8倍\" placement=\"right\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-question\" style=\"margin-left: 5px;\"></i>\n\t\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"吊牌价：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">¥{{ae_arg.tag_price}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"吊牌价\" type=\"number\" style=\"width: 172px;\" v-model=\"ae_arg.tag_price\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"结算价：\" :required=\"dialog_type != '3'\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">¥{{ae_arg.settlement_price}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"结算价\" type=\"number\" style=\"width: 172px;\" v-model=\"ae_arg.settlement_price\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"供应商实际结算的价格\" placement=\"right\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-question\" style=\"margin-left: 5px;\"></i>\n\t\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"供货价：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">¥{{ae_arg.supply_price}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"供货价\" type=\"number\" style=\"width: 172px;\" v-model=\"ae_arg.supply_price\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"批价 供应商的采购价默认聚水潭接口取的采购价\" placement=\"right\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-question\" style=\"margin-left: 5px;\"></i>\n\t\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"分销价：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">¥{{ae_arg.distribution_price}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"分销价\" type=\"number\" style=\"width: 172px;\" v-model=\"ae_arg.distribution_price\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" content=\"该款跟合作商家结算的价格\" placement=\"right\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-question\" style=\"margin-left: 5px;\"></i>\n\t\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"网盘地址：\">\n\t\t\t\t\t\t\t<div class=\"info_value\" v-if=\"dialog_type == '3'\">{{ae_arg.net_disk_address}}</div>\n\t\t\t\t\t\t\t<el-input placeholder=\"网盘地址\" style=\"width: 172px;\" v-model=\"ae_arg.net_disk_address\" v-else>\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t</div>\n\t\t\t\t<!-- 商品规格 -->\n\t\t\t\t<el-card class=\"goods_style_card\">\n\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t\t<div class=\"flex\">\n\t\t\t\t\t\t\t<!-- <div style=\"color:#F56C6C;margin-right:5px\">*</div> -->\n\t\t\t\t\t\t\t<div>商品规格</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-form size=\"mini\">\n\t\t\t\t\t\t<el-form-item label=\"尺码：\">\n\t\t\t\t\t\t\t<el-tag size=\"medium\" :key=\"tag\" v-for=\"tag in size_list\" :closable=\"dialog_type != '3'\" @close=\"sizeClose(tag)\">\n\t\t\t\t\t\t\t\t{{tag}}\n\t\t\t\t\t\t\t</el-tag>\n\t\t\t\t\t\t\t<el-input class=\"input-new-tag\" v-if=\"size_visible\" v-model=\"size_value\" ref=\"sizeTagInput\" size=\"mini\" @keyup.enter.native=\"sizeInputConfirm\" @blur=\"sizeInputConfirm\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t<el-button v-if=\"!size_visible && dialog_type != '3'\" class=\"button-new-tag\" size=\"mini\" @click=\"addSize\">+添加</el-button>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"颜色：\">\n\t\t\t\t\t\t\t<el-tag size=\"medium\" :key=\"tag\" v-for=\"tag in color_list\" :closable=\"dialog_type != '3'\" @close=\"colorClose(tag)\">\n\t\t\t\t\t\t\t\t{{tag}}\n\t\t\t\t\t\t\t</el-tag>\n\t\t\t\t\t\t\t<el-input class=\"input-new-tag\" v-if=\"color_visible\" v-model=\"color_value\" ref=\"colorTagInput\" size=\"mini\" @keyup.enter.native=\"colorInputConfirm\" @blur=\"colorInputConfirm\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t<el-button  v-if=\"!color_visible && dialog_type != '3'\" class=\"button-new-tag\" size=\"mini\" @click=\"addColor\">+添加</el-button>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t\t<el-table size=\"mini\" :data=\"size_color_data\" tooltip-effect=\"dark\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" :max-height=\"240\">\n\t\t\t\t\t\t<el-table-column label=\"颜色\" prop=\"color\" width=\"120\"></el-table-column>\n\t\t\t\t\t\t<el-table-column label=\"尺码\" prop=\"size\" width=\"120\"></el-table-column>\n\t\t\t\t\t\t<el-table-column label=\"SKU编码\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<div v-if=\"dialog_type == '3'\">{{scope.row.sku_code}}</div>\n\t\t\t\t\t\t\t\t<el-input size=\"small\" placeholder=\"SKU款式编码不能重复\" v-model=\"scope.row.sku_code\" v-else>\n\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t<el-table-column label=\"操作\" width=\"120\" v-if=\"dialog_type != '3'\">\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t<el-button type=\"text\" size=\"mini\" @click=\"deleteRow(scope.$index)\">删除</el-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t</el-table>\n\t\t\t\t</el-card>\n\t\t\t\t<!-- 商品图 -->\n\t\t\t\t<el-card class=\"goods_style_card\">\n\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t\t<span>商品图</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<UploadFile :only_view=\"dialog_type == '3'\" :is_multiple=\"true\" :max_num=\"6\" :current_num=\"goods_img_list.length\" :img_list=\"goods_img_list\" @callbackFn=\"goodsImgCallBackFn\"/>\n\t\t\t\t</el-card>\n\t\t\t\t<!-- 风格图 -->\n\t\t\t\t<el-card class=\"goods_style_card\">\n\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t\t<span>风格图</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"flex border_bottom\">\n\t\t\t\t\t\t\t<div class=\"relative style_item flex pointer\" :class=\"[{'active_item':active_style_index == index}]\" :key=\"item.shooting_style_id\" v-for=\"(item,index) in style_card_list\" @click=\"checkStyleTab(index)\">\n\t\t\t\t\t\t\t\t<img class=\"delete_style_icon\" src=\"../../../../static/delete_style_icon.png\" v-if=\"dialog_type != '3'\" @click.stop=\"deleteStyleTab(index)\">\n\t\t\t\t\t\t\t\t<div>{{item.shooting_style_name}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<el-popover ref=\"stylePopover\" placement=\"right-start\" width=\"400\" trigger=\"click\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 10px;\">选择风格</div>\n\t\t\t\t\t\t\t\t\t<el-table size=\"mini\" :data=\"style_table_data\" :max-height=\"240\" tooltip-effect=\"dark\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" @selection-change=\"styleChange\">\n\t\t\t\t\t\t\t\t\t\t<el-table-column type=\"selection\" width=\"55\" fixed>\n\t\t\t\t\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t\t\t\t\t<el-table-column label=\"风格\" prop=\"shooting_style_name\">\n\t\t\t\t\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t\t\t\t</el-table>\n\t\t\t\t\t\t\t\t\t<div class=\"dialog_footer\">\n\t\t\t\t\t\t\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"setStyleFn\">保存</el-button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"style_item flex ac pointer\" slot=\"reference\" v-if=\"dialog_type != '3'\">\n\t\t\t\t\t\t\t\t\t<img class=\"add_style_icon\" src=\"../../../../static/add_style_icon.png\" @click=\"import_dialog = false\">\n\t\t\t\t\t\t\t\t\t<div>新增</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</el-popover>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<UploadFile v-if=\"show_style_upload && style_card_list.length > 0\" :is_multiple=\"true\" :max_num=\"9\" :current_num=\"style_card_list.length > 0?style_card_list[active_style_index].image_arr.length:0\" :img_list=\"style_card_list.length > 0?style_card_list[active_style_index].image_arr:[]\" :only_view=\"dialog_type == '3'\" @callbackFn=\"currentStyleImgCallBackFn\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</el-card>\n\t\t\t\t\t<!-- 详情图 -->\n\t\t\t\t\t<el-card class=\"goods_style_card\">\n\t\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t\t\t<div class=\"flex jsb\">\n\t\t\t\t\t\t\t\t<div>详情图</div>\n\t\t\t\t\t\t\t\t<el-popover placement=\"left-start\" trigger=\"click\">\n\t\t\t\t\t\t\t\t\t<div class=\"view_box flex fc\">\n\t\t\t\t\t\t\t\t\t\t<el-image :src=\"item\" fit=\"contain\" v-for=\"item in detail_img_list\"></el-image>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<el-button slot=\"reference\" type=\"text\" :disabled=\"detail_img_list.length == 0\" size=\"mini\">预览</el-button>\n\t\t\t\t\t\t\t\t</el-popover>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<UploadFile :only_view=\"dialog_type == '3'\" :is_multiple=\"true\" :max_num=\"6\" :current_num=\"detail_img_list.length\" :img_list=\"detail_img_list\" @callbackFn=\"detailImgCallBackFn\"/>\n\t\t\t\t\t</el-card>\n\t\t\t\t</div>\n\t\t\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t\t\t<el-button size=\"small\" @click=\"ae_dialog = false\">{{dialog_type == '3'?'关闭':'取消'}}</el-button>\n\t\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"saveAeFn\" v-if=\"dialog_type != '3'\">{{dialog_type == '1'?'上架':'保存'}}</el-button>\n\t\t\t\t</div>\n\t\t\t</el-dialog>\n\t\t</div>\n\t</template>\n\t<style type=\"text/css\">\n\t\t.goods_style_card .el-card__header{\n\t\t\tpadding:10px 20px!important;\n\t\t}\n\t\t.goods_style_card .el-tag + .el-tag {\n\t\t\tmargin-left: 10px;\n\t\t}\n\t\t.goods_style_card .button-new-tag {\n\t\t\tmargin-left: 10px;\n\t\t}\n\t\t.goods_style_card .input-new-tag {\n\t\t\twidth: 90px;\n\t\t\tmargin-left: 10px;\n\t\t\tvertical-align: bottom;\n\t\t}\n\t</style>\n\t<style lang=\"less\" scoped>\n\t\t.form_card{\n\t\t\tmargin-bottom: 16rem;\n\t\t\t.up_down_row{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: flex-end;\n\t\t\t\talign-items: center;\n\t\t\t\t.search_title{\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t\t.selected_right{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t.down_arrow{\n\t\t\t\t\t\tmargin-left: 5rem;\n\t\t\t\t\t\ttransform: rotate(-90deg);\n\t\t\t\t\t\twidth: 14rem;\n\t\t\t\t\t\theight: 8rem;\n\t\t\t\t\t}\n\t\t\t\t\t.rotate{\n\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t.between{\n\t\t\t\tjustify-content:space-between;\n\t\t\t}\n\t\t\t.form_item{\n\t\t\t\tmargin-bottom:0 !important;\n\t\t\t}\n\t\t}\n\t\t.card_box{\n\t\t\tflex:1;\n\t\t\t.image{\n\t\t\t\theight: 100px;\n\t\t\t}\n\t\t\t.item_row{\n\t\t\t\tdisplay: flex;\n\t\t\t\t.item_label{\n\t\t\t\t\twidth: 56px;\n\t\t\t\t\ttext-align:end;\n\t\t\t\t}\n\t\t\t\t.item_value{\n\t\t\t\t\tflex: 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.down_box{\n\t\t\tdisplay:flex;\n\t\t\tpadding:30rem;\n\t\t\t.upload_box{\n\t\t\t\tmargin-left: 10px;\n\t\t\t\tposition: relative;\n\t\t\t\t.upload_file{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\topacity: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.ae_box{\n\t\t\tmax-height: 960rem;\n\t\t\tpadding:30rem;\n\t\t\toverflow-y: scroll;\n\t\t}\n\t\t.goods_style_card{\n\t\t\tmargin-bottom: 15rem;\n\t\t}\n\t\t.style_item{\n\t\t\tborder: 1px solid #DDDDDD;\n\t\t\tpadding: 10rem 20rem;\n\t\t\tfont-size: 14rem;\n\t\t\tcolor: #333333;\n\t\t\tposition:relative;\n\t\t\t.delete_style_icon{\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 14rem;\n\t\t\t\theight: 14rem;\n\t\t\t}\n\t\t\t.add_style_icon{\n\t\t\t\tmargin-right: 6rem;\n\t\t\t\twidth: 14rem;\n\t\t\t\theight: 14rem;\n\t\t\t}\n\t\t}\n\t\t.active_item{\n\t\t\tborder: 1px solid #FFC998;\n\t\t\tbackground: #FFFCFA;\n\t\t\tcolor: #E47A1A;\n\t\t}\n\t\t.border_bottom{\n\t\t\tborder-bottom:1px solid #DDDDDD;\n\t\t\tmargin-bottom: 20px;\n\t\t}\n\t\t.view_box{\n\t\t\theight: 360rem;\n\t\t\toverflow-y: scroll;\n\t\t}\n\t\t.info_value{\n\t\t\tdisplay: initial;\n\t\t\tfont-size: 13rem;\n\t\t\tcolor: #333333;\n\t\t}\n\t</style>\n\t<script>\n\t\timport commonResource from '../../../../api/common_resource.js'\n\t\timport resource from '../../../../api/chain_resource.js'\n\t\timport { getNowDate,getCurrentDate } from \"../../../../api/date.js\";\n\n\t\timport { exportPost } from \"../../../../api/export.js\";\n\n\t\timport { MessageBox, Message } from \"element-ui\";\n\n\t\timport TableTitle from '../../components/table_title.vue'\n\t\timport PaginationWidget from '../../../../components/pagination_widget.vue'\n\t\timport UploadFile from '../../../../components/upload_file.vue'\n\t\texport default{\n\t\t\tdata(){\n\t\t\t\treturn{\n\t\t\t\t\tis_up:false,\n\t\t\t\t\tloading:false,\n\t\t\t\tsupplier_list:[],\t\t//供应商列表\n\t\t\t\tsupplier_ids:[],\t\t//选中的供应商\n\t\t\t\tcate_list:[],\t\t\t//类目列表\n\t\t\t\tcategory_ids:[],\t\t//选中的类目\n\t\t\t\tmarket_list:[],\t\t\t//市场列表\n\t\t\t\tmarket_ids:[],\t\t\t//选中的市场\n\t\t\t\tstyle_list:[],\t\t\t//拍摄风格列表\n\t\t\t\tshooting_style_ids:[],\t//选中的拍摄风格\n\t\t\t\tclass_list:[],\t\t\t//分类列表\n\t\t\t\tclassification_ids:[],\t//选中的分类\n\t\t\t\tdate:[],\t\t\t\t//上新日期\n\t\t\t\tpickerOptions: {\n\t\t\t\t\tshortcuts: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"今日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getNowDate();\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"三日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getCurrentDate(3);\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"七日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getCurrentDate(7);\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}, \n\t\t\t\tsearch:\"\",\t\t\t\t//款式编码\n\t\t\t\tmax_height:0,\t\n\t\t\t\tpage:1,\n\t\t\t\tdata:[],\t\t\t\t//获取的数据\n\t\t\t\ttotal:0,\n\t\t\t\tbutton_list:{},\n\t\t\t\timport_dialog:false,\t//导入或批量修改弹窗\n\t\t\t\tmultiple_selection:[],\t//主表已选中的列表\n\t\t\t\tfullscreenLoading:false,\n\t\t\t\tstyle_id:\"\",\t\t\t\t//点击的款式ID\n\t\t\t\tdialog_type:'',\t\t\t\t//1:添加；2:编辑\n\t\t\t\tae_dialog:false,\t\t\t//添加或编辑弹窗\n\t\t\t\tae_arg:{\n\t\t\t\t\tstyle_name:\"\",\n\t\t\t\t\ttitle:\"\",\n\t\t\t\t\tcategory_id:\"\",\n\t\t\t\t\tclassification_id:\"\",\n\t\t\t\t\tfabric:\"\",\n\t\t\t\t\tsupplier_id:\"\",\n\t\t\t\t\tremark:\"\",\n\t\t\t\t\tmsrp:\"\",\n\t\t\t\t\tprice_control:\"\",\n\t\t\t\t\ttag_price:\"\",\n\t\t\t\t\tsettlement_price:\"\",\n\t\t\t\t\tsupply_price:\"\",\n\t\t\t\t\tdistribution_price:\"\",\n\t\t\t\t\tnet_disk_address:\"\"\n\t\t\t\t},\t\t\t\t\t\t\t\t//添加或编辑的内容\n\t\t\t\tsize_list: [],\t\t\t\t\t//已添加的尺码列表\n\t\t\t\tsize_visible: false,\t\t\t//是否展示添加尺码输入框\n\t\t\t\tsize_value: '',\t\t\t\t\t//输入的添加尺码的内容\n\t\t\t\tcolor_list: [],\t\t\t\t\t//已添加的颜色列表\n\t\t\t\tcolor_visible: false,\t\t\t//是否展示添加颜色输入框\n\t\t\t\tcolor_value: '',\t\t\t\t//输入的添加颜色的内容\n\t\t\t\tsize_color_data:[],\t\t\t\t//尺码和颜色生成的表格数据\n\t\t\t\tgoods_img_list:[],\t\t\t\t//商品图列表\n\t\t\t\tdetail_img_list:[],\t\t\t\t//详情图列表\n\t\t\t\tstyle_card_list:[],\t\t\t\t//风格列表\n\t\t\t\tselected_style:[],\t\t\t\t//表格已选中的列表\n\t\t\t\tstyle_table_data:[],\t\t\t//未选择的风格列表\n\t\t\t\tactive_style_index:0,\t\t\t//风格列表选中的下标\n\t\t\t\tshow_style_upload:true,\t\t\t//是否显示风格图图片组件\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\t//获取供应商列表\n\t\t\tthis.ajaxSupplierList();\n    \t\t//获取类目列表\n\t\t\tthis.ajaxCateList();\n    \t\t//市场列表\n\t\t\tthis.ajaxMarketList();\n    \t\t//拍摄风格列表\n\t\t\tthis.ajaxStyleList();\n    \t\t//分类列表\n\t\t\tthis.ajaxClassList();\n\t\t\tthis.supplier_ids = [];\n\t\t\tthis.category_ids = [];\n\t\t\tthis.market_ids = [];\n\t\t\tthis.classification_ids = [];\n\t\t\tthis.shooting_style_ids = [];\n\t\t\tthis.date = [];\n\t\t\tthis.search = \"\";\n\t\t\tthis.page = 1;\n\t\t\t//获取列表\n\t\t\tthis.getGoodsList();\n\t\t},\n\t\tmounted() {\n    \t\t//获取表格最大高度\n\t\t\tthis.onResize();\n\t\t\twindow.addEventListener(\"resize\", this.onResize());\n\t\t},\n\t\tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tsearch:function(){\n\t\t\t\t//获取表格最大高度\n\t\t\t\tthis.onResize();\n\t\t\t},\n\t\t\tis_up:function(n,o){\n    \t\t\t//获取表格最大高度\n\t\t\t\tthis.onResize();\n\t\t\t}\n\t\t},\n\t\tmethods: {\n    \t\t//监听屏幕大小变化\n\t\t\tonResize() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n\t\t\t\t\tlet table_title_height = document.getElementById(\"table_title\").offsetHeight;\n\t\t\t\t\tlet bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n\t\t\t\t\tthis.max_height =\n\t\t\t\t\tcard_box_height -\n\t\t\t\t\ttable_title_height -\n\t\t\t\t\tbottom_row_height -\n\t\t\t\t\t60 +\n\t\t\t\t\t\"px\";\n\t\t\t\t});\n\t\t\t},\n    \t\t//获取供应商列表\n\t\t\tajaxSupplierList(){\n\t\t\t\tcommonResource.ajaxSupplierList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.supplier_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//获取类目列表\n\t\t\tajaxCateList(){\n\t\t\t\tcommonResource.ajaxCateList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.cate_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//市场列表\n\t\t\tajaxMarketList(){\n\t\t\t\tcommonResource.ajaxMarketList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.market_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//拍摄风格列表\n\t\t\tajaxStyleList(){\n\t\t\t\tcommonResource.ajaxStyleList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.style_list = res.data.data;\n\t\t\t\t\t\tthis.style_table_data = this.style_list;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//分类列表\n\t\t\tajaxClassList(){\n\t\t\t\tcommonResource.ajaxClassList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.class_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//点击添加或编辑\n\t\t\topenForm(type,style_id){\n\t\t\t\tthis.dialog_type = type;\n\t\t\t\tthis.style_id = style_id;\n\t\t\t\tif(this.dialog_type == '1'){\t//添加\n\t\t\t\t\tthis.ae_dialog = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tresource.editProductStyleGet({style_id:this.style_id}).then(res => {\n\t\t\t\t\tlet data = res.data.data;\n\t\t\t\t\tfor(let k in this.ae_arg){\n\t\t\t\t\t\tthis.ae_arg[k] = data[k];\n\t\t\t\t\t}\n\t\t\t\t\tthis.size_color_data = data.sku.list;\t\t//商品规格\n\t\t\t\t\tthis.getSizeColorList();\n\t\t\t\t\tthis.goods_img_list = data.img;\t\t\t\t//商品图\n\t\t\t\t\tlet style_imgs = data.style_imgs;\t\t\t//风格图\n\t\t\t\t\tstyle_imgs.map(item => {\n\t\t\t\t\t\titem['image_arr'] = item.img;\n\t\t\t\t\t\tdelete item.img;\n\t\t\t\t\t})\n\t\t\t\t\tthis.style_card_list = style_imgs;\n\t\t\t\t\tthis.detail_img_list = data.detail_imgs;\t//详情图\n\t\t\t\t\tthis.ae_dialog = true;\n\t\t\t\t})\n\t\t\t},\n\t\t\t//删除已添加的尺寸\n\t\t\tsizeClose(tag) {\n\t\t\t\tthis.size_list.splice(this.size_list.indexOf(tag), 1);\n\t\t\t\t//根据颜色和尺码生成表格\n\t\t\t\tthis.setSizeColorTable();\n\t\t\t},\n\t\t\t//点击添加尺寸\n\t\t\taddSize() {\n\t\t\t\tthis.size_visible = true;\n\t\t\t\tthis.$nextTick(_ => {\n\t\t\t\t\tthis.$refs.sizeTagInput.$refs.input.focus();\n\t\t\t\t});\n\t\t\t},\n\t\t\t//回车或失去焦点追加尺寸\n\t\t\tsizeInputConfirm() {\n\t\t\t\tlet size_value = this.size_value;\n\t\t\t\tif (size_value) {\n\t\t\t\t\tthis.size_list.push(size_value);\n\t\t\t\t}\n\t\t\t\tthis.size_visible = false;\n\t\t\t\tthis.size_value = '';\n\t\t\t\t//根据颜色和尺码生成表格\n\t\t\t\tthis.setSizeColorTable();\n\t\t\t},\n\t\t\t//删除已添加的颜色\n\t\t\tcolorClose(tag) {\n\t\t\t\tthis.color_list.splice(this.color_list.indexOf(tag), 1);\n\t\t\t\t//根据颜色和尺码生成表格\n\t\t\t\tthis.setSizeColorTable();\n\t\t\t},\n\t\t\t//点击添加颜色\n\t\t\taddColor() {\n\t\t\t\tthis.color_visible = true;\n\t\t\t\tthis.$nextTick(_ => {\n\t\t\t\t\tthis.$refs.colorTagInput.$refs.input.focus();\n\t\t\t\t});\n\t\t\t},\n\t\t\t//回车或失去焦点追加颜色\n\t\t\tcolorInputConfirm() {\n\t\t\t\tlet color_value = this.color_value;\n\t\t\t\tif (color_value) {\n\t\t\t\t\tthis.color_list.push(color_value);\n\t\t\t\t}\n\t\t\t\tthis.color_visible = false;\n\t\t\t\tthis.color_value = '';\n\t\t\t\t//根据颜色和尺码生成表格\n\t\t\t\tthis.setSizeColorTable();\n\t\t\t},\n\t\t\t//根据颜色和尺码生成表格\n\t\t\tsetSizeColorTable(){\n\t\t\t\tthis.size_color_data = [];\n\t\t\t\tthis.size_list.map(size => {\n\t\t\t\t\tthis.color_list.map(color => {\n\t\t\t\t\t\tlet table_row = {\n\t\t\t\t\t\t\tsize:size,\n\t\t\t\t\t\t\tcolor:color,\n\t\t\t\t\t\t\tsku_code:\"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.size_color_data.push(table_row);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//删除某行\n\t\t\tdeleteRow(index){\n\t\t\t\tthis.size_color_data.splice(index,1);\n\t\t\t\t//根据列表获取上面尺码和颜色列表\n\t\t\t\tthis.getSizeColorList();\n\t\t\t},\n\t\t\t//根据列表获取上面尺码和颜色列表\n\t\t\tgetSizeColorList(){\n\t\t\t\tlet size_list = [];\n\t\t\t\tlet color_list = [];\n\t\t\t\tthis.size_color_data.map(item => {\n\t\t\t\t\tsize_list.push(item.size);\n\t\t\t\t\tcolor_list.push(item.color);\n\t\t\t\t})\n\t\t\t\tthis.size_list = Array.from(new Set(size_list));\n\t\t\t\tthis.color_list = Array.from(new Set(color_list));\n\t\t\t},\n\t\t\t//监听商品图列表回调\n\t\t\tgoodsImgCallBackFn(img_arr) {\n\t\t\t\tthis.goods_img_list = img_arr;\n\t\t\t},\n\t\t\t//监听详情图列表回调\n\t\t\tdetailImgCallBackFn(img_arr){\n\t\t\t\tthis.detail_img_list = img_arr;\n\t\t\t},\n\t\t\t//切换商品风格添加表格切换多选\n\t\t\tstyleChange(val){\n\t\t\t\tthis.selected_style = val;\n\t\t\t},\n\t\t\t//确认商品风格添加表格切换多选\n\t\t\tsetStyleFn(){\n\t\t\t\tthis.selected_style.map(item => {\n\t\t\t\t\titem['image_arr'] = [];\n\t\t\t\t\tthis.style_card_list.push(item);\n\t\t\t\t})\n\t\t\t\tthis.style_table_data = this.filterStyle(this.style_table_data,this.style_card_list);\n\t\t\t\tthis.$refs.stylePopover.doClose();\n\t\t\t},\n\t\t\t//点击删除已选的风格\n\t\t\tdeleteStyleTab(index){\n\t\t\t\tthis.show_style_upload = false;\n\t\t\t\tif(this.active_style_index == index){\n\t\t\t\t\tthis.active_style_index = 0;\n\t\t\t\t}\n\t\t\t\tlet current_style = this.style_card_list[index];\n\t\t\t\tthis.style_table_data.unshift(current_style);\n\t\t\t\tthis.style_card_list.splice(index,1);\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\tthis.show_style_upload = true;\n\t\t\t\t})\n\t\t\t},\n\t\t\t//点击切换已选的风格\n\t\t\tcheckStyleTab(index){\n\t\t\t\tthis.show_style_upload = false;\n\t\t\t\tthis.active_style_index = index;\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\tthis.show_style_upload = true;\n\t\t\t\t})\n\t\t\t},\n\t\t\t//监听风格图列表回调\n\t\t\tcurrentStyleImgCallBackFn(img_arr){\n\t\t\t\tlet new_item = JSON.parse(JSON.stringify(this.style_card_list[this.active_style_index]));\n\t\t\t\tnew_item.image_arr = img_arr;\n\t\t\t\tthis.$set(this.style_card_list,this.active_style_index,new_item);\n\t\t\t},\n\t\t\t//对比已选中的过滤右侧未选中的风格  \n\t\t\tfilterStyle(arr1, arr2) {\n\t\t\t\treturn arr1.filter((v) => arr2.every((val) => val.shooting_style_id!= v.shooting_style_id));\n\t\t\t},\n\t\t\t//点击添加或编辑的保存\n\t\t\tsaveAeFn(){\n\t\t\t\tif(this.ae_arg.style_name == ''){\n\t\t\t\t\tthis.$message.warning('请输入商品款号！');\n\t\t\t\t}else if(this.ae_arg.supplier_id == ''){\n\t\t\t\t\tthis.$message.warning('请选择供应商！');\n\t\t\t\t}else if(this.ae_arg.price_control == ''){\n\t\t\t\t\tthis.$message.warning('请输入控价！');\n\t\t\t\t}else if(this.ae_arg.settlement_price == ''){\n\t\t\t\t\tthis.$message.warning('请输入结算价！');\n\t\t\t\t}else{\n\t\t\t\t\t//处理商品规格\n\t\t\t\t\tlet sku_null_arr = this.size_color_data.filter(item => {\n\t\t\t\t\t\treturn item.sku_code == '';\n\t\t\t\t\t})\n\t\t\t\t\tif(sku_null_arr.length > 0){\n\t\t\t\t\t\tthis.$message.warning('商品规格SKU编码不能存在空白项！');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet sku_list_arr = [];\n\t\t\t\t\tthis.size_color_data.map(item => {\n\t\t\t\t\t\tsku_list_arr.push(`color-${item.color}_size-${item.size}_skucode-${item.sku_code}`)\n\t\t\t\t\t})\n\t\t\t\t\t//处理风格图\n\t\t\t\t\tlet style_card_arg = [];\n\t\t\t\t\tthis.style_card_list.map(item => {\n\t\t\t\t\t\tstyle_card_arg.push(`${item.shooting_style_id}-${item.image_arr.join(',')}`);\n\t\t\t\t\t})\n\t\t\t\t\t//可传参数\n\t\t\t\t\tlet arg = JSON.parse(JSON.stringify(this.ae_arg));\n\t\t\t\t\targ['sku_list'] = sku_list_arr.join(',');\n\t\t\t\t\targ['img'] = this.goods_img_list.join(',');\n\t\t\t\t\targ['style_imgs'] = style_card_arg.join(';');\n\t\t\t\t\targ['detail_imgs'] = this.detail_img_list.join(',');\n\t\t\t\t\tif(this.dialog_type == '1'){\t//添加\n\t\t\t\t\t\tresource.addProductStyle(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\tthis.ae_dialog = false;\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\t\t\t\t\t\t\t//编辑\n\t\t\t\t\t\targ['style_id'] = this.style_id;\n\t\t\t\t\t\tresource.editProductStylePost(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\tthis.ae_dialog = false;\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t//下载模版\n\t\t\tdownTemplate(){\n\t\t\t\twindow.open(`${this.downLoadUrl}/file/商品批量导入模板.xlsx`);\n\t\t\t},\n\t\t\t//导入\n\t\t\tuploadCsv(){\n\t\t\t\tif (this.$refs.csvUpload.files.length > 0) {\n\t\t\t\t\tlet files = this.$refs.csvUpload.files;\n\t\t\t\t\tthis.fullscreenLoading = true;\n\t\t\t\t\tresource.addAllProductStyle({file:files[0]}).then(res => {\n\t\t\t\t\t\tthis.$refs.csvUpload.value = null;\n\t\t\t\t\t\tthis.import_dialog = false;\n\t\t\t\t\t\tthis.fullscreenLoading = false;\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\tthis.page = 1;\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t//导出\n\t\t\texportFn() {\n\t\t\t\tMessageBox.confirm(\"确认导出?\", \"提示\", {\n\t\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\t\tcancelButtonText: \"取消\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tsupplier_id:this.supplier_ids.join(','),\n\t\t\t\t\t\tcategory_id:this.category_ids.join(','),\n\t\t\t\t\t\tmarket_id:this.market_ids.join(','),\n\t\t\t\t\t\tclassification_id:this.classification_ids.join(','),\n\t\t\t\t\t\tshooting_id:this.shooting_style_ids.join(','),\n\t\t\t\t\t\tstart_time:this.date && this.date.length > 0?this.date[0]:\"\",\n\t\t\t\t\t\tend_time:this.date && this.date.length > 0?this.date[1]:\"\"\n\t\t\t\t\t}\n\t\t\t\t\tlet search = JSON.parse(JSON.stringify(this.search));\n\t\t\t\t\tif(search.indexOf(\"\\n\") > -1 || search.indexOf(\" \") > -1 || search.indexOf(\"+\") > -1){\n\t\t\t\t\t\tif (search.indexOf(\"\\n\") > -1) {\n\t\t\t\t\t\t\tsearch = search.replaceAll(\"\\n\", \",\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (search.indexOf(\" \") > -1) {\n\t\t\t\t\t\t\tsearch = search.replaceAll(\" \", \",\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (search.indexOf(\"+\") > -1) {\n\t\t\t\t\t\t\tsearch = search.replaceAll(\"+\", \"%2B\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\targ.search = search;\n\n\t\t\t\t\tvar arr = [];\n\t\t\t\t\tfor(let k in arg){\n\t\t\t\t\t\tif(arg[k]){\n\t\t\t\t\t\t\tarr.push(`${k}=${arg[k]}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet baseURL = `${location.origin}/api/productstyle/derivegetallproductstyle?${arr.join('&')}`\n\t\t\t\t\twindow.open(baseURL)\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tMessage({\n\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\tmessage: \"取消导出\",\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\t//获取列表\n\t\t\tgetGoodsList(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tsupplier_id:this.supplier_ids.join(','),\n\t\t\t\t\tcategory_id:this.category_ids.join(','),\n\t\t\t\t\tmarket_id:this.market_ids.join(','),\n\t\t\t\t\tclassification_id:this.classification_ids.join(','),\n\t\t\t\t\tshooting_id:this.shooting_style_ids.join(','),\n\t\t\t\t\tstart_time:this.date && this.date.length > 0?this.date[0]:\"\",\n\t\t\t\t\tend_time:this.date && this.date.length > 0?this.date[1]:\"\",\n\t\t\t\t\tpage:this.page,\n\t\t\t\t\tpagesize:100\n\t\t\t\t}\n\t\t\t\tlet search = JSON.parse(JSON.stringify(this.search));\n\t\t\t\tif(search.indexOf(\"\\n\") > -1 || search.indexOf(\" \") > -1 || search.indexOf(\"+\") > -1){\n\t\t\t\t\tif (search.indexOf(\"\\n\") > -1) {\n\t\t\t\t\t\tsearch = search.replaceAll(\"\\n\", \",\");\n\t\t\t\t\t}\n\t\t\t\t\tif (search.indexOf(\" \") > -1) {\n\t\t\t\t\t\tsearch = search.replaceAll(\" \", \",\");\n\t\t\t\t\t}\n\t\t\t\t\tif (search.indexOf(\"+\") > -1) {\n\t\t\t\t\t\tsearch = search.replaceAll(\"+\", \"%2B\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\targ.search = search;\n\n\t\t\t\tthis.loading = true;\n\t\t\t\tresource.getGoodsList(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tlet data = res.data.data;\n\t\t\t\t\t\tthis.button_list = data.button_list;\n\t\t\t\t\t\tthis.total = data.total;\n\t\t\t\t\t\tthis.data = data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//切换页码\n\t\t\tcheckPage(v){\n\t\t\t\tthis.page = v;\n\t\t\t\t//获取列表\n\t\t\t\tthis.getGoodsList();\n\t\t\t},\n\t\t\t//切换多选\n\t\t\thandleSelectionChange(val) {\n\t\t\t\tthis.multiple_selection = val;\n\t\t\t},\n\t\t\t//批量操作\n\t\t\tallSetting(type){\n\t\t\t\tlet title = \"\";\t\t\t//提示标题\n\t\t\t\tlet total_num = this.multiple_selection.length;\t//选中的总数\n\t\t\t\tlet unset_num = 0;\t//不能操作的数量\n\t\t\t\tlet style_id = [];\n\t\t\t\tif(total_num == 0){\n\t\t\t\t\tthis.$message.warning('至少选择一条！');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(type == '0'){\t//下架\n\t\t\t\t\ttitle = '确认下架？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 2 || item.check_status == 6;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}else if(type == '1'){\t//上架\n\t\t\t\t\ttitle = '确认上架？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 5;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}else if(type == '3'){\t//删除\n\t\t\t\t\ttitle = '确认批量删除？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 3 || item.check_status == 5;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}\n\t\t\t\tif(total_num == unset_num){\n\t\t\t\t\tthis.$message.warning('没有符合操作条件的记录！');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.$confirm(`您选择了${total_num}项，其中不可操作${unset_num}项，${title}`, '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tif(type == '0' || type == '1'){\t//上架或下架\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:style_id.join(','),\n\t\t\t\t\t\t\ttype:type\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.checkStatus(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else if(type == '3'){\t//删除\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:style_id.join(',')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.delGoods(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t\t//点击查看\n\t\t\tgetGoodsInfo(type,style_id){\n\t\t\t\tthis.dialog_type = type;\n\t\t\t\tresource.editProductStyleGet({style_id:style_id}).then(res => {\n\t\t\t\t\tlet data = res.data.data;\n\t\t\t\t\tfor(let k in this.ae_arg){\n\t\t\t\t\t\tthis.ae_arg[k] = data[k];\n\t\t\t\t\t}\n\t\t\t\t\tthis.size_color_data = data.sku.list;\t\t//商品规格\n\t\t\t\t\tthis.getSizeColorList();\n\t\t\t\t\tthis.goods_img_list = data.img;\t\t\t\t//商品图\n\t\t\t\t\tlet style_imgs = data.style_imgs;\t\t\t//风格图\n\t\t\t\t\tstyle_imgs.map(item => {\n\t\t\t\t\t\titem['image_arr'] = item.img;\n\t\t\t\t\t\tdelete item.img;\n\t\t\t\t\t})\n\t\t\t\t\tthis.style_card_list = style_imgs;\n\t\t\t\t\tthis.detail_img_list = data.detail_imgs;\t//详情图\n\t\t\t\t\tthis.ae_dialog = true;\n\t\t\t\t})\n\t\t\t},\n\t\t\t//切换上架或下架\n\t\t\tcheckStatus(style_id,type){\n\t\t\t\tthis.$confirm(`确认${type == 5?'上架':'下架'}?`, '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tstyle_id:style_id,\n\t\t\t\t\t\ttype:type == 5?1:0\n\t\t\t\t\t}\n\t\t\t\t\tresource.checkStatus(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t\t//单个删除款式资料\n\t\t\tdeleteGoods(style_id){\n\t\t\t\tthis.$confirm(`确认删除?`, '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tstyle_id:style_id\n\t\t\t\t\t}\n\t\t\t\t\tresource.delGoods(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t\twindowOpen(url,old_url){\n\t\t\t\tif(!old_url || old_url.indexOf('https://pan.baidu.com') == -1){\n\t\t\t\t\tthis.$message.warning('该地址不是网盘地址格式!')\n\t\t\t\t}else{\n\t\t\t\t\twindow.open(url)\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tfilters:{\n\t\t\t//类目过滤\n\t\t\tcategoryFilter:(v,cate_list) => {\n\t\t\t\tlet arr = cate_list.filter(item => {\n\t\t\t\t\treturn item.category_id == v;\n\t\t\t\t})\n\t\t\t\treturn arr.length > 0?arr[0].category_name:'';\n\t\t\t},\n\t\t\t//分类过滤\n\t\t\tclassFilter:(v,class_list) => {\n\t\t\t\tlet arr = class_list.filter(item => {\n\t\t\t\t\treturn item.classification_id == v;\n\t\t\t\t})\n\t\t\t\treturn arr.length > 0?arr[0].classification_name:'';\n\t\t\t},\n\t\t\t//供应商过滤\n\t\t\tsupplierFilter:(v,supplier_list) => {\n\t\t\t\tlet arr = supplier_list.filter(item => {\n\t\t\t\t\treturn item.supplier_id == v;\n\t\t\t\t})\n\t\t\t\treturn arr.length > 0?arr[0].supplier_name:'';\n\t\t\t},\n\t\t},\n\t\tcomponents:{\n\t\t\tTableTitle,\n\t\t\tPaginationWidget,\n\t\t\tUploadFile\n\t\t}\n\t}\n</script>\n\n\n\n\n\n\n"]}]}