{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/choose-product/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/App.vue","mtime":1665543051892},{"path":"/Users/fanyulong/project/2022/choose-product/babel.config.js","mtime":1662529345111},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport resource from \"./api/resource.js\";\nexport default {\n  created: function created() {\n    if (!localStorage.getItem(\"cache\")) {\n      //获取用户信息\n      this.getUserInfo();\n    } else {\n      this.$router.replace('/tab_menu');\n    }\n  },\n  watch: {\n    $route: function $route(n, o) {\n      if (n.path == '/notice_page' || n.path == '/goods_detail' || n.path == '/car_page' || n.path == '/supplier_detail') {\n        document.title = n.name;\n      }\n    }\n  },\n  methods: {\n    //获取用户信息\n    getUserInfo: function getUserInfo() {\n      var _this = this;\n\n      resource.getUserInfo().then(function (res) {\n        if (res.data.code == 1) {\n          localStorage.setItem(\"cache\", true);\n          var data = res.data.data;\n          localStorage.setItem(\"ding_user_id\", data.ding_user_id);\n          localStorage.setItem(\"ding_user_name\", data.ding_user_name);\n          localStorage.setItem(\"secret_key\", data.secret_key);\n          localStorage.setItem(\"login_token\", data.login_token);\n          var domain = data.img_domain;\n\n          _this.$store.commit('setDomain', domain);\n\n          localStorage.setItem(\"domain\", domain); //获取导航和公告\n\n          _this.getMenuNotice();\n        } else {\n          _this.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //获取导航和公告\n    getMenuNotice: function getMenuNotice() {\n      var _this2 = this;\n\n      resource.getMenuNotice().then(function (res) {\n        if (res.data.code == 1) {\n          var data = res.data.data;\n          var menu_list = data.menu_list;\n\n          _this2.$store.commit(\"setMenuList\", menu_list);\n\n          localStorage.setItem(\"menu_list\", JSON.stringify(menu_list));\n\n          _this2.$store.commit(\"setPath\", menu_list[0].web_url);\n\n          localStorage.setItem(\"active_path\", menu_list[0].web_url);\n\n          _this2.$store.commit(\"setIndex\", 0);\n\n          localStorage.setItem(\"active_index\", 0);\n\n          _this2.$store.commit(\"setNoticeList\", data.notice_list);\n\n          localStorage.setItem(\"notice_list\", JSON.stringify(data.notice_list));\n\n          _this2.$router.replace('tab_menu');\n        } else {\n          _this2.$message.warning(res.data.msg);\n        }\n      });\n    }\n  }\n};",{"version":3,"mappings":";;AAMA;AACA;EACAA,OADA,qBACA;IACA;MACA;MACA;IACA,CAHA,MAGA;MACA;IACA;EACA,CARA;EASAC;IACAC;MACA;QACAC;MACA;IACA;EALA,CATA;EAgBAC;IACA;IACAC,WAFA,yBAEA;MAAA;;MACAC;QACA;UACAC;UACA;UACAA;UACAA;UACAA;UACAA;UACA;;UACA;;UACAA,uCATA,CAUA;;UACA;QACA,CAZA,MAYA;UACA;QACA;MACA,CAhBA;IAiBA,CApBA;IAqBA;IACAC,aAtBA,2BAsBA;MAAA;;MACAF;QACA;UACA;UACA;;UAEA;;UACAC;;UAEA;;UACAA;;UACA;;UACAA;;UAEA;;UACAA;;UAEA;QACA,CAhBA,MAgBA;UACA;QACA;MACA,CApBA;IAqBA;EA5CA;AAhBA","names":["created","watch","$route","document","methods","getUserInfo","resource","localStorage","getMenuNotice"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n<script>\n  import resource from './api/resource.js'\n  export default {\n    created() {\n      if(!localStorage.getItem(\"cache\")){\n        //获取用户信息\n        this.getUserInfo();\n      }else{\n        this.$router.replace('/tab_menu');\n      }\n    },\n    watch:{\n      $route:function(n,o){\n        if(n.path == '/notice_page' || n.path == '/goods_detail' || n.path == '/car_page' || n.path == '/supplier_detail'){\n          document.title = n.name;\n        }\n      }\n    },\n    methods: {\n        //获取用户信息\n        getUserInfo() {\n          resource.getUserInfo().then((res) => {\n            if (res.data.code == 1) {\n              localStorage.setItem(\"cache\",true);\n              let data = res.data.data;\n              localStorage.setItem(\"ding_user_id\", data.ding_user_id);\n              localStorage.setItem(\"ding_user_name\", data.ding_user_name);\n              localStorage.setItem(\"secret_key\", data.secret_key);\n              localStorage.setItem(\"login_token\", data.login_token);\n              let domain = data.img_domain;\n              this.$store.commit('setDomain',domain);\n              localStorage.setItem(\"domain\",domain);\n              //获取导航和公告\n              this.getMenuNotice();\n            } else {\n              this.$message.warning(res.data.msg);\n            }\n          });\n        },\n        //获取导航和公告\n        getMenuNotice(){\n          resource.getMenuNotice().then(res => {\n            if(res.data.code == 1){\n              let data = res.data.data;\n              let menu_list = data.menu_list;\n              \n              this.$store.commit(\"setMenuList\", menu_list);\n              localStorage.setItem(\"menu_list\",JSON.stringify(menu_list))\n\n              this.$store.commit(\"setPath\", menu_list[0].web_url);\n              localStorage.setItem(\"active_path\",menu_list[0].web_url);\n              this.$store.commit(\"setIndex\", 0);\n              localStorage.setItem(\"active_index\",0);\n\n              this.$store.commit(\"setNoticeList\", data.notice_list);\n              localStorage.setItem(\"notice_list\",JSON.stringify(data.notice_list))\n\n              this.$router.replace('tab_menu');\n            }else{\n              this.$message.warning(res.data.msg);\n            }\n          })\n        },\n      },\n    };\n  </script>"]}]}