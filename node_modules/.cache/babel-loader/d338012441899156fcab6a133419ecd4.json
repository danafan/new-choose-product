{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/pages/SupplyChain/pages/PermissionPages/role_table.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/pages/SupplyChain/pages/PermissionPages/role_table.vue","mtime":1673253287000},{"path":"/Users/fanyulong/project/2022/new-choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"/Users/fanyulong/project/2022/new-choose-product/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js\";\nimport TableTitle from \"../../components/table_title.vue\";\nimport PaginationWidget from \"../../../../components/pagination_widget.vue\";\nimport resource from \"../../../../api/chain_resource.js\";\nexport default {\n  data: function data() {\n    return {\n      loading: false,\n      data: {},\n      //返回数据\n      button_list: {},\n      //按钮权限\n      page: 1,\n      //当前页码\n      max_height: 0,\n      //表格最大高度\n      id: \"\",\n      //点击的ID\n      show_dialog: false,\n      //添加或编辑弹窗\n      type: \"\",\n      //弹窗类型（1:添加；2:查看；3编辑）\n      dialog_title: \"\",\n      //弹窗标题\n      name: \"\",\n      //角色名称\n      remark: \"\",\n      //角色备注\n      menu_list: [],\n      //功能列表（角色用）\n      props: {\n        label: \"menu_name\",\n        children: \"list\"\n      },\n      checked_keys: [] //已选中的功能id集合\n\n    };\n  },\n  created: function created() {\n    //获取列表\n    this.getData();\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener(\"resize\", function () {});\n  },\n  mounted: function mounted() {\n    //获取表格最大高度\n    this.onResize();\n    window.addEventListener(\"resize\", this.onResize());\n  },\n  methods: {\n    //监听屏幕大小变化\n    onResize: function onResize() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var card_box_height = document.getElementById(\"card_box\").offsetHeight;\n        var table_title_height = document.getElementById(\"table_title\").offsetHeight;\n        var bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n        _this.max_height = card_box_height - table_title_height - bottom_row_height - 55 + \"px\";\n      });\n    },\n    //获取列表\n    getData: function getData() {\n      var _this2 = this;\n\n      var arg = {\n        pagesize: 10,\n        page: this.page\n      };\n      this.loading = true;\n      resource.menuroleList(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this2.loading = false;\n          _this2.data = res.data.data;\n          _this2.button_list = _this2.data.button_list;\n        } else {\n          _this2.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //点击添加或编辑\n    addFn: function addFn(type, role_id) {\n      this.type = type;\n\n      if (type == '1') {\n        //添加\n        this.id = \"\";\n        this.dialog_title = '添加角色'; //创建get\n\n        this.addUserGet();\n      } else if (type == '2') {\n        //查看\n        this.id = role_id;\n        this.dialog_title = '角色详情'; //查看\n\n        this.menuRoleInfo();\n      } else {\n        //编辑\n        this.id = role_id;\n        this.dialog_title = '编辑角色'; //编辑get\n\n        this.editUserGet();\n      }\n    },\n    //查看\n    menuRoleInfo: function menuRoleInfo() {\n      var _this3 = this;\n\n      var arg = {\n        role_id: this.id\n      };\n      resource.menuRoleInfo(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this3.menu_list = res.data.data.list;\n          _this3.name = res.data.data.menu_role_name;\n          _this3.remark = res.data.data.remark;\n          _this3.show_dialog = true;\n        } else {\n          _this3.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //创建get\n    addUserGet: function addUserGet() {\n      var _this4 = this;\n\n      resource.menuRoleAddGet().then(function (res) {\n        if (res.data.code == 1) {\n          _this4.menu_list = res.data.data;\n          _this4.show_dialog = true;\n        } else {\n          _this4.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //编辑get\n    editUserGet: function editUserGet() {\n      var _this5 = this;\n\n      var arg = {\n        role_id: this.id\n      };\n      resource.menuRoleEditGet(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this5.menu_list = res.data.data.menu_list;\n          _this5.checked_keys = res.data.data.selected_ids;\n          _this5.name = res.data.data.menu_role_name; //角色名称\n\n          _this5.remark = res.data.data.remark; //备注\n\n          _this5.show_dialog = true;\n        } else {\n          _this5.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //监听切换权限内容\n    checkChange: function checkChange(data, checked) {\n      var tree_list = this.$refs.tree;\n      var arr = [];\n      tree_list.map(function (item) {\n        arr = [].concat(_toConsumableArray(arr), _toConsumableArray(item.getCheckedKeys()));\n      });\n      this.checked_keys = arr;\n    },\n    //关闭弹窗\n    closeDialog: function closeDialog() {\n      this.name = \"\"; //角色名称\n\n      this.remark = \"\"; //角色备注\n\n      this.checked_keys = [];\n    },\n    //点击删除\n    deleteFn: function deleteFn(role_id) {\n      var _this6 = this;\n\n      this.$confirm('确认删除该角色?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var arg = {\n          role_id: role_id\n        };\n        resource.delMenuRole(arg).then(function (res) {\n          if (res.data.code == 1) {\n            _this6.$message.success(res.data.msg); //获取列表\n\n\n            _this6.getData();\n          } else {\n            _this6.$message.warning(res.data.msg);\n          }\n        });\n      }).catch(function () {\n        _this6.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    },\n    //点击确认\n    commitFn: function commitFn() {\n      var _this7 = this;\n\n      if (this.name == \"\") {\n        this.$message.warning(\"请输入角色名称!\");\n        return;\n      } else if (this.name.length > 20) {\n        this.$message.warning(\"角色名称不能超过20个字!\");\n        return;\n      } else if (this.remark == \"\") {\n        this.$message.warning(\"请输入角色备注!\");\n        return;\n      }\n\n      var arg = {\n        name: this.name,\n        ids: this.checked_keys.join(\",\"),\n        remark: this.remark\n      };\n\n      if (this.type == \"1\") {\n        //添加\n        resource.menuRoleAddPost(arg).then(function (res) {\n          if (res.data.code == 1) {\n            _this7.$message.success(res.data.msg); //获取列表\n\n\n            _this7.getData();\n\n            _this7.show_dialog = false;\n          } else {\n            _this7.$message.warning(res.data.msg);\n          }\n        });\n      } else if (this.type == \"3\") {\n        //编辑\n        arg.role_id = this.id;\n        resource.menuRoleEditPost(arg).then(function (res) {\n          if (res.data.code == 1) {\n            _this7.$message.success(res.data.msg); //获取列表\n\n\n            _this7.getData();\n\n            _this7.show_dialog = false;\n          } else {\n            _this7.$message.warning(res.data.msg);\n          }\n        });\n      }\n    },\n    //分页\n    checkPage: function checkPage(v) {\n      this.page = v; //获取列表\n\n      this.getData();\n    }\n  },\n  components: {\n    TableTitle: TableTitle,\n    PaginationWidget: PaginationWidget\n  }\n};",{"version":3,"mappings":";;AA+DA;AACA;AAEA;AACA;EACAA,IADA,kBACA;IACA;MACAC,cADA;MAEAD,QAFA;MAEA;MACAE,eAHA;MAGA;MACAC,OAJA;MAIA;MACAC,aALA;MAKA;MACAC,MANA;MAMA;MACAC,kBAPA;MAOA;MACAC,QARA;MAQA;MACAC,gBATA;MASA;MACAC,QAVA;MAUA;MACAC,UAXA;MAWA;MACAC,aAZA;MAYA;MACAC;QACAC,kBADA;QAEAC;MAFA,CAbA;MAiBAC,gBAjBA,CAiBA;;IAjBA;EAmBA,CArBA;EAsBAC,OAtBA,qBAsBA;IACA;IACA;EACA,CAzBA;EA0BAC,SA1BA,uBA0BA;IACAC;EACA,CA5BA;EA6BAC,OA7BA,qBA6BA;IACA;IACA;IACAD;EACA,CAjCA;EAkCAE;IACA;IACAC,QAFA,sBAEA;MAAA;;MACA;QACA;QACA;QACA;QACA,mBACAC,kBACAC,kBADA,GAEAC,iBAFA,GAGA,EAHA,GAIA,IALA;MAMA,CAVA;IAWA,CAdA;IAeA;IACAC,OAhBA,qBAgBA;MAAA;;MACA;QACAC,YADA;QAEAvB;MAFA;MAIA;MACAwB;QACA;UACA;UACA;UACA;QACA,CAJA,MAIA;UACA;QACA;MACA,CARA;IASA,CA/BA;IAgCA;IACAC,KAjCA,iBAiCArB,IAjCA,EAiCAsB,OAjCA,EAiCA;MACA;;MACA;QAAA;QACA;QACA,2BAFA,CAGA;;QACA;MACA,CALA,MAKA;QAAA;QACA;QACA,2BAFA,CAGA;;QACA;MACA,CALA,MAKA;QAAA;QACA;QACA,2BAFA,CAGA;;QACA;MACA;IACA,CAnDA;IAoDA;IACAC,YArDA,0BAqDA;MAAA;;MACA;QACAD;MADA;MAGAF;QACA;UACA;UACA;UACA;UACA;QACA,CALA,MAKA;UACA;QACA;MACA,CATA;IAUA,CAnEA;IAoEA;IACAI,UArEA,wBAqEA;MAAA;;MACAJ;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;IAQA,CA9EA;IA+EA;IACAK,WAhFA,yBAgFA;MAAA;;MACA;QACAH;MADA;MAGAF;QACA;UACA;UACA;UACA,2CAHA,CAGA;;UACA,qCAJA,CAIA;;UACA;QACA,CANA,MAMA;UACA;QACA;MACA,CAVA;IAWA,CA/FA;IAgGA;IACAM,WAjGA,uBAiGAjC,IAjGA,EAiGAkC,OAjGA,EAiGA;MACA;MACA;MACAC;QACAC;MACA,CAFA;MAGA;IACA,CAxGA;IAyGA;IACAC,WA1GA,yBA0GA;MACA,eADA,CACA;;MACA,iBAFA,CAEA;;MACA;IACA,CA9GA;IA+GA;IACAC,QAhHA,oBAgHAT,OAhHA,EAgHA;MAAA;;MACA;QACAU,uBADA;QAEAC,sBAFA;QAGAjC;MAHA,GAIAkC,IAJA,CAIA;QACA;UACAZ;QADA;QAGAF;UACA;YACA,sCADA,CAEA;;;YACA;UACA,CAJA,MAIA;YACA;UACA;QACA,CARA;MASA,CAjBA,EAiBAe,KAjBA,CAiBA;QACA;UACAnC,YADA;UAEAoC;QAFA;MAIA,CAtBA;IAuBA,CAxIA;IAyIA;IACAC,QA1IA,sBA0IA;MAAA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA;;MACA;QACAnC,eADA;QAEAoC,gCAFA;QAGAnC;MAHA;;MAKA;QAAA;QACAiB;UACA;YACA,sCADA,CAEA;;;YACA;;YACA;UACA,CALA,MAKA;YACA;UACA;QACA,CATA;MAUA,CAXA,MAWA;QAAA;QACAmB;QACAnB;UACA;YACA,sCADA,CAEA;;;YACA;;YACA;UACA,CALA,MAKA;YACA;UACA;QACA,CATA;MAUA;IACA,CAlLA;IAmLA;IACAoB,SApLA,qBAoLAC,CApLA,EAoLA;MACA,cADA,CAEA;;MACA;IACA;EAxLA,CAlCA;EA4NAC;IACAC,sBADA;IAEAC;EAFA;AA5NA","names":["data","loading","button_list","page","max_height","id","show_dialog","type","dialog_title","name","remark","menu_list","props","label","children","checked_keys","created","destroyed","window","mounted","methods","onResize","card_box_height","table_title_height","bottom_row_height","getData","pagesize","resource","addFn","role_id","menuRoleInfo","addUserGet","editUserGet","checkChange","checked","tree_list","arr","closeDialog","deleteFn","confirmButtonText","cancelButtonText","then","catch","message","commitFn","ids","arg","checkPage","v","components","TableTitle","PaginationWidget"],"sourceRoot":"src/pages/SupplyChain/pages/PermissionPages","sources":["role_table.vue"],"sourcesContent":["<template>\n\t<div class=\"setting_content\">\n\t\t<el-card class=\"card_box\" id=\"card_box\">\n\t\t\t<TableTitle title=\"数据列表\" id=\"table_title\">\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"addFn('1')\" v-if=\"button_list.add == 1\">添加</el-button>\n\t\t\t</TableTitle>\n\t\t\t<el-table size=\"mini\" :data=\"data.data\" tooltip-effect=\"dark\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" :max-height=\"max_height\" v-loading=\"loading\">\n\t\t\t\t<el-table-column prop=\"menu_role_name\" label=\"角色名称\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"num\" label=\"角色数量\" align=\"center\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"remark\" label=\"角色备注\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"create_time\" width=\"160\" label=\"创建时间\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"creater\" width=\"160\" label=\"创建人\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column label=\"操作\" align=\"center\" width=\"120\" fixed=\"right\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" @click=\"addFn('2',scope.row.menu_role_id)\" v-if=\"button_list.view == 1\">查看</el-button>\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" @click=\"addFn('3',scope.row.menu_role_id)\" v-if=\"button_list.edit == 1 && scope.row.is_disable != 1\">编辑</el-button>\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" @click=\"deleteFn(scope.row.menu_role_id)\" v-if=\"button_list.del == 1 && scope.row.is_disable != 1\">删除</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t\t<PaginationWidget id=\"bottom_row\" :total=\"data.total\" :page=\"page\" @checkPage=\"checkPage\"/>\n\t\t</el-card>\n\t\t添加或编辑\n\t\t<el-dialog :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :show-close=\"false\" @close=\"closeDialog\" :visible.sync=\"show_dialog\">\n\t\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t\t<div>{{dialog_title}}</div>\n\t\t\t\t<img class=\"close_icon\" src=\"../../../../static/close_icon.png\" @click=\"show_dialog = false\">\n\t\t\t</div>\n\t\t\t<div class=\"dialog_content\">\n\t\t\t\t<el-form label-position=\"left\" label-width=\"86px\">\n\t\t\t\t\t<el-form-item label=\"角色名称:\" :required=\"type != '2'\">\n\t\t\t\t\t\t<el-input style=\"width:200px\" type=\"text\" placeholder=\"输入角色名称\" size=\"small\" v-model=\"name\" :disabled=\"type == '2'\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"角色备注:\" :required=\"type != '2'\">\n\t\t\t\t\t\t<el-input style=\"width:220px\" type=\"textarea\" :rows=\"3\" placeholder=\"输入备注...\" size=\"small\" v-model=\"remark\"\n\t\t\t\t\t\t:disabled=\"type == '2'\">\n\t\t\t\t\t</el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"权限配置:\">\n\t\t\t\t\t<div class=\"menu_list_box\" v-if=\"type == '2'\">\n\t\t\t\t\t\t<div class=\"menu_item\" v-for=\"(item,index) in menu_list\" :key=\"index\">\n\t\t\t\t\t\t\t<el-tree :data=\"item\" ref=\"tree\" node-key=\"menu_id\" :props=\"props\"></el-tree>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"menu_list_box\" v-else>\n\t\t\t\t\t\t<div class=\"menu_item\" v-for=\"(item,index) in menu_list\" :key=\"index\">\n\t\t\t\t\t\t\t<el-tree :data=\"item\" ref=\"tree\" node-key=\"menu_id\" :default-checked-keys=\"checked_keys\" :props=\"props\"\n\t\t\t\t\t\t\tshow-checkbox @check=\"checkChange\"></el-tree>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</div>\n\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t<el-button size=\"small\" @click=\"show_dialog = false\">取消</el-button>\n\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"commitFn\" v-if=\"type != 2\">提交</el-button>\n\t\t</div>\n\t</el-dialog>\n</div>\n</template>\n<script>\n\timport TableTitle from '../../components/table_title.vue'\n\timport PaginationWidget from '../../../../components/pagination_widget.vue'\n\n\timport resource from '../../../../api/chain_resource.js'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tloading:false,\n\t\t\t\tdata:{},\t\t\t\t\t//返回数据\n\t\t\t\tbutton_list:{},\t\t\t\t//按钮权限\n\t\t\t\tpage:1,\t\t\t\t\t\t//当前页码\n\t\t\t\tmax_height:0,\t\t\t\t//表格最大高度\n\t\t\t\tid:\"\",\t\t\t\t\t\t//点击的ID\n\t\t\t\tshow_dialog:false,\t\t\t//添加或编辑弹窗\n\t\t\t\ttype:\"\",\t\t\t\t\t//弹窗类型（1:添加；2:查看；3编辑）\n\t\t\t\tdialog_title:\"\",\t\t\t//弹窗标题\n\t\t\t\tname: \"\", //角色名称\n      \t\t\tremark: \"\", //角色备注\n      \t\t\tmenu_list: [], //功能列表（角色用）\n      \t\t\tprops: {\n      \t\t\t\tlabel: \"menu_name\",\n      \t\t\t\tchildren: \"list\",\n      \t\t\t},\n      \t\t\tchecked_keys: [], //已选中的功能id集合\n      \t\t}\n      \t},\n      \tcreated(){\n\t\t\t//获取列表\n\t\t\tthis.getData();\n\t\t},\n\t\tdestroyed() {\n\t\t\twindow.removeEventListener(\"resize\", () => {});\n\t\t},\n\t\tmounted() {\n    \t\t//获取表格最大高度\n    \t\tthis.onResize();\n    \t\twindow.addEventListener(\"resize\", this.onResize());\n    \t},\n    \tmethods: {\n    \t\t//监听屏幕大小变化\n    \t\tonResize() {\n    \t\t\tthis.$nextTick(() => {\n    \t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n    \t\t\t\tlet table_title_height = document.getElementById(\"table_title\").offsetHeight;\n    \t\t\t\tlet bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n    \t\t\t\tthis.max_height =\n    \t\t\t\tcard_box_height -\n    \t\t\t\ttable_title_height -\n    \t\t\t\tbottom_row_height -\n    \t\t\t\t55 +\n    \t\t\t\t\"px\";\n    \t\t\t});\n    \t\t},\n\t\t\t//获取列表\n\t\t\tgetData(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tpagesize:10,\n\t\t\t\t\tpage:this.page\n\t\t\t\t}\n\t\t\t\tthis.loading = true;\n\t\t\t\tresource.menuroleList(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.data = res.data.data;\n\t\t\t\t\t\tthis.button_list = this.data.button_list;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//点击添加或编辑\n\t\t\taddFn(type,role_id){\n\t\t\t\tthis.type = type;\n\t\t\t\tif(type == '1'){\t//添加\n\t\t\t\t\tthis.id = \"\";\n\t\t\t\t\tthis.dialog_title = '添加角色';\n\t\t\t\t\t//创建get\n\t\t\t\t\tthis.addUserGet();\n\t\t\t\t}else if(type == '2'){\t//查看\n\t\t\t\t\tthis.id = role_id;\n\t\t\t\t\tthis.dialog_title = '角色详情';\n\t\t\t\t\t//查看\n\t\t\t\t\tthis.menuRoleInfo();\n\t\t\t\t}else{\t\t\t\t//编辑\n\t\t\t\t\tthis.id = role_id;\n\t\t\t\t\tthis.dialog_title = '编辑角色';\n\t\t\t\t\t//编辑get\n\t\t\t\t\tthis.editUserGet();\n\t\t\t\t}\n\t\t\t},\n\t\t\t//查看\n\t\t\tmenuRoleInfo() {\n\t\t\t\tlet arg = {\n\t\t\t\t\trole_id: this.id,\n\t\t\t\t};\n\t\t\t\tresource.menuRoleInfo(arg).then((res) => {\n\t\t\t\t\tif (res.data.code == 1) {\n\t\t\t\t\t\tthis.menu_list = res.data.data.list;\n          \t\t\t\tthis.name = res.data.data.menu_role_name; \n          \t\t\t\tthis.remark = res.data.data.remark; \n          \t\t\t\tthis.show_dialog = true;\n          \t\t\t} else {\n          \t\t\t\tthis.$message.warning(res.data.msg);\n          \t\t\t}\n          \t\t});\n\t\t\t},\n\t\t\t//创建get\n\t\t\taddUserGet(){\n\t\t\t\tresource.menuRoleAddGet().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.menu_list = res.data.data;\n\t\t\t\t\t\tthis.show_dialog = true;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//编辑get\n\t\t\teditUserGet(){\n\t\t\t\tlet arg = {\n\t\t\t\t\trole_id:this.id\n\t\t\t\t}\n\t\t\t\tresource.menuRoleEditGet(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.menu_list = res.data.data.menu_list;\n\t\t\t\t\t\tthis.checked_keys = res.data.data.selected_ids;\n          \t\t\t\tthis.name = res.data.data.menu_role_name; //角色名称\n          \t\t\t\tthis.remark = res.data.data.remark; //备注\n          \t\t\t\tthis.show_dialog = true;\n          \t\t\t}else{\n          \t\t\t\tthis.$message.warning(res.data.msg);\n          \t\t\t}\n          \t\t})\n\t\t\t},\n\t\t\t//监听切换权限内容\n\t\t\tcheckChange(data, checked) {\n\t\t\t\tlet tree_list = this.$refs.tree;\n\t\t\t\tlet arr = [];\n\t\t\t\ttree_list.map((item) => {\n\t\t\t\t\tarr = [...arr, ...item.getCheckedKeys()];\n\t\t\t\t});\n\t\t\t\tthis.checked_keys = arr;\n\t\t\t},\n\t\t\t//关闭弹窗\n\t\t\tcloseDialog(){\n\t\t\t\tthis.name = \"\"; //角色名称\n      \t\t\tthis.remark = \"\"; //角色备注\n      \t\t\tthis.checked_keys = [];\n\t\t\t},\n\t\t\t//点击删除\n\t\t\tdeleteFn(role_id){\n\t\t\t\tthis.$confirm('确认删除该角色?', '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\trole_id:role_id\n\t\t\t\t\t}\n\t\t\t\t\tresource.delMenuRole(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getData();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t\t//点击确认\n\t\t\tcommitFn(){\n\t\t\t\tif (this.name == \"\") {\n\t\t\t\t\tthis.$message.warning(\"请输入角色名称!\");\n\t\t\t\t\treturn;\n\t\t\t\t} else if (this.name.length > 20) {\n\t\t\t\t\tthis.$message.warning(\"角色名称不能超过20个字!\");\n\t\t\t\t\treturn;\n\t\t\t\t} else if (this.remark == \"\") {\n\t\t\t\t\tthis.$message.warning(\"请输入角色备注!\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet arg = {\n\t\t\t\t\tname: this.name,\n\t\t\t\t\tids: this.checked_keys.join(\",\"),\n\t\t\t\t\tremark: this.remark,\n\t\t\t\t};\n\t\t\t\tif (this.type == \"1\") {  //添加\n\t\t\t\t\tresource.menuRoleAddPost(arg).then((res) => {\n\t\t\t\t\t\tif (res.data.code == 1) {\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getData();\n\t\t\t\t\t\t\tthis.show_dialog = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n        \t\t} else if (this.type == \"3\") {  //编辑\n        \t\t\targ.role_id = this.id;\n        \t\t\tresource.menuRoleEditPost(arg).then((res) => {\n        \t\t\t\tif (res.data.code == 1) {\n        \t\t\t\t\tthis.$message.success(res.data.msg);\n        \t\t\t\t\t//获取列表\n        \t\t\t\t\tthis.getData();\n        \t\t\t\t\tthis.show_dialog = false;\n        \t\t\t\t} else {\n        \t\t\t\t\tthis.$message.warning(res.data.msg);\n        \t\t\t\t}\n        \t\t\t});\n        \t\t}\n        \t},\n\t\t\t//分页\n\t\t\tcheckPage(v){\n\t\t\t\tthis.page = v;\n\t\t\t\t//获取列表\n\t\t\t\tthis.getData();\n\t\t\t}\n\t\t},\n\t\tcomponents:{\n\t\t\tTableTitle,\n\t\t\tPaginationWidget\n\t\t}\n\t}\n</script>\n<style lang=\"less\" scoped>\n.setting_content{\n\tflex:1;\n\tposition: relative;\n\t.card_box{\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n}\n.dialog_content{\n\tpadding: 30rem;\n\t.menu_list_box {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\t.menu_item {\n\t\t\twidth: 50%;\n\t\t}\n\t}\n}\n</style>"]}]}