{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/thread-loader/dist/cjs.js!/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/choose-product/src/pages/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/pages/login.vue","mtime":1664418634061},{"path":"/Users/fanyulong/project/2022/choose-product/babel.config.js","mtime":1662529345111},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import resource from \"../api/resource.js\";\nexport default {\n  data: function data() {\n    return {};\n  },\n  mounted: function mounted() {\n    this.getAppKey();\n  },\n  methods: {\n    getAppKey: function getAppKey() {\n      var _this = this;\n\n      resource.getAppKey().then(function (res) {\n        if (res.data.code == \"1\") {\n          var appKey = res.data.data.appkey;\n\n          _this.ddLoginInit(appKey);\n        } else {\n          _this.$message.warning(res.data.msg);\n        }\n      });\n    },\n    ddLoginInit: function ddLoginInit(appKey) {\n      var url = \"\".concat(location.origin, \"/api/scancodes/ewmlogin\"); // let url = \"http://selectiontest.92nu.com/api/scancodes/ewmlogin\";\n\n      var goto = encodeURIComponent(\"https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=\".concat(appKey, \"&response_type=code&scope=snsapi_login&state=STATE&redirect_uri=\").concat(url));\n      window.DDLogin({\n        id: \"container\",\n        goto: goto,\n        style: \"border:none;background-color:#FFFFFF;margin:0 auto;\",\n        width: \"100%\",\n        //官方参数 365\n        height: \"300\" //官方参数 400\n\n      });\n\n      var handleMessage = function handleMessage(event) {\n        var origin = event.origin;\n\n        if (origin == \"https://login.dingtalk.com\") {\n          //判断是否来自ddLogin扫码事件。\n          var loginTmpCode = event.data; //获取到loginTmpCode后就可以在这里构造跳转链接进行跳转了\n          // console.log(\"loginTmpCode\", loginTmpCode);\n          //此步拿到临时loginTmpCode换取正式code\n\n          window.location.href = \"https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=\".concat(appKey, \"&response_type=code&scope=snsapi_login&state=STATE&redirect_uri=\").concat(url, \"&loginTmpCode=\").concat(loginTmpCode);\n        }\n      };\n\n      if (typeof window.addEventListener != \"undefined\") {\n        window.addEventListener(\"message\", handleMessage, false);\n      } else if (typeof window.attachEvent != \"undefined\") {\n        window.attachEvent(\"onmessage\", handleMessage);\n      }\n    }\n  }\n};",{"version":3,"mappings":"AAkBA;AACA;EACAA,IADA,kBACA;IACA;EACA,CAHA;EAIAC,OAJA,qBAIA;IACA;EACA,CANA;EAOAC;IACAC,SADA,uBACA;MAAA;;MACAC;QACA;UACA;;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;IAQA,CAVA;IAWAC,WAXA,uBAWAC,MAXA,EAWA;MACA,gEADA,CAEA;;MACA,qGACAA,MADA,6EACAC,GADA;MAGAC;QACAC,eADA;QAEAC,UAFA;QAGAC,4DAHA;QAIAC,aAJA;QAIA;QACAC,aALA,CAKA;;MALA;;MAOA;QACA;;QACA;UACA;UACA,8BAFA,CAGA;UACA;UACA;;UACAL;QACA;MACA,CAVA;;MAWA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;IACA;EAxCA;AAPA","names":["data","mounted","methods","getAppKey","resource","ddLoginInit","appKey","url","window","id","goto","style","width","height"],"sourceRoot":"src/pages","sources":["login.vue"],"sourcesContent":["<template>\n\t<div class=\"login_container\">\n\t\t<img class=\"login_page_back\" src=\"../static/login_page_back.png\">\n\t\t<div class=\"login_content\">\n\t\t\t<div class=\"content_left\">\n\t\t\t\t<img class=\"login_big_back\" src=\"../static/login_big_back.png\">\n\t\t\t\t<img class=\"login_small_back\" src=\"../static/login_small_back.png\">\n\t\t\t</div>\n\t\t\t<div class=\"content_right\">\n\t\t\t\t<div class=\"content\">\n\t\t\t\t\t<div class=\"text\">钉钉扫码一键登录</div>\n\t\t\t\t\t<div id=\"container\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\n\timport resource from '../api/resource.js'\n\texport default{\n\t\tdata() {\n\t\t\treturn {};\n\t\t},\n\t\tmounted() {\n\t\t\tthis.getAppKey();\n\t\t},\n\t\tmethods: {\n\t\t\tgetAppKey() {\n\t\t\t\tresource.getAppKey().then((res) => {\n\t\t\t\t\tif (res.data.code == \"1\") {\n\t\t\t\t\t\tlet appKey = res.data.data.appkey;\n\t\t\t\t\t\tthis.ddLoginInit(appKey);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tddLoginInit(appKey) {\n\t\t\t\tlet url = `${location.origin}/api/scancodes/ewmlogin`;\n\t\t\t\t// let url = \"http://selectiontest.92nu.com/api/scancodes/ewmlogin\";\n\t\t\t\tconst goto = encodeURIComponent(\n\t\t\t\t\t`https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=${appKey}&response_type=code&scope=snsapi_login&state=STATE&redirect_uri=${url}`\n\t\t\t\t\t);\n\t\t\t\twindow.DDLogin({\n\t\t\t\t\tid: \"container\",\n\t\t\t\t\tgoto: goto,\n\t\t\t\t\tstyle: \"border:none;background-color:#FFFFFF;margin:0 auto;\",\n        \t\t\twidth: \"100%\", //官方参数 365\n        \t\t\theight: \"300\", //官方参数 400\n        \t\t});\n\t\t\t\tlet handleMessage = (event) => {\n\t\t\t\t\tlet origin = event.origin;\n\t\t\t\t\tif (origin == \"https://login.dingtalk.com\") {\n          \t\t\t\t//判断是否来自ddLogin扫码事件。\n          \t\t\t\tconst loginTmpCode = event.data;\n          \t\t\t\t//获取到loginTmpCode后就可以在这里构造跳转链接进行跳转了\n          \t\t\t\t// console.log(\"loginTmpCode\", loginTmpCode);\n          \t\t\t\t//此步拿到临时loginTmpCode换取正式code\n          \t\t\t\twindow.location.href = `https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=${appKey}&response_type=code&scope=snsapi_login&state=STATE&redirect_uri=${url}&loginTmpCode=${loginTmpCode}`;\n          \t\t\t}\n          \t\t};\n          \t\tif (typeof window.addEventListener != \"undefined\") {\n          \t\t\twindow.addEventListener(\"message\", handleMessage, false);\n          \t\t} else if (typeof window.attachEvent != \"undefined\") {\n          \t\t\twindow.attachEvent(\"onmessage\", handleMessage);\n          \t\t}\n          \t},\n          },\n        }\n      </script>\n      <style lang=\"less\" scoped>\n      .login_container{\n       position: absolute;\n       top: 0;\n       left: 0;\n       width: 100%;\n       height: 100%;\n       display: flex;\n       align-items: center;\n       justify-content: center;\n       .login_page_back{\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n      .login_content{\n        width: 1510rem;\n        height: 780rem;\n        background: #FFFFFF;\n        border-radius: 8rem;\n        z-index: 9;\n        display: flex;\n        .content_left{\n         position: relative;\n         height: 780rem;\n         flex:1;\n         display: flex;\n         align-items: center;\n         padding-left: 48rem;\n         .login_big_back{\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          z-index: 10;\n        }\n        .login_small_back{\n          width: 713rem;\n          height: 632rem;\n          z-index: 11;\n        }\n      }\n      .content_right{\n       display: flex;\n       align-items: center;\n       justify-content: center;\n       height: 780rem;\n       width: 490rem;\n       .content{\n        background: #FFFFFF;\n        border-radius: 8rem;\n        border: 1px solid #EBEBEB;\n        width: 400rem;\n        padding-top:30rem;\n        position: relative;\n        .text{\n         position: absolute;\n         color: var(--color);\n         top: 20rem;\n         font-size: 24rem;\n         font-weight: 500;\n         width: 100%;\n         text-align: center;\n       }\n     }\n   }\n }\n}\n</style>"]}]}