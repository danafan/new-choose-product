{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/thread-loader/dist/cjs.js!/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/choose-product/src/components/quill_editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/components/quill_editor.vue","mtime":1665653525000},{"path":"/Users/fanyulong/project/2022/choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["// 工具栏配置\nvar toolbarOptions = [['bold', 'italic', 'underline', 'strike'], ['blockquote', 'code-block'], [{\n  'header': 1\n}, {\n  'header': 2\n}], [{\n  'list': 'ordered'\n}, {\n  'list': 'bullet'\n}], [{\n  'script': 'sub'\n}, {\n  'script': 'super'\n}], [{\n  'indent': '-1'\n}, {\n  'indent': '+1'\n}], [{\n  'direction': 'rtl'\n}], [{\n  'size': ['small', false, 'large', 'huge']\n}], [{\n  'header': [1, 2, 3, 4, 5, 6, false]\n}], [{\n  'color': []\n}, {\n  'background': []\n}], [{\n  'font': []\n}], [{\n  'align': []\n}], ['link', 'image'], ['clean']];\nexport default {\n  data: function data() {\n    return {\n      editorOption: {\n        placeholder: \"请输入店家要求\",\n        modules: {\n          toolbar: {\n            container: toolbarOptions,\n            // 工具栏\n            handlers: {\n              'image': function image(value) {\n                if (value) {\n                  // 调用iview图片上传\n                  document.querySelector('.upload_files').click();\n                } else {\n                  this.quill.format('image', false);\n                }\n              }\n            }\n          }\n        }\n      },\n      editor_val: \"\" //富文本编辑器内容\n\n    };\n  },\n  watch: {\n    editor_val: function editor_val(n, o) {\n      this.$emit('callback', n);\n    }\n  },\n  methods: {\n    // 富文本上传图片\n    uploadFn: function uploadFn() {\n      if (this.$refs.imgUpload.files.length > 0) {\n        var files = this.$refs.imgUpload.files;\n        console.log(files); // let obj = files[0];\n        // resource.uploadFile({image:obj,type:1}).then(res => {\n        // \tif(res.data.code == \"1\"){\n        // \t\t// 获取富文本组件实例\n        // \t\tvar quill = this.$refs.quill_editor.quill;\n        //         \t\t\t// 获取光标所在位置\n        //         \t\t\tlet length = quill.getSelection().index;\n        //         \t\t\t// 插入图片，res为服务器返回的图片链接地址\n        //         \t\t\tlet url = res.data.data.domain + res.data.data.urls[0];\n        //         \t\t\tquill.insertEmbed(length, 'image', url);\n        //         \t\t\t// 调整光标到最后\n        //         \t\t\tquill.setSelection(length + 1);\n        //         \t\t}else{\n        //         \t\t\tthis.$message.error(res.data.msg);\n        //         \t\t};\n        //         \t});\n      }\n    }\n  }\n};",{"version":3,"mappings":"AAmBA;AACA,sBACA,yCADA,EAEA,4BAFA,EAGA;EAAA;AAAA;EAAA;AAAA,EAHA,EAIA;EAAA;AAAA;EAAA;AAAA,EAJA,EAKA;EAAA;AAAA;EAAA;AAAA,EALA,EAMA;EAAA;AAAA;EAAA;AAAA,EANA,EAOA;EAAA;AAAA,EAPA,EAQA;EAAA;AAAA,EARA,EASA;EAAA;AAAA,EATA,EAUA;EAAA;AAAA;EAAA;AAAA,EAVA,EAWA;EAAA;AAAA,EAXA,EAYA;EAAA;AAAA,EAZA,EAaA,iBAbA,EAcA,SAdA;AAgBA;EACAA,IADA,kBACA;IACA;MACAC;QACAC,sBADA;QAEAC;UACAC;YACAC,yBADA;YACA;YACAC;cACA;gBACA;kBACA;kBACAC;gBACA,CAHA,MAGA;kBACA;gBACA;cACA;YARA;UAFA;QADA;MAFA,CADA;MAmBAC,cAnBA,CAmBA;;IAnBA;EAqBA,CAvBA;EAwBAC;IACAD;MACA;IACA;EAHA,CAxBA;EA6BAE;IACA;IACAC,QAFA,sBAEA;MACA;QACA;QACAC,mBAFA,CAGA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;EAvBA;AA7BA","names":["data","editorOption","placeholder","modules","toolbar","container","handlers","document","editor_val","watch","methods","uploadFn","console"],"sourceRoot":"src/components","sources":["quill_editor.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<quill-editor v-model=\"editor_val\" :options=\"editorOption\" ref=\"quill_editor\">\n\t\t</quill-editor>\n\t\t<input type=\"file\" ref=\"imgUpload\" class=\"upload_files\" @change=\"uploadFn\">\n\t</div>\n</template>\n<style type=\"text/css\">\n.ql-container {\n    height: 260px;\n}\n\n</style>\n<style lang=\"less\" scoped>\n.upload_files {\n\tdisplay: none;\n}\n</style>\n<script>\n// 工具栏配置\nconst toolbarOptions = [\n['bold', 'italic', 'underline', 'strike'],        \n['blockquote', 'code-block'],\n[{'header': 1}, {'header': 2}],               \n[{'list': 'ordered'}, {'list': 'bullet'}],\n[{'script': 'sub'}, {'script': 'super'}],      \n[{'indent': '-1'}, {'indent': '+1'}],         \n[{'direction': 'rtl'}],                        \n[{'size': ['small', false, 'large', 'huge']}],  \n[{'header': [1, 2, 3, 4, 5, 6, false]}],\n[{'color': []}, {'background': []}],          \n[{'font': []}],\n[{'align': []}],\n['link', 'image'],\n['clean']                                         \n]\nexport default{\n\tdata(){\n\t\treturn {\n\t\t\teditorOption: {\n\t\t\t\tplaceholder: \"请输入店家要求\",\n\t\t\t\tmodules: {\n\t\t\t\t\ttoolbar: {\n                    \tcontainer: toolbarOptions,  // 工具栏\n                    \thandlers: {\n                    \t\t'image': function (value) {\n                    \t\t\tif (value) {\n                                \t// 调用iview图片上传\n                                \tdocument.querySelector('.upload_files').click()\n                                } else {\n                                \tthis.quill.format('image', false);\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n            editor_val:\"\",\t\t\t//富文本编辑器内容\n        }\n    },\n    watch:{\n    \teditor_val:function(n,o){\n    \t\tthis.$emit('callback',n);\n    \t}\n    },\n    methods:{\n\t\t// 富文本上传图片\n\t\tuploadFn(){\n\t\t\tif (this.$refs.imgUpload.files.length > 0) {\n\t\t\t\tvar files = this.$refs.imgUpload.files;\n\t\t\t\tconsole.log(files)\n\t\t\t\t// let obj = files[0];\n\t\t\t\t// resource.uploadFile({image:obj,type:1}).then(res => {\n\t\t\t\t// \tif(res.data.code == \"1\"){\n\t\t\t\t// \t\t// 获取富文本组件实例\n\t\t\t\t// \t\tvar quill = this.$refs.quill_editor.quill;\n    //         \t\t\t// 获取光标所在位置\n    //         \t\t\tlet length = quill.getSelection().index;\n    //         \t\t\t// 插入图片，res为服务器返回的图片链接地址\n    //         \t\t\tlet url = res.data.data.domain + res.data.data.urls[0];\n    //         \t\t\tquill.insertEmbed(length, 'image', url);\n    //         \t\t\t// 调整光标到最后\n    //         \t\t\tquill.setSelection(length + 1);\n    //         \t\t}else{\n    //         \t\t\tthis.$message.error(res.data.msg);\n    //         \t\t};\n    //         \t});\n}\n}\n}\n}\n</script>"]}]}