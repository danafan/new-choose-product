{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/pages/SupplyChain/pages/chain_audit_page.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/pages/SupplyChain/pages/chain_audit_page.vue","mtime":1686905642547},{"path":"/Users/fanyulong/project/2022/new-choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport commonResource from \"../../../api/common_resource.js\";\nimport resource from \"../../../api/chain_resource.js\";\nimport { getNowDate, getCurrentDate } from \"../../../api/date.js\";\nimport { exportPost } from \"../../../api/export.js\";\nimport { MessageBox, Message } from \"element-ui\";\nimport TableTitle from \"../components/table_title.vue\";\nimport PaginationWidget from \"../../../components/pagination_widget.vue\";\nexport default {\n  data: function data() {\n    return {\n      is_up: false,\n      loading: false,\n      demand_list: [],\n      //需求类型\n      demand_type: [],\n      //选中的需求类型\n      status_list: [{\n        name: '已撤销',\n        id: 0\n      }, {\n        name: '待审核',\n        id: 1\n      }, {\n        name: '已确认',\n        id: 2\n      }, {\n        name: '已拒绝',\n        id: 4\n      }],\n      //需求状态\n      status_id: \"\",\n      //选中的需求状态\n      dept_list: [],\n      //所有部门列表\n      select_main_dept_id: [],\n      //所有部门列表\n      user_list: [],\n      //所有用户列表\n      select_userid: [],\n      //选中的用户列表\n      is_outer_user: \"\",\n      //是否外部商家\n      store_list: [],\n      //店铺列表\n      shop_code: [],\n      //选中的店铺\n      supplier_list: [],\n      //供应商列表\n      supplier_ids: [],\n      //选中的供应商\n      cate_list: [],\n      //类目列表\n      category_ids: [],\n      //选中的类目\n      market_list: [],\n      //市场列表\n      market_ids: [],\n      //选中的市场\n      style_list: [],\n      //拍摄风格列表\n      shooting_style_ids: [],\n      //选中的拍摄风格\n      class_list: [],\n      //分类列表\n      classification_ids: [],\n      //选中的分类\n      send_type_list: [],\n      //发货类型列表\n      send_type: [],\n      //选中的发货类型\n      i_id: \"\",\n      //款式编码\n      up_type: null,\n      //上新类型\n      date: [],\n      //选款日期\n      max_height: 0,\n      page: 1,\n      data: [],\n      //获取的数据\n      total: 0,\n      button_list: {},\n      detail_dialog: false,\n      //详情弹窗\n      goods_info: {},\n      //详情\n      remark_dialog: false,\n      select_id: \"\",\n      //当前点击的记录ID\n      remark: \"\",\n      //备注内容\n      refused_dialog: false,\n      //拒绝弹窗\n      err_msg: \"\",\n      //拒绝备注\n      multiple_selection: [],\n      allAuditDialog: false,\n      audit_type: 1,\n      //批量审批的类型（1:同意；2:拒绝）\n      msg: \"\",\n      //同意备注\n      refuse_remark: \"\",\n      //批量拒绝原因\n      edit_dialog: false,\n      //编辑款式编码弹窗\n      edit_arg: {\n        select_id: \"\",\n        supplier_ksbm: \"\",\n        i_id: \"\",\n        bd_i_id: \"\"\n      } //编辑信息\n\n    };\n  },\n  created: function created() {\n    //获取需求类型和发货类型列表\n    this.getAllDemandSendType(); //获取部门列表\n\n    this.getDeptList(); //获取用户列表\n\n    this.getUserList(); //获取所有店铺列表\n\n    this.ajaxViewShop(); //获取供应商列表\n\n    this.ajaxSupplierList(); //获取类目列表\n\n    this.ajaxCateList(); //市场列表\n\n    this.ajaxMarketList(); //拍摄风格列表\n\n    this.ajaxStyleList(); //分类列表\n\n    this.ajaxClassList(); //获取列表\n\n    this.getGoodsList();\n  },\n  watch: {\n    is_up: function is_up(n, o) {\n      //获取表格最大高度\n      this.onResize();\n    },\n    //上新类型\n    up_type: function up_type(n, o) {\n      switch (n) {\n        case 1:\n          this.date = [getNowDate(), getNowDate()];\n          break;\n\n        case 3:\n          this.date = [getCurrentDate(3), getNowDate()];\n          break;\n\n        case 7:\n          this.date = [getCurrentDate(7), getNowDate()];\n          break;\n\n        default:\n          return;\n      }\n    }\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener(\"resize\", function () {});\n  },\n  mounted: function mounted() {\n    //获取表格最大高度\n    this.onResize();\n    window.addEventListener(\"resize\", this.onResize());\n  },\n  computed: {\n    //图片前缀\n    domain: function domain() {\n      return this.$store.state.domain;\n    }\n  },\n  methods: {\n    //监听屏幕大小变化\n    onResize: function onResize() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var card_box_height = document.getElementById(\"card_box\").offsetHeight;\n        var table_title_height = document.getElementById(\"table_title\").offsetHeight;\n        var bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n        _this.max_height = card_box_height - table_title_height - bottom_row_height - 60 + \"px\";\n      });\n    },\n    //获取需求类型列表\n    getAllDemandSendType: function getAllDemandSendType() {\n      var _this2 = this;\n\n      commonResource.getAllDemandSendType().then(function (res) {\n        if (res.data.code == 1) {\n          var data = res.data.data;\n          _this2.demand_list = data.filter(function (item) {\n            return item.type == 1;\n          });\n          _this2.send_type_list = data.filter(function (item) {\n            return item.type == 2;\n          });\n        } else {\n          _this2.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //获取部门列表\n    getDeptList: function getDeptList() {\n      var _this3 = this;\n\n      commonResource.getDeptList().then(function (res) {\n        if (res.data.code == 1) {\n          _this3.dept_list = res.data.data;\n        } else {\n          _this3.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //获取用户列表\n    getUserList: function getUserList() {\n      var _this4 = this;\n\n      commonResource.getUserList().then(function (res) {\n        if (res.data.code == 1) {\n          _this4.user_list = res.data.data;\n        } else {\n          _this4.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //获取所有店铺列表\n    ajaxViewShop: function ajaxViewShop() {\n      var _this5 = this;\n\n      commonResource.ajaxViewShop().then(function (res) {\n        if (res.data.code == 1) {\n          _this5.store_list = res.data.data;\n        } else {\n          _this5.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //获取供应商列表\n    ajaxSupplierList: function ajaxSupplierList() {\n      var _this6 = this;\n\n      commonResource.ajaxSupplierList().then(function (res) {\n        if (res.data.code == 1) {\n          _this6.supplier_list = res.data.data;\n        } else {\n          _this6.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //获取类目列表\n    ajaxCateList: function ajaxCateList() {\n      var _this7 = this;\n\n      commonResource.ajaxCateList().then(function (res) {\n        if (res.data.code == 1) {\n          _this7.cate_list = res.data.data;\n        } else {\n          _this7.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //市场列表\n    ajaxMarketList: function ajaxMarketList() {\n      var _this8 = this;\n\n      commonResource.ajaxMarketList().then(function (res) {\n        if (res.data.code == 1) {\n          _this8.market_list = res.data.data;\n        } else {\n          _this8.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //拍摄风格列表\n    ajaxStyleList: function ajaxStyleList() {\n      var _this9 = this;\n\n      commonResource.ajaxStyleList().then(function (res) {\n        if (res.data.code == 1) {\n          _this9.style_list = res.data.data;\n        } else {\n          _this9.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //分类列表\n    ajaxClassList: function ajaxClassList() {\n      var _this10 = this;\n\n      commonResource.ajaxClassList().then(function (res) {\n        if (res.data.code == 1) {\n          _this10.class_list = res.data.data;\n        } else {\n          _this10.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //切换多选\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multiple_selection = val;\n    },\n    //设置不可勾选\n    checkboxInit: function checkboxInit(row) {\n      if (row.audit_status != 1) {\n        return 0;\n      } else {\n        return 1;\n      }\n    },\n    //批量审批\n    allCommitFn: function allCommitFn() {\n      if (this.multiple_selection.length == 0) {\n        this.$message.warning('至少选择一条!');\n        return;\n      }\n\n      this.allAuditDialog = true;\n    },\n    //关闭批量审批\n    allClose: function allClose() {\n      this.audit_type = 1;\n      this.refuse_remark = \"\";\n      this.msg = \"\";\n      this.err_msg = \"\";\n    },\n    //提价批量审批\n    commitAllAudit: function commitAllAudit() {\n      var ids = [];\n      this.multiple_selection.map(function (item) {\n        ids.push(item.select_id);\n      });\n\n      if (this.audit_type == 1) {\n        //同意\n        if (this.msg == '') {\n          this.$message.warning('请输入同意备注!');\n          return;\n        }\n\n        var arg = {\n          select_id: ids.join(','),\n          msg: this.msg\n        }; //同意\n\n        this.agreeAudit(arg);\n      } else {\n        //拒绝\n        if (this.refuse_remark == '') {\n          this.$message.warning('请输入拒绝原因!');\n          return;\n        }\n\n        var _arg = {\n          select_id: ids.join(','),\n          err_msg: this.refuse_remark\n        }; //拒绝\n\n        this.refuseAudit(_arg);\n      }\n    },\n    //获取列表\n    getGoodsList: function getGoodsList() {\n      var _this11 = this;\n\n      var arg = {\n        demand_type: this.demand_type.join(','),\n        status: this.status_id,\n        select_userid: this.select_userid.join(','),\n        select_main_dept_id: this.select_main_dept_id.join(','),\n        is_outer_user: this.is_outer_user,\n        shop_code: this.shop_code.join(','),\n        supplier_id: this.supplier_ids.join(','),\n        category_id: this.category_ids.join(','),\n        market_id: this.market_ids.join(','),\n        classification_id: this.classification_ids.join(','),\n        shooting_style_id: this.shooting_style_ids.join(','),\n        send_type: this.send_type.join(','),\n        start_time: this.date && this.date.length > 0 ? this.date[0] : \"\",\n        end_time: this.date && this.date.length > 0 ? this.date[1] : \"\",\n        i_id: this.i_id,\n        page: this.page,\n        pagesize: 100\n      };\n      this.loading = true;\n      resource.examineList(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this11.loading = false;\n          _this11.button_list = res.data.data.button_list;\n          _this11.total = res.data.data.total;\n          var data = res.data.data.data;\n          data.map(function (item) {\n            var images = [];\n            item.img.map(function (i) {\n              images.push(_this11.domain + i);\n            });\n            item.images = images;\n\n            if (item.i_id) {\n              item.new_i_id = item.i_id.split(',');\n            }\n\n            if (item.bd_i_id) {\n              item.new_bd_i_id = item.bd_i_id.split(',');\n            }\n\n            if (item.supplier_ksbm) {\n              item.new_supplier_ksbm = item.supplier_ksbm.split(',');\n            }\n          });\n          _this11.data = data;\n        } else {\n          _this11.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //切换页码\n    checkPage: function checkPage(v) {\n      this.page = v; //获取列表\n\n      this.getGoodsList();\n    },\n    //获取详情\n    selectedInfo: function selectedInfo(select_id) {\n      var _this12 = this;\n\n      var arg = {\n        select_id: select_id,\n        select_type: 0\n      };\n      resource.examineSelectedInfo(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this12.goods_info = res.data.data;\n          _this12.detail_dialog = true;\n        } else {\n          _this12.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //审批\n    auditFn: function auditFn(type, id) {\n      this.audit_type = type;\n      this.select_id = id;\n      this.refused_dialog = true;\n    },\n    //同意\n    agreeAudit: function agreeAudit(arg) {\n      var _this13 = this;\n\n      resource.affirmSelected(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this13.refused_dialog = false;\n          _this13.allAuditDialog = false;\n\n          _this13.$message.success(res.data.msg); //获取列表\n\n\n          _this13.getGoodsList();\n        } else {\n          _this13.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //拒绝\n    refuseAudit: function refuseAudit(arg) {\n      var _this14 = this;\n\n      resource.refuseSelected(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this14.refused_dialog = false;\n          _this14.allAuditDialog = false;\n\n          _this14.$message.success(res.data.msg); //获取列表\n\n\n          _this14.getGoodsList();\n        } else {\n          _this14.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //点击添加备注\n    addRemark: function addRemark(select_id, remark) {\n      this.select_id = select_id;\n      this.remark = remark ? remark : '';\n      this.remark_dialog = true;\n    },\n    //提交备注\n    confirmRemark: function confirmRemark() {\n      var _this15 = this;\n\n      var arg = {\n        select_id: this.select_id,\n        remark: this.remark\n      };\n      resource.addSelectRemark(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this15.$message.success(res.data.msg);\n\n          _this15.remark_dialog = false; //获取列表\n\n          _this15.getGoodsList();\n        } else {\n          _this15.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //导出\n    exportFn: function exportFn() {\n      var _this16 = this;\n\n      MessageBox.confirm(\"确认导出?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        var arg = {\n          demand_type: _this16.demand_type.join(','),\n          status: _this16.status_id,\n          select_userid: _this16.select_userid.join(','),\n          select_main_dept_id: _this16.select_main_dept_id.join(','),\n          is_outer_user: _this16.is_outer_user,\n          shop_code: _this16.shop_code.join(','),\n          supplier_id: _this16.supplier_ids.join(','),\n          category_id: _this16.category_ids.join(','),\n          market_id: _this16.market_ids.join(','),\n          classification_id: _this16.classification_ids.join(','),\n          shooting_id: _this16.shooting_style_ids.join(','),\n          send_type: _this16.send_type.join(','),\n          start_time: _this16.date && _this16.date.length > 0 ? _this16.date[0] : \"\",\n          end_time: _this16.date && _this16.date.length > 0 ? _this16.date[1] : \"\",\n          i_id: _this16.i_id\n        };\n        resource.deriveSelected(arg).then(function (res) {\n          if (res) {\n            exportPost(\"\\uFEFF\" + res.data, \"已选商品\");\n          }\n        });\n      }).catch(function () {\n        Message({\n          type: \"info\",\n          message: \"取消导出\"\n        });\n      });\n    },\n    //提交拒绝\n    confirmRefused: function confirmRefused() {\n      if (this.audit_type == '1') {\n        //同意\n        if (this.msg == '') {\n          this.$message.warning('请输入同意备注');\n        } else {\n          var arg = {\n            select_id: this.select_id,\n            msg: this.msg\n          }; //同意\n\n          this.agreeAudit(arg);\n        }\n      } else {\n        if (this.err_msg == '') {\n          this.$message.warning('请输入拒绝原因');\n        } else {\n          var _arg2 = {\n            select_id: this.select_id,\n            err_msg: this.err_msg\n          }; //拒绝\n\n          this.refuseAudit(_arg2);\n        }\n      }\n    },\n    //点击编辑\n    editInfo: function editInfo(select_id, i_id, bd_i_id, supplier_ksbm) {\n      this.edit_arg.select_id = select_id;\n      this.edit_arg.i_id = i_id ? i_id.replaceAll(\",\", \";\") : \"\";\n      this.edit_arg.bd_i_id = bd_i_id ? bd_i_id.replaceAll(\",\", \";\") : '';\n      this.edit_arg.supplier_ksbm = supplier_ksbm ? supplier_ksbm.replaceAll(\",\", \";\") : '';\n      this.edit_dialog = true;\n    },\n    //关闭编辑\n    closeEdit: function closeEdit() {\n      this.edit_arg = {\n        select_id: \"\",\n        supplier_ksbm: \"\",\n        i_id: \"\",\n        bd_i_id: \"\"\n      };\n    },\n    //提交编辑\n    commitEdit: function commitEdit() {\n      var _this17 = this;\n\n      if (this.edit_arg.supplier_ksbm.indexOf(\";\") > -1) {\n        this.edit_arg.supplier_ksbm = this.edit_arg.supplier_ksbm.replaceAll(\";\", \",\");\n      }\n\n      if (this.edit_arg.i_id.indexOf(\";\") > -1) {\n        this.edit_arg.i_id = this.edit_arg.i_id.replaceAll(\";\", \",\");\n      }\n\n      if (this.edit_arg.bd_i_id.indexOf(\";\") > -1) {\n        this.edit_arg.bd_i_id = this.edit_arg.bd_i_id.replaceAll(\";\", \",\");\n      }\n\n      resource.examineEditIid(this.edit_arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this17.$message.success(res.data.msg);\n\n          _this17.edit_dialog = false; //获取列表\n\n          _this17.getGoodsList();\n        } else {\n          _this17.$message.warning(res.data.msg);\n        }\n      });\n    },\n    windowOpen: function windowOpen(url, old_url) {\n      if (!old_url || old_url.indexOf('https://pan.baidu.com') == -1) {\n        this.$message.warning('该地址不是网盘地址格式!');\n      } else {\n        window.open(url);\n      }\n    }\n  },\n  components: {\n    TableTitle: TableTitle,\n    PaginationWidget: PaginationWidget\n  }\n};",{"version":3,"mappings":";AA6fA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;EACAA,IADA,kBACA;IACA;MACAC,YADA;MAEAC,cAFA;MAGAC,eAHA;MAGA;MACAC,eAJA;MAIA;MACAC;QACAC,WADA;QAEAC;MAFA,GAGA;QACAD,WADA;QAEAC;MAFA,CAHA,EAMA;QACAD,WADA;QAEAC;MAFA,CANA,EASA;QACAD,WADA;QAEAC;MAFA,CATA,CALA;MAiBA;MACAC,aAlBA;MAkBA;MACAC,aAnBA;MAmBA;MACAC,uBApBA;MAoBA;MACAC,aArBA;MAqBA;MACAC,iBAtBA;MAsBA;MACAC,iBAvBA;MAuBA;MACAC,cAxBA;MAwBA;MACAC,aAzBA;MAyBA;MACAC,iBA1BA;MA0BA;MACAC,gBA3BA;MA2BA;MACAC,aA5BA;MA4BA;MACAC,gBA7BA;MA6BA;MACAC,eA9BA;MA8BA;MACAC,cA/BA;MA+BA;MACAC,cAhCA;MAgCA;MACAC,sBAjCA;MAiCA;MACAC,cAlCA;MAkCA;MACAC,sBAnCA;MAmCA;MACAC,kBApCA;MAoCA;MACAC,aArCA;MAqCA;MACAC,QAtCA;MAsCA;MACAC,aAvCA;MAuCA;MACAC,QAxCA;MAwCA;MACAC,aAzCA;MA0CAC,OA1CA;MA2CAhC,QA3CA;MA2CA;MACAiC,QA5CA;MA6CAC,eA7CA;MA8CAC,oBA9CA;MA8CA;MACAC,cA/CA;MA+CA;MACAC,oBAhDA;MAiDAC,aAjDA;MAiDA;MACAC,UAlDA;MAkDA;MACAC,qBAnDA;MAmDA;MACAC,WApDA;MAoDA;MACAC,sBArDA;MAsDAC,qBAtDA;MAuDAC,aAvDA;MAuDA;MACAC,OAxDA;MAwDA;MACAC,iBAzDA;MAyDA;MACAC,kBA1DA;MA0DA;MACAC;QACAV,aADA;QAEAW,iBAFA;QAGArB,QAHA;QAIAsB;MAJA,CA3DA,CAgEA;;IAhEA;EAkEA,CApEA;EAqEAC,OArEA,qBAqEA;IACA;IACA,4BAFA,CAGA;;IACA,mBAJA,CAKA;;IACA,mBANA,CAOA;;IACA,oBARA,CASA;;IACA,wBAVA,CAWA;;IACA,oBAZA,CAaA;;IACA,sBAdA,CAeA;;IACA,qBAhBA,CAiBA;;IACA,qBAlBA,CAmBA;;IACA;EACA,CA1FA;EA2FAC;IACAnD;MACA;MACA;IACA,CAJA;IAKA;IACA4B;MACA;QACA;UACA;UACA;;QACA;UACA;UACA;;QACA;UACA;UACA;;QACA;UACA;MAXA;IAaA;EApBA,CA3FA;EAiHAwB,SAjHA,uBAiHA;IACAC;EACA,CAnHA;EAoHAC,OApHA,qBAoHA;IACA;IACA;IACAD;EACA,CAxHA;EAyHAE;IACA;IACAC,MAFA,oBAEA;MACA;IACA;EAJA,CAzHA;EA+HAC;IACA;IACAC,QAFA,sBAEA;MAAA;;MACA;QACA;QACA;QACA;QACA,mBACAC,kBACAC,kBADA,GAEAC,iBAFA,GAGA,EAHA,GAIA,IALA;MAMA,CAVA;IAWA,CAdA;IAeA;IACAC,oBAhBA,kCAgBA;MAAA;;MACAC;QACA;UACA;UACA;YACA;UACA,CAFA;UAGA;YACA;UACA,CAFA;QAGA,CARA,MAQA;UACA;QACA;MACA,CAZA;IAaA,CA9BA;IA+BA;IACAC,WAhCA,yBAgCA;MAAA;;MACAD;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAxCA;IAyCA;IACAE,WA1CA,yBA0CA;MAAA;;MACAF;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAlDA;IAmDA;IACAG,YApDA,0BAoDA;MAAA;;MACAH;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CA5DA;IA6DA;IACAI,gBA9DA,8BA8DA;MAAA;;MACAJ;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAtEA;IAuEA;IACAK,YAxEA,0BAwEA;MAAA;;MACAL;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAhFA;IAiFA;IACAM,cAlFA,4BAkFA;MAAA;;MACAN;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CA1FA;IA2FA;IACAO,aA5FA,2BA4FA;MAAA;;MACAP;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CApGA;IAqGA;IACAQ,aAtGA,2BAsGA;MAAA;;MACAR;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CA9GA;IA+GA;IACAS,qBAhHA,iCAgHAC,GAhHA,EAgHA;MACA;IACA,CAlHA;IAmHA;IACAC,YApHA,wBAoHAC,GApHA,EAoHA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CA1HA;IA2HA;IACAC,WA5HA,yBA4HA;MACA;QACA;QACA;MACA;;MACA;IACA,CAlIA;IAmIA;IACAC,QApIA,sBAoIA;MACA;MACA;MACA;MACA;IACA,CAzIA;IA0IA;IACAC,cA3IA,4BA2IA;MACA;MACA;QACAC;MACA,CAFA;;MAGA;QAAA;QACA;UACA;UACA;QACA;;QACA;UACA1C,wBADA;UAEAO;QAFA,EALA,CASA;;QACA;MACA,CAXA,MAWA;QAAA;QACA;UACA;UACA;QACA;;QACA;UACAP,wBADA;UAEAG;QAFA,EALA,CASA;;QACA;MACA;IACA,CAvKA;IAwKA;IACAwC,YAzKA,0BAyKA;MAAA;;MACA;QACA7E,uCADA;QAEA8E,sBAFA;QAGAtE,2CAHA;QAIAF,uDAJA;QAKAG,iCALA;QAMAE,mCANA;QAOAoE,wCAPA;QAQAC,wCARA;QASAC,oCATA;QAUAC,oDAVA;QAWAC,oDAXA;QAYA5D,mCAZA;QAaA6D,iEAbA;QAcAC,+DAdA;QAeA7D,eAfA;QAgBAI,eAhBA;QAiBA0D;MAjBA;MAmBA;MACAC;QACA;UACA;UACA;UACA;UACA;UACA3F;YACA;YACA4F;cACAC;YACA,CAFA;YAGAD;;YACA;cACAA;YACA;;YACA;cACAA;YACA;;YACA;cACAA;YACA;UACA,CAfA;UAgBA;QACA,CAtBA,MAsBA;UACA;QACA;MACA,CA1BA;IA2BA,CAzNA;IA0NA;IACAE,SA3NA,qBA2NAC,CA3NA,EA2NA;MACA,cADA,CAEA;;MACA;IACA,CA/NA;IAgOA;IACAC,YAjOA,wBAiOA1D,SAjOA,EAiOA;MAAA;;MACA;QACAA,oBADA;QAEA2D;MAFA;MAIAN;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAPA;IAQA,CA9OA;IA+OA;IACAO,OAhPA,mBAgPAC,IAhPA,EAgPA5F,EAhPA,EAgPA;MACA;MACA;MACA;IACA,CApPA;IAqPA;IACA6F,UAtPA,sBAsPAC,GAtPA,EAsPA;MAAA;;MACAV;QACA;UACA;UACA;;UACA,uCAHA,CAIA;;;UACA;QACA,CANA,MAMA;UACA;QACA;MACA,CAVA;IAWA,CAlQA;IAmQA;IACAW,WApQA,uBAoQAD,GApQA,EAoQA;MAAA;;MACAV;QACA;UACA;UACA;;UACA,uCAHA,CAIA;;;UACA;QACA,CANA,MAMA;UACA;QACA;MACA,CAVA;IAWA,CAhRA;IAiRA;IACAY,SAlRA,qBAkRAjE,SAlRA,EAkRAC,MAlRA,EAkRA;MACA;MACA;MACA;IACA,CAtRA;IAuRA;IACAiE,aAxRA,2BAwRA;MAAA;;MACA;QACAlE,yBADA;QAEAC;MAFA;MAIAoD;QACA;UACA;;UACA,8BAFA,CAGA;;UACA;QACA,CALA,MAKA;UACA;QACA;MACA,CATA;IAUA,CAvSA;IAwSA;IACAc,QAzSA,sBAySA;MAAA;;MACAC;QACAC,uBADA;QAEAC,sBAFA;QAGAT;MAHA,GAKAU,IALA,CAKA;QACA;UACAzG,0CADA;UAEA8E,yBAFA;UAGAtE,8CAHA;UAIAF,0DAJA;UAKAG,oCALA;UAMAE,sCANA;UAOAoE,2CAPA;UAQAC,2CARA;UASAC,uCATA;UAUAC,uDAVA;UAWAwB,iDAXA;UAYAnF,sCAZA;UAaA6D,0EAbA;UAcAC,wEAdA;UAeA7D;QAfA;QAiBA+D;UACA;YACAoB;UACA;QACA,CAJA;MAKA,CA5BA,EA6BAC,KA7BA,CA6BA;QACAC;UACAd,YADA;UAEAe;QAFA;MAIA,CAlCA;IAmCA,CA7UA;IA8UA;IACAC,cA/UA,4BA+UA;MACA;QAAA;QACA;UACA;QACA,CAFA,MAEA;UACA;YACA7E,yBADA;YAEAO;UAFA,EADA,CAKA;;UACA;QACA;MACA,CAXA,MAWA;QACA;UACA;QACA,CAFA,MAEA;UACA;YACAP,yBADA;YAEAG;UAFA,EADA,CAKA;;UACA;QACA;MACA;IACA,CAvWA;IAwWA;IACA2E,QAzWA,oBAyWA9E,SAzWA,EAyWAV,IAzWA,EAyWAsB,OAzWA,EAyWAD,aAzWA,EAyWA;MACA;MACA;MACA;MACA;MACA;IACA,CA/WA;IAgXA;IACAoE,SAjXA,uBAiXA;MACA;QACA/E,aADA;QAEAW,iBAFA;QAGArB,QAHA;QAIAsB;MAJA;IAMA,CAxXA;IAyXA;IACAoE,UA1XA,wBA0XA;MAAA;;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA3B;QACA;UACA;;UACA,4BAFA,CAGA;;UACA;QACA,CALA,MAKA;UACA;QACA;MACA,CATA;IAUA,CA9YA;IA+YA4B,UA/YA,sBA+YAC,GA/YA,EA+YAC,OA/YA,EA+YA;MACA;QACA;MACA,CAFA,MAEA;QACAnE;MACA;IACA;EArZA,CA/HA;EAshBAoE;IACAC,sBADA;IAEAC;EAFA;AAthBA","names":["data","is_up","loading","demand_list","demand_type","status_list","name","id","status_id","dept_list","select_main_dept_id","user_list","select_userid","is_outer_user","store_list","shop_code","supplier_list","supplier_ids","cate_list","category_ids","market_list","market_ids","style_list","shooting_style_ids","class_list","classification_ids","send_type_list","send_type","i_id","up_type","date","max_height","page","total","button_list","detail_dialog","goods_info","remark_dialog","select_id","remark","refused_dialog","err_msg","multiple_selection","allAuditDialog","audit_type","msg","refuse_remark","edit_dialog","edit_arg","supplier_ksbm","bd_i_id","created","watch","destroyed","window","mounted","computed","domain","methods","onResize","card_box_height","table_title_height","bottom_row_height","getAllDemandSendType","commonResource","getDeptList","getUserList","ajaxViewShop","ajaxSupplierList","ajaxCateList","ajaxMarketList","ajaxStyleList","ajaxClassList","handleSelectionChange","val","checkboxInit","row","allCommitFn","allClose","commitAllAudit","ids","getGoodsList","status","supplier_id","category_id","market_id","classification_id","shooting_style_id","start_time","end_time","pagesize","resource","item","images","checkPage","v","selectedInfo","select_type","auditFn","type","agreeAudit","arg","refuseAudit","addRemark","confirmRemark","exportFn","MessageBox","confirmButtonText","cancelButtonText","then","shooting_id","exportPost","catch","Message","message","confirmRefused","editInfo","closeEdit","commitEdit","windowOpen","url","old_url","components","TableTitle","PaginationWidget"],"sourceRoot":"src/pages/SupplyChain/pages","sources":["chain_audit_page.vue"],"sourcesContent":["<template>\n\t<div class=\"chain_page_content\">\n\t\t<el-card class=\"form_card\">\n\t\t\t<div class=\"up_down_row\" :class=\"{'between':!is_up}\">\n\t\t\t\t<div class=\"search_title\" v-if=\"!is_up\">查询条件</div>\n\t\t\t\t<div class=\"selected_right\" @click=\"is_up = !is_up\">\n\t\t\t\t\t<div>{{is_up?'收起':'展开'}}</div>\n\t\t\t\t\t<img class=\"down_arrow\" :class=\"{'rotate':is_up == true}\" src=\"../../../static/down_arrow.png\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<el-form style=\"margin-top: 10px;\" :inline=\"true\" size=\"mini\" v-show=\"is_up\">\n\t\t\t\t<el-form-item label=\"需求类型：\">\n\t\t\t\t\t<el-select v-model=\"demand_type\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in demand_list\" :key=\"item.name\" :label=\"item.name\" :value=\"item.name\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"需求状态：\">\n\t\t\t\t\t<el-select v-model=\"status_id\" clearable placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in status_list\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"发货类型：\">\n\t\t\t\t\t<el-select v-model=\"send_type\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in send_type_list\" :key=\"item.name\" :label=\"item.name\" :value=\"item.name\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"需求部门：\">\n\t\t\t\t\t<el-select v-model=\"select_main_dept_id\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in dept_list\" :key=\"item.main_dept_id\" :label=\"item.main_dept_name\" :value=\"item.main_dept_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"需求人：\">\n\t\t\t\t\t<el-select v-model=\"select_userid\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in user_list\" :key=\"item.ding_user_id\" :label=\"item.ding_user_name\" :value=\"item.ding_user_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"分类：\">\n\t\t\t\t\t<el-select v-model=\"classification_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in class_list\" :key=\"item.classification_id\" :label=\"item.classification_name\" :value=\"item.classification_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"供应商：\">\n\t\t\t\t\t<el-select v-model=\"supplier_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in supplier_list\" :key=\"item.supplier_id\" :label=\"item.supplier_name\" :value=\"item.supplier_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"类目：\">\n\t\t\t\t\t<el-select v-model=\"category_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in cate_list\" :key=\"item.category_id\" :label=\"item.category_name\" :value=\"item.category_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"拍摄风格：\">\n\t\t\t\t\t<el-select v-model=\"shooting_style_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in style_list\" :key=\"item.shooting_style_id\" :label=\"item.shooting_style_name\" :value=\"item.shooting_style_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"市场：\">\n\t\t\t\t\t<el-select v-model=\"market_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in market_list\" :key=\"item.market_id\" :label=\"item.market_name\" :value=\"item.market_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"是否外部商家：\">\n\t\t\t\t\t<el-select v-model=\"is_outer_user\" clearable placeholder=\"全部\">\n\t\t\t\t\t\t<el-option label=\"是\" :value=\"1\"></el-option>\n\t\t\t\t\t\t<el-option label=\"否\" :value=\"0\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"需求店铺：\">\n\t\t\t\t\t<el-select style=\"width: 330px\" v-model=\"shop_code\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in store_list\" :key=\"item.shop_code\" :label=\"item.shop_name\" :value=\"item.shop_code\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"款式编码：\">\n\t\t\t\t\t<el-input placeholder=\"款式编码\" clearable v-model=\"i_id\">\n\t\t\t\t\t</el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"选款日期：\">\n\t\t\t\t\t<el-date-picker v-model=\"date\" size=\"mini\" type=\"daterange\" unlink-panels value-format=\"yyyy-MM-dd\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" @change=\"up_type = null\">\n\t\t\t\t\t</el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-radio-group v-model=\"up_type\">\n\t\t\t\t\t\t<el-radio :label=\"1\">今日上新</el-radio>\n\t\t\t\t\t\t<el-radio :label=\"3\">三日上新</el-radio>\n\t\t\t\t\t\t<el-radio :label=\"7\">七日上新</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-radio-group>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item class=\"form_item\">\n\t\t\t\t<el-button type=\"primary\" @click=\"checkPage(1)\">查询</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\t</el-card>\n\t<el-card class=\"card_box\" id=\"card_box\">\n\t\t<TableTitle title=\"数据列表\" id=\"table_title\">\n\t\t\t<el-button size=\"mini\" type=\"primary\" v-if=\"button_list.aff == 1\" @click=\"allCommitFn\">批量审核</el-button>\n\t\t\t<el-button size=\"mini\" type=\"primary\" v-if=\"button_list.der == 1\" @click=\"exportFn\">导出</el-button>\n\t\t</TableTitle>\n\t\t<el-table size=\"mini\" :data=\"data\" tooltip-effect=\"dark\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" :max-height=\"max_height\" @selection-change=\"handleSelectionChange\" v-loading=\"loading\">\n\t\t\t<el-table-column type=\"selection\" width=\"55\" fixed :selectable=\"checkboxInit\">\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"款号\" prop=\"style_name\"></el-table-column>\n\t\t\t<el-table-column label=\"款式编码\" width=\"140\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<div class=\"item_row\" v-if=\"scope.row.new_supplier_ksbm\">\n\t\t\t\t\t\t<div class=\"item_label\">供应商：</div>\n\t\t\t\t\t\t<div class=\"item_value\">\n\t\t\t\t\t\t\t<div v-for=\"item in scope.row.new_supplier_ksbm\">{{item}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"item_row\" v-if=\"scope.row.new_i_id\">\n\t\t\t\t\t\t<div class=\"item_label\">普通：</div>\n\t\t\t\t\t\t<div class=\"item_value\">\n\t\t\t\t\t\t\t<div v-for=\"item in scope.row.new_i_id\">{{item}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"item_row\" v-if=\"scope.row.new_bd_i_id\">\n\t\t\t\t\t\t<div class=\"item_label\">BD：</div>\n\t\t\t\t\t\t<div class=\"item_value\">\n\t\t\t\t\t\t\t<div v-for=\"item in scope.row.new_bd_i_id\">{{item}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"对接推单\" prop=\"common_text\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<div v-if=\"scope.row.abutment_type == 0\">否</div>\n\t\t\t\t\t<div v-if=\"scope.row.abutment_type == 1\">是</div>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"图片\" width=\"150\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<div v-if=\"scope.row.images.length == 0\">暂无</div>\n\t\t\t\t\t<el-carousel trigger=\"hover\" indicator-position=\"none\" :autoplay=\"false\" height=\"100px\" v-else>\n\t\t\t\t\t\t<el-carousel-item v-for=\"(item,index) in scope.row.images\" :key=\"index\">\n\t\t\t\t\t\t\t<el-image :z-index=\"2006\" class=\"image\" :src=\"item\" fit=\"scale-down\" :preview-src-list=\"scope.row.images\"></el-image>\n\t\t\t\t\t\t</el-carousel-item>\n\t\t\t\t\t</el-carousel>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"网盘地址\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-button class=\"pre_wrap\" size=\"small\" type=\"text\" @click=\"windowOpen(scope.row.net_disk_address,scope.row.or_net_disk_address)\" v-if=\"scope.row.or_net_disk_address !== ''\">访问链接</el-button>\n\t\t\t\t\t<div v-else></div>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"成本价\" prop=\"cost_price\"></el-table-column>\n\t\t\t<el-table-column label=\"售卖价\" prop=\"selling_price\"></el-table-column>\n\t\t\t<el-table-column label=\"需求人\" prop=\"ding_user_name\"></el-table-column>\n\t\t\t<el-table-column label=\"需求店铺\" prop=\"shop_name\"></el-table-column>\n\t\t\t<el-table-column label=\"需求部门\" prop=\"select_main_dept_name\"></el-table-column>\n\t\t\t<el-table-column label=\"需求日期\" prop=\"demand_date\"></el-table-column>\n\t\t\t<el-table-column label=\"需求类型\" prop=\"demand_type\"></el-table-column>\n\t\t\t<el-table-column label=\"发货类型\" prop=\"send_type\"></el-table-column>\n\t\t\t<el-table-column label=\"提交时间\" prop=\"select_time\"></el-table-column>\n\t\t\t<el-table-column label=\"供应商\" prop=\"supplier_name\"></el-table-column>\n\t\t\t<el-table-column label=\"需求状态\" prop=\"common_text\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<div v-if=\"scope.row.audit_status == 0\">已撤销</div>\n\t\t\t\t\t<div v-if=\"scope.row.audit_status == 1\">待审核</div>\n\t\t\t\t\t<div v-if=\"scope.row.audit_status == 2\">已确认</div>\n\t\t\t\t\t<div v-if=\"scope.row.audit_status == 4\">已拒绝</div>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"审核备注\" prop=\"select_remark\"></el-table-column>\n\t\t\t<el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"button_list.info == 1\" @click=\"selectedInfo(scope.row.select_id)\">查看</el-button>\n\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"button_list.edit_i_id == 1\" @click=\"editInfo(scope.row.select_id,scope.row.i_id,scope.row.bd_i_id,scope.row.supplier_ksbm)\">编辑</el-button>\n\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"scope.row.audit_status == 1 && button_list.aff == 1\" @click=\"auditFn('1',scope.row.select_id)\">确认需求</el-button>\n\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"(scope.row.audit_status == 1 || scope.row.audit_status == 2) && button_list.ref == 1\" @click=\"auditFn('2',scope.row.select_id)\">拒绝需求</el-button>\n\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"button_list.addre == 1\" @click=\"addRemark(scope.row.select_id,scope.row.select_remark)\">备注</el-button>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t</el-table>\n\t\t<PaginationWidget id=\"bottom_row\" :total=\"total\" :page=\"page\" :pagesize=\"100\" @checkPage=\"checkPage\"/>\n\t</el-card>\n\t<!-- 详情弹窗 -->\n\t<el-dialog :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :show-close=\"false\" destroy-on-close :visible.sync=\"detail_dialog\">\n\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t<div>商品详情</div>\n\t\t\t<img class=\"close_icon\" src=\"../../../static/close_icon.png\" @click=\"detail_dialog = false\">\n\t\t</div>\n\t\t<div class=\"dialog_content\">\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">标题</div>\n\t\t\t\t<div class=\"value\">{{goods_info.title}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">款号</div>\n\t\t\t\t<div class=\"value\">{{goods_info.style_name}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">款式编码</div>\n\t\t\t\t<div class=\"value\">\n\t\t\t\t\t<div>普通：{{goods_info.i_id}}</div>\n\t\t\t\t\t<div>BD：{{goods_info.bd_i_id}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">供应商</div>\n\t\t\t\t<div class=\"value\">{{goods_info.supplier_name}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">市场</div>\n\t\t\t\t<div class=\"value\">{{goods_info.market_name}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">提供拍照</div>\n\t\t\t\t<div class=\"value\">{{goods_info.supply_photograph == 1?'是':'否'}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">提供退货</div>\n\t\t\t\t<div class=\"value\">{{goods_info.supply_return_goods == 1?'是':'否'}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">提供换货</div>\n\t\t\t\t<div class=\"value\">{{goods_info.supply_exchange_goods == 1?'是':'否'}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">提供代发</div>\n\t\t\t\t<div class=\"value\">{{goods_info.supply_replace_send == 1?'是':'否'}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">结算方式</div>\n\t\t\t\t<div class=\"value\">{{goods_info.supply_monthly_settlement == 1?'月结':'现结'}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">类目</div>\n\t\t\t\t<div class=\"value\">{{goods_info.category_name}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">分类</div>\n\t\t\t\t<div class=\"value\">{{goods_info.classification_name}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">拍摄风格</div>\n\t\t\t\t<div class=\"value\">{{goods_info.shooting_style_name}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">合作模式</div>\n\t\t\t\t<div class=\"value\">{{goods_info.mode}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">商品说明</div>\n\t\t\t\t<div class=\"value\">{{goods_info.remark}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">面料</div>\n\t\t\t\t<div class=\"value\">{{goods_info.fabric}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">尺码</div>\n\t\t\t\t<div class=\"value\">{{goods_info.size}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">成本价</div>\n\t\t\t\t<div class=\"value\">{{goods_info.cost_price}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">百度网盘</div>\n\t\t\t\t<div class=\"value\">{{goods_info.net_disk_address}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">店铺</div>\n\t\t\t\t<div class=\"value\">{{goods_info.shop_name}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">需求类型</div>\n\t\t\t\t<div class=\"value\">{{goods_info.demand_type}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">发货类型</div>\n\t\t\t\t<div class=\"value\">{{goods_info.send_type}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">需求日期</div>\n\t\t\t\t<div class=\"value\">{{goods_info.demand_date}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">售卖价格</div>\n\t\t\t\t<div class=\"value\">{{goods_info.selling_price}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\">\n\t\t\t\t<div class=\"lable\">选款要求</div>\n\t\t\t\t<div class=\"value\" v-html=\"goods_info.demand_remark\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\" v-if=\"goods_info.audit_status == 2\">\n\t\t\t\t<div class=\"lable\">确认备注</div>\n\t\t\t\t<div class=\"value\">{{goods_info.aff_reason}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"detail_row\" v-if=\"goods_info.audit_status == 4\">\n\t\t\t\t<div class=\"lable\">拒绝原因</div>\n\t\t\t\t<div class=\"value\">{{goods_info.refund_reason}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"detail_dialog = false\">关闭</el-button>\n\t\t</div>\n\t</el-dialog>\n\t<!-- 备注弹窗 -->\n\t<el-dialog :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :show-close=\"false\" destroy-on-close @close=\"remark = ''\" :visible.sync=\"remark_dialog\" width=\"30%\">\n\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t<div>备注</div>\n\t\t\t<img class=\"close_icon\" src=\"../../../static/close_icon.png\" @click=\"remark_dialog = false\">\n\t\t</div>\n\t\t<div class=\"remark_content\">\n\t\t\t<el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入备注\" v-model=\"remark\">\n\t\t\t</el-input>\n\t\t</div>\n\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t<el-button size=\"mini\" @click=\"remark_dialog = false\">关闭</el-button>\n\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"confirmRemark\">提交</el-button>\n\t\t</div>\n\t</el-dialog>\n\t<!-- 单个审批弹窗 -->\n\t<el-dialog :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :show-close=\"false\" destroy-on-close @close=\"allClose\" :visible.sync=\"refused_dialog\" width=\"30%\">\n\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t<div>确认{{`${audit_type == '1'?'同意':'拒绝'}`}}？</div>\n\t\t\t<img class=\"close_icon\" src=\"../../../static/close_icon.png\" @click=\"refused_dialog = false\">\n\t\t</div>\n\t\t<div class=\"remark_content\">\n\t\t\t<div style=\"color: red;margin-bottom: 5px\">（*必填）</div>\n\t\t\t<el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入同意备注\" v-model=\"msg\" v-if=\"audit_type == '1'\">\n\t\t\t</el-input>\n\t\t\t<el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入拒绝原因\" v-model=\"err_msg\" v-if=\"audit_type == '2'\">\n\t\t\t</el-input>\n\t\t</div>\n\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t<el-button size=\"mini\" @click=\"refused_dialog = false\">关闭</el-button>\n\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"confirmRefused\">提交</el-button>\n\t\t</div>\n\t</el-dialog>\n\t<!-- 批量审批 -->\n\t<el-dialog :visible.sync=\"allAuditDialog\" @close=\"allClose\" width=\"30%\">\n\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t<div>批量审批</div>\n\t\t\t<img class=\"close_icon\" src=\"../../../static/close_icon.png\" @click=\"allAuditDialog = false\">\n\t\t</div>\n\t\t<div class=\"down_box\">\n\t\t\t<el-form :inline=\"true\" size=\"mini\">\n\t\t\t\t<el-form-item label=\"类型：\">\n\t\t\t\t\t<el-radio-group v-model=\"audit_type\">\n\t\t\t\t\t\t<el-radio :label=\"1\">同意</el-radio>\n\t\t\t\t\t\t<el-radio :label=\"2\">拒绝</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"同意备注：\" required v-if=\"audit_type == 1\">\n\t\t\t\t\t<el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入同意备注\"\n\t\t\t\t\tv-model=\"msg\">\n\t\t\t\t</el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"拒绝原因：\" required v-if=\"audit_type == 2\">\n\t\t\t\t<el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入拒绝原因\"\n\t\t\t\tv-model=\"refuse_remark\">\n\t\t\t</el-input>\n\t\t</el-form-item>\n\t</el-form>\n</div>\n<div slot=\"footer\" class=\"dialog_footer\">\n\t<el-button size=\"mini\" @click=\"allAuditDialog = false\">取消</el-button>\n\t<el-button size=\"mini\" type=\"primary\" @click=\"commitAllAudit\">确认</el-button>\n</div>\n</el-dialog>\n<!-- 编辑 -->\n<el-dialog :visible.sync=\"edit_dialog\" @close=\"closeEdit\" width=\"30%\">\n\t<div slot=\"title\" class=\"dialog_title\">\n\t\t<div>编辑款式编码</div>\n\t\t<img class=\"close_icon\" src=\"../../../static/close_icon.png\" @click=\"edit_dialog = false\">\n\t</div>\n\t<div class=\"down_box\">\n\t\t<el-form :inline=\"true\" size=\"mini\">\n\t\t\t<el-form-item label=\"供应商款式编码：\">\n\t\t\t\t<el-input type=\"textarea\" autosize placeholder=\"多个请用分号间隔\" v-model=\"edit_arg.supplier_ksbm\">\n\t\t\t\t</el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"款式编码：\">\n\t\t\t\t<el-input type=\"textarea\" autosize placeholder=\"多个请用分号间隔\" v-model=\"edit_arg.i_id\">\n\t\t\t\t</el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"BD款式编码：\">\n\t\t\t\t<el-input type=\"textarea\" autosize placeholder=\"多个请用分号间隔\" v-model=\"edit_arg.bd_i_id\">\n\t\t\t\t</el-input>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\t</div>\n\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t<el-button size=\"mini\" @click=\"edit_dialog = false\">取消</el-button>\n\t\t<el-button size=\"mini\" type=\"primary\" @click=\"commitEdit\">确认</el-button>\n\t</div>\n</el-dialog>\n</div>\n</template>\n<style lang=\"less\" scoped>\n.chain_page_content{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 24rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\t.form_card{\n\t\tmargin-bottom: 16rem;\n\t\t.up_down_row{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t\talign-items: center;\n\t\t\t.search_title{\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t\t.selected_right{\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\t.down_arrow{\n\t\t\t\t\tmargin-left: 5rem;\n\t\t\t\t\ttransform: rotate(-90deg);\n\t\t\t\t\twidth: 14rem;\n\t\t\t\t\theight: 8rem;\n\t\t\t\t}\n\t\t\t\t.rotate{\n\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t.between{\n\t\t\tjustify-content:space-between;\n\t\t}\n\t\t.form_item{\n\t\t\tmargin-bottom:0 !important;\n\t\t}\n\t}\n\t.card_box{\n\t\tflex:1;\n\t\t.image{\n\t\t\twidth: 100px;\n\t\t\theight: 100px;\n\t\t}\n\t\t.item_row{\n\t\t\tdisplay: flex;\n\t\t\t.item_label{\n\t\t\t\twidth: 56px;\n\t\t\t\ttext-align:end;\n\t\t\t}\n\t\t\t.item_value{\n\t\t\t\tflex:1;\n\t\t\t}\n\t\t}\n\t}\n\t.down_box{\n\t\tdisplay:flex;\n\t\tpadding:30rem 0;\n\t\t.upload_box{\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\t.upload_file{\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\topacity: 0;\n\t\t\t}\n\t\t}\n\t}\n\t.dialog_content{\n\t\tmax-height: 450px;\n\t\toverflow-y: scroll;\n\t\t.detail_row{\n\t\t\tborder-bottom:1px solid #F0F0F0;\n\t\t\tdisplay: flex;\n\t\t\tfont-size:14rem;\n\t\t\tcolor: #333333;\n\t\t\t.lable{\n\t\t\t\tborder-right:1px solid #F0F0F0;\n\t\t\t\twidth: 120rem;\n\t\t\t\tpadding:12rem 20rem;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t\t.value{\n\t\t\t\tflex:1;\n\t\t\t\tpadding: 12rem 20rem;\n\t\t\t}\n\t\t}\n\t}\n\t.remark_content{\n\t\tpadding:20rem;\n\t}\n}\n</style>\n<script>\n\timport commonResource from '../../../api/common_resource.js'\n\timport resource from '../../../api/chain_resource.js'\n\timport { getNowDate,getCurrentDate } from \"../../../api/date.js\";\n\timport { exportPost } from \"../../../api/export.js\";\n\n\timport { MessageBox, Message } from \"element-ui\";\n\timport TableTitle from '../components/table_title.vue'\n\timport PaginationWidget from '../../../components/pagination_widget.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tis_up:false,\n\t\t\t\tloading:false,\n\t\t\t\tdemand_list:[],\t\t\t//需求类型\n\t\t\t\tdemand_type:[],\t\t\t//选中的需求类型\n\t\t\t\tstatus_list:[{\n\t\t\t\t\tname:'已撤销',\n\t\t\t\t\tid:0\n\t\t\t\t},{\n\t\t\t\t\tname:'待审核',\n\t\t\t\t\tid:1\n\t\t\t\t},{\n\t\t\t\t\tname:'已确认',\n\t\t\t\t\tid:2\n\t\t\t\t},{\n\t\t\t\t\tname:'已拒绝',\n\t\t\t\t\tid:4\n\t\t\t\t}],\t\t\t\t\t\t//需求状态\n\t\t\t\tstatus_id:\"\",\t\t\t//选中的需求状态\n\t\t\t\tdept_list:[],\t\t\t//所有部门列表\n\t\t\t\tselect_main_dept_id:[], //所有部门列表\n\t\t\t\tuser_list:[],\t\t\t//所有用户列表\n\t\t\t\tselect_userid:[],\t\t//选中的用户列表\n\t\t\t\tis_outer_user:\"\",\t\t//是否外部商家\n\t\t\t\tstore_list:[],\t\t\t//店铺列表\n\t\t\t\tshop_code:[],\t\t\t//选中的店铺\n\t\t\t\tsupplier_list:[],\t\t//供应商列表\n\t\t\t\tsupplier_ids:[],\t\t//选中的供应商\n\t\t\t\tcate_list:[],\t\t\t//类目列表\n\t\t\t\tcategory_ids:[],\t\t//选中的类目\n\t\t\t\tmarket_list:[],\t\t\t//市场列表\n\t\t\t\tmarket_ids:[],\t\t\t//选中的市场\n\t\t\t\tstyle_list:[],\t\t\t//拍摄风格列表\n\t\t\t\tshooting_style_ids:[],\t//选中的拍摄风格\n\t\t\t\tclass_list:[],\t\t\t//分类列表\n\t\t\t\tclassification_ids:[],\t//选中的分类\n\t\t\t\tsend_type_list:[],\t\t//发货类型列表\n\t\t\t\tsend_type:[],\t\t\t//选中的发货类型\n\t\t\t\ti_id:\"\",\t\t\t\t//款式编码\n\t\t\t\tup_type:null,\t\t\t\t\t//上新类型\n\t\t\t\tdate:[],\t\t\t\t//选款日期\n\t\t\t\tmax_height:0,\t\n\t\t\t\tpage:1,\n\t\t\t\tdata:[],\t\t\t\t//获取的数据\n\t\t\t\ttotal:0,\n\t\t\t\tbutton_list:{},\n\t\t\t\tdetail_dialog:false,\t//详情弹窗\n\t\t\t\tgoods_info:{},\t\t\t//详情\n\t\t\t\tremark_dialog:false,\n\t\t\t\tselect_id:\"\",\t\t\t//当前点击的记录ID\n\t\t\t\tremark:\"\",\t\t\t\t//备注内容\n\t\t\t\trefused_dialog:false,\t//拒绝弹窗\n\t\t\t\terr_msg:\"\",\t\t\t\t//拒绝备注\n\t\t\t\tmultiple_selection:[],\n\t\t\t\tallAuditDialog:false,\n\t\t\t\taudit_type:1,\t\t\t//批量审批的类型（1:同意；2:拒绝）\n\t\t\t\tmsg:\"\",\t\t\t\t\t//同意备注\n\t\t\t\trefuse_remark:\"\",\t\t//批量拒绝原因\n\t\t\t\tedit_dialog:false,\t\t//编辑款式编码弹窗\n\t\t\t\tedit_arg:{\n\t\t\t\t\tselect_id:\"\",\n\t\t\t\t\tsupplier_ksbm:\"\",\n\t\t\t\t\ti_id:\"\",\n\t\t\t\t\tbd_i_id:\"\"\n\t\t\t\t},\t\t\t\t\t\t//编辑信息\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\t//获取需求类型和发货类型列表\n\t\t\tthis.getAllDemandSendType();\n\t\t\t//获取部门列表\n\t\t\tthis.getDeptList();\n\t\t\t//获取用户列表\n\t\t\tthis.getUserList();\n\t\t\t//获取所有店铺列表\n\t\t\tthis.ajaxViewShop();\n\t\t\t//获取供应商列表\n\t\t\tthis.ajaxSupplierList();\n    \t\t//获取类目列表\n    \t\tthis.ajaxCateList();\n    \t\t//市场列表\n    \t\tthis.ajaxMarketList();\n    \t\t//拍摄风格列表\n    \t\tthis.ajaxStyleList();\n    \t\t//分类列表\n    \t\tthis.ajaxClassList();\n    \t\t//获取列表\n    \t\tthis.getGoodsList();\n    \t},\n    \twatch:{\n    \t\tis_up:function(n,o){\n    \t\t\t//获取表格最大高度\n    \t\t\tthis.onResize();\n    \t\t},\n    \t\t//上新类型\n    \t\tup_type:function(n,o){\n    \t\t\tswitch(n){\n    \t\t\t\tcase 1:\n    \t\t\t\tthis.date = [getNowDate(),getNowDate()];\n    \t\t\t\tbreak;\n    \t\t\t\tcase 3:\n    \t\t\t\tthis.date = [getCurrentDate(3),getNowDate()];\n    \t\t\t\tbreak;\n    \t\t\t\tcase 7:\n    \t\t\t\tthis.date = [getCurrentDate(7),getNowDate()];\n    \t\t\t\tbreak;\n    \t\t\t\tdefault:\n    \t\t\t\treturn\n    \t\t\t}\n    \t\t}\n    \t},\n    \tdestroyed() {\n    \t\twindow.removeEventListener(\"resize\", () => {});\n    \t},\n    \tmounted() {\n    \t\t//获取表格最大高度\n    \t\tthis.onResize();\n    \t\twindow.addEventListener(\"resize\", this.onResize());\n    \t},\n    \tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n    \t\t//监听屏幕大小变化\n    \t\tonResize() {\n    \t\t\tthis.$nextTick(() => {\n    \t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n    \t\t\t\tlet table_title_height = document.getElementById(\"table_title\").offsetHeight;\n    \t\t\t\tlet bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n    \t\t\t\tthis.max_height =\n    \t\t\t\tcard_box_height -\n    \t\t\t\ttable_title_height -\n    \t\t\t\tbottom_row_height -\n    \t\t\t\t60 +\n    \t\t\t\t\"px\";\n    \t\t\t});\n    \t\t},\n    \t\t//获取需求类型列表\n    \t\tgetAllDemandSendType(){\n    \t\t\tcommonResource.getAllDemandSendType().then(res => {\n    \t\t\t\tif(res.data.code == 1){\n    \t\t\t\t\tlet data = res.data.data;\n    \t\t\t\t\tthis.demand_list = data.filter(item => {\n    \t\t\t\t\t\treturn item.type == 1;\n    \t\t\t\t\t})\n    \t\t\t\t\tthis.send_type_list = data.filter(item => {\n    \t\t\t\t\t\treturn item.type == 2\n    \t\t\t\t\t});\n    \t\t\t\t}else{\n    \t\t\t\t\tthis.$message.warning(res.data.msg);\n    \t\t\t\t}\n    \t\t\t})\n    \t\t},\n    \t\t//获取部门列表\n    \t\tgetDeptList(){\n    \t\t\tcommonResource.getDeptList().then(res => {\n    \t\t\t\tif(res.data.code == 1){\n    \t\t\t\t\tthis.dept_list = res.data.data;\n    \t\t\t\t}else{\n    \t\t\t\t\tthis.$message.warning(res.data.msg);\n    \t\t\t\t}\n    \t\t\t})\n    \t\t},\n    \t\t//获取用户列表\n    \t\tgetUserList(){\n    \t\t\tcommonResource.getUserList().then(res => {\n    \t\t\t\tif(res.data.code == 1){\n    \t\t\t\t\tthis.user_list = res.data.data;\n    \t\t\t\t}else{\n    \t\t\t\t\tthis.$message.warning(res.data.msg);\n    \t\t\t\t}\n    \t\t\t})\n    \t\t},\n    \t\t//获取所有店铺列表\n    \t\tajaxViewShop(){\n    \t\t\tcommonResource.ajaxViewShop().then(res => {\n    \t\t\t\tif(res.data.code == 1){\n    \t\t\t\t\tthis.store_list = res.data.data;\n    \t\t\t\t}else{\n    \t\t\t\t\tthis.$message.warning(res.data.msg);\n    \t\t\t\t}\n    \t\t\t})\n    \t\t},\n    \t\t//获取供应商列表\n    \t\tajaxSupplierList(){\n    \t\t\tcommonResource.ajaxSupplierList().then(res => {\n    \t\t\t\tif(res.data.code == 1){\n    \t\t\t\t\tthis.supplier_list = res.data.data;\n    \t\t\t\t}else{\n    \t\t\t\t\tthis.$message.warning(res.data.msg);\n    \t\t\t\t}\n    \t\t\t})\n    \t\t},\n\t\t\t//获取类目列表\n\t\t\tajaxCateList(){\n\t\t\t\tcommonResource.ajaxCateList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.cate_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//市场列表\n\t\t\tajaxMarketList(){\n\t\t\t\tcommonResource.ajaxMarketList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.market_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//拍摄风格列表\n\t\t\tajaxStyleList(){\n\t\t\t\tcommonResource.ajaxStyleList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.style_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//分类列表\n\t\t\tajaxClassList(){\n\t\t\t\tcommonResource.ajaxClassList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.class_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//切换多选\n\t\t\thandleSelectionChange(val) {\n\t\t\t\tthis.multiple_selection = val;\n\t\t\t},\n\t\t\t//设置不可勾选\n\t\t\tcheckboxInit(row) {\n\t\t\t\tif(row.audit_status != 1) { \n\t\t\t\t\treturn 0 \n\t\t\t\t} else { \n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t},\n\t\t    //批量审批\n\t\t    allCommitFn(){\n\t\t    \tif(this.multiple_selection.length == 0){\n\t\t    \t\tthis.$message.warning('至少选择一条!');\n\t\t    \t\treturn;\n\t\t    \t}\n\t\t    \tthis.allAuditDialog = true;\n\t\t    },\n\t\t    //关闭批量审批\n\t\t    allClose(){\n\t\t    \tthis.audit_type = 1;\n\t\t    \tthis.refuse_remark = \"\";\n\t\t    \tthis.msg = \"\";\n\t\t    \tthis.err_msg = \"\";\n\t\t    },\n\t\t    //提价批量审批\n\t\t    commitAllAudit(){\n\t\t    \tlet ids = [];\n\t\t    \tthis.multiple_selection.map(item => {\n\t\t    \t\tids.push(item.select_id);\n\t\t    \t})\n\t\t    \tif(this.audit_type == 1){\t//同意\n\t\t    \t\tif(this.msg == ''){\n\t\t    \t\t\tthis.$message.warning('请输入同意备注!');\n\t\t    \t\t\treturn;\n\t\t    \t\t}\n\t\t    \t\tlet arg = {\n\t\t    \t\t\tselect_id:ids.join(','),\n\t\t    \t\t\tmsg:this.msg\n\t\t    \t\t}\n\t\t\t\t\t//同意\n\t\t\t\t\tthis.agreeAudit(arg)\n\t\t\t\t}else{\t//拒绝\n\t\t\t\t\tif(this.refuse_remark == ''){\n\t\t\t\t\t\tthis.$message.warning('请输入拒绝原因!');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tselect_id:ids.join(','),\n\t\t\t\t\t\terr_msg:this.refuse_remark\n\t\t\t\t\t}\n\t\t\t\t\t//拒绝\n\t\t\t\t\tthis.refuseAudit(arg)\n\t\t\t\t}\n\t\t\t},\n\t\t\t//获取列表\n\t\t\tgetGoodsList(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tdemand_type:this.demand_type.join(','),\n\t\t\t\t\tstatus:this.status_id,\n\t\t\t\t\tselect_userid:this.select_userid.join(','),\n\t\t\t\t\tselect_main_dept_id:this.select_main_dept_id.join(','),\n\t\t\t\t\tis_outer_user:this.is_outer_user,\n\t\t\t\t\tshop_code:this.shop_code.join(','),\n\t\t\t\t\tsupplier_id:this.supplier_ids.join(','),\n\t\t\t\t\tcategory_id:this.category_ids.join(','),\n\t\t\t\t\tmarket_id:this.market_ids.join(','),\n\t\t\t\t\tclassification_id:this.classification_ids.join(','),\n\t\t\t\t\tshooting_style_id:this.shooting_style_ids.join(','),\n\t\t\t\t\tsend_type:this.send_type.join(','),\n\t\t\t\t\tstart_time:this.date && this.date.length > 0?this.date[0]:\"\",\n\t\t\t\t\tend_time:this.date && this.date.length > 0?this.date[1]:\"\",\n\t\t\t\t\ti_id:this.i_id,\n\t\t\t\t\tpage:this.page,\n\t\t\t\t\tpagesize:100\n\t\t\t\t}\n\t\t\t\tthis.loading = true;\n\t\t\t\tresource.examineList(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.button_list = res.data.data.button_list;\n\t\t\t\t\t\tthis.total = res.data.data.total;\n\t\t\t\t\t\tlet data = res.data.data.data;\n\t\t\t\t\t\tdata.map(item => {\n\t\t\t\t\t\t\tlet images = [];\n\t\t\t\t\t\t\titem.img.map(i => {\n\t\t\t\t\t\t\t\timages.push(this.domain + i);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\titem.images = images;\n\t\t\t\t\t\t\tif(item.i_id){\n\t\t\t\t\t\t\t\titem.new_i_id = item.i_id.split(',')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(item.bd_i_id){\n\t\t\t\t\t\t\t\titem.new_bd_i_id = item.bd_i_id.split(',')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(item.supplier_ksbm){\n\t\t\t\t\t\t\t\titem.new_supplier_ksbm = item.supplier_ksbm.split(',')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.data = data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//切换页码\n\t\t\tcheckPage(v){\n\t\t\t\tthis.page = v;\n\t\t\t\t//获取列表\n\t\t\t\tthis.getGoodsList();\n\t\t\t},\n\t\t\t//获取详情\n\t\t\tselectedInfo(select_id){\n\t\t\t\tlet arg = {\n\t\t\t\t\tselect_id:select_id,\n\t\t\t\t\tselect_type:0\n\t\t\t\t}\n\t\t\t\tresource.examineSelectedInfo(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.goods_info = res.data.data;\n\t\t\t\t\t\tthis.detail_dialog = true;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//审批\n\t\t\tauditFn(type,id){\n\t\t\t\tthis.audit_type = type;\n\t\t\t\tthis.select_id = id;\n\t\t\t\tthis.refused_dialog = true;\n\t\t\t},\n\t\t\t//同意\n\t\t\tagreeAudit(arg){\n\t\t\t\tresource.affirmSelected(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.refused_dialog = false;\n\t\t\t\t\t\tthis.allAuditDialog = false;\n\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//拒绝\n\t\t\trefuseAudit(arg){\n\t\t\t\tresource.refuseSelected(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.refused_dialog = false;\n\t\t\t\t\t\tthis.allAuditDialog = false;\n\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//点击添加备注\n\t\t\taddRemark(select_id,remark){\n\t\t\t\tthis.select_id = select_id;\n\t\t\t\tthis.remark = remark?remark:'';\n\t\t\t\tthis.remark_dialog = true;\n\t\t\t},\n\t\t\t//提交备注\n\t\t\tconfirmRemark(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tselect_id:this.select_id,\n\t\t\t\t\tremark:this.remark\n\t\t\t\t}\n\t\t\t\tresource.addSelectRemark(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\tthis.remark_dialog = false;\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t},\n\t\t\t//导出\n\t\t\texportFn() {\n\t\t\t\tMessageBox.confirm(\"确认导出?\", \"提示\", {\n\t\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\t\tcancelButtonText: \"取消\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\tdemand_type:this.demand_type.join(','),\n\t\t\t\t\t\tstatus:this.status_id,\n\t\t\t\t\t\tselect_userid:this.select_userid.join(','),\n\t\t\t\t\t\tselect_main_dept_id:this.select_main_dept_id.join(','),\n\t\t\t\t\t\tis_outer_user:this.is_outer_user,\n\t\t\t\t\t\tshop_code:this.shop_code.join(','),\n\t\t\t\t\t\tsupplier_id:this.supplier_ids.join(','),\n\t\t\t\t\t\tcategory_id:this.category_ids.join(','),\n\t\t\t\t\t\tmarket_id:this.market_ids.join(','),\n\t\t\t\t\t\tclassification_id:this.classification_ids.join(','),\n\t\t\t\t\t\tshooting_id:this.shooting_style_ids.join(','),\n\t\t\t\t\t\tsend_type:this.send_type.join(','),\n\t\t\t\t\t\tstart_time:this.date && this.date.length > 0?this.date[0]:\"\",\n\t\t\t\t\t\tend_time:this.date && this.date.length > 0?this.date[1]:\"\",\n\t\t\t\t\t\ti_id:this.i_id,\n\t\t\t\t\t};\n\t\t\t\t\tresource.deriveSelected(arg).then((res) => {\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\texportPost(\"\\ufeff\" + res.data, \"已选商品\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tMessage({\n\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\tmessage: \"取消导出\",\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\t//提交拒绝\n\t\t\tconfirmRefused(){\n\t\t\t\tif(this.audit_type == '1'){\t\t//同意\n\t\t\t\t\tif(this.msg == ''){\n\t\t\t\t\t\tthis.$message.warning('请输入同意备注');\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tselect_id:this.select_id,\n\t\t\t\t\t\t\tmsg:this.msg\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//同意\n\t\t\t\t\t\tthis.agreeAudit(arg)\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(this.err_msg == ''){\n\t\t\t\t\t\tthis.$message.warning('请输入拒绝原因');\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tselect_id:this.select_id,\n\t\t\t\t\t\t\terr_msg:this.err_msg\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//拒绝\n\t\t\t\t\t\tthis.refuseAudit(arg)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t//点击编辑\n\t\t\teditInfo(select_id,i_id,bd_i_id,supplier_ksbm){\n\t\t\t\tthis.edit_arg.select_id = select_id;\n\t\t\t\tthis.edit_arg.i_id = i_id?i_id.replaceAll(\",\", \";\"):\"\";\n\t\t\t\tthis.edit_arg.bd_i_id = bd_i_id?bd_i_id.replaceAll(\",\", \";\"):'';\n\t\t\t\tthis.edit_arg.supplier_ksbm = supplier_ksbm?supplier_ksbm.replaceAll(\",\", \";\"):'';\n\t\t\t\tthis.edit_dialog = true;\n\t\t\t},\n\t\t\t//关闭编辑\n\t\t\tcloseEdit(){\n\t\t\t\tthis.edit_arg = {\n\t\t\t\t\tselect_id:\"\",\n\t\t\t\t\tsupplier_ksbm:\"\",\n\t\t\t\t\ti_id:\"\",\n\t\t\t\t\tbd_i_id:\"\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t//提交编辑\n\t\t\tcommitEdit(){\n\t\t\t\tif (this.edit_arg.supplier_ksbm.indexOf(\";\") > -1) {\n\t\t\t\t\tthis.edit_arg.supplier_ksbm = this.edit_arg.supplier_ksbm.replaceAll(\";\", \",\");\n\t\t\t\t}\n\t\t\t\tif (this.edit_arg.i_id.indexOf(\";\") > -1) {\n\t\t\t\t\tthis.edit_arg.i_id = this.edit_arg.i_id.replaceAll(\";\", \",\");\n\t\t\t\t}\n\t\t\t\tif (this.edit_arg.bd_i_id.indexOf(\";\") > -1) {\n\t\t\t\t\tthis.edit_arg.bd_i_id = this.edit_arg.bd_i_id.replaceAll(\";\", \",\");\n\t\t\t\t}\n\t\t\t\tresource.examineEditIid(this.edit_arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\tthis.edit_dialog = false;\n\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\twindowOpen(url,old_url){\n\t\t\t\tif(!old_url || old_url.indexOf('https://pan.baidu.com') == -1){\n\t\t\t\t\tthis.$message.warning('该地址不是网盘地址格式!')\n\t\t\t\t}else{\n\t\t\t\t\twindow.open(url)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomponents:{\n\t\t\tTableTitle,\n\t\t\tPaginationWidget\n\t\t}\n\t}\n</script>\n\n\n\n\n\n\n"]}]}