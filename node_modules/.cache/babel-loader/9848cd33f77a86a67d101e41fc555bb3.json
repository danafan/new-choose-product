{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/choose-product/src/pages/SupplyChain/pages/GoodsPages/edit_goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/pages/SupplyChain/pages/GoodsPages/edit_goods.vue","mtime":1665476221435},{"path":"/Users/fanyulong/project/2022/choose-product/babel.config.js","mtime":1662529345111},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/fanyulong/project/2022/choose-product/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/fanyulong/project/2022/choose-product/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport commonResource from \"../../../../api/common_resource.js\";\nimport resource from \"../../../../api/chain_resource.js\";\nimport UploadFile from \"../../../../components/upload_file.vue\";\nexport default {\n  data: function data() {\n    return {\n      is_detail: false,\n      //是否是详情\n      page_type: '',\n      //页面来源（goods:商品；feekback:反馈）\n      goods_type: \"\",\n      //类型（1:添加；2:编辑；3:查看；4:审核；5：重新提交）\n      supplier_list: [],\n      //供应商列表\n      cate_list: [],\n      //类目列表\n      market_list: [],\n      //市场列表\n      style_list: [],\n      //拍摄风格列表\n      class_list: [],\n      //分类列表\n      preview_image: [],\n      //查看详情的图片列表\n      img_list: [],\n      style_id: \"\",\n      //商品ID\n      arg: {\n        i_id: \"\",\n        //款式编码\n        style_name: \"\",\n        //商品款号\n        supplier_id: \"\",\n        //选中的供应商\n        title: \"\",\n        //标题\n        category_id: \"\",\n        //选中的类目\n        market_id: \"\",\n        //选中的市场\n        shooting_style_id: \"\",\n        //选中的拍摄风格\n        classification_id: \"\",\n        //选中的分类\n        fabric: \"\",\n        //面料\n        mode: \"\",\n        //合作模式\n        cost_price: \"\",\n        //成本价\n        size: \"\",\n        //尺码\n        color: \"\",\n        //颜色\n        hot_style: 0,\n        //爆款\n        sole_style: 0,\n        //独家款\n        data_style: 0,\n        //主推款\n        again_style: 0,\n        //二开款\n        net_disk_address: \"\",\n        //网盘地址\n        shared_disk_address: \"\",\n        //共享盘地址\n        img: [],\n        //图片列表\n        remark: \"\" //备注\n\n      } //可传递的参数\n\n    };\n  },\n  created: function created() {\n    this.is_detail = this.$route.query.goods_type == '3' || this.$route.query.goods_type == '4' ? true : false; //页面来源\n\n    this.page_type = this.$route.query.page_type; //类型\n\n    this.goods_type = this.$route.query.goods_type; //获取数据列表\n\n    this.getInfoList();\n  },\n  computed: {\n    //图片前缀\n    domain: function domain() {\n      return this.$store.state.domain;\n    }\n  },\n  methods: {\n    //获取数据列表\n    getInfoList: function () {\n      var _getInfoList = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.ajaxSupplierList();\n\n              case 2:\n                _context.next = 4;\n                return this.ajaxCateList();\n\n              case 4:\n                _context.next = 6;\n                return this.ajaxMarketList();\n\n              case 6:\n                _context.next = 8;\n                return this.ajaxStyleList();\n\n              case 8:\n                _context.next = 10;\n                return this.ajaxClassList();\n\n              case 10:\n                if (this.goods_type == '2' || this.goods_type == '3' || this.goods_type == '4' || this.goods_type == '5') {\n                  //2:编辑;3:详情；4:审核；5:重新提交\n                  //获取商品详情\n                  this.getGoodsDetail();\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getInfoList() {\n        return _getInfoList.apply(this, arguments);\n      }\n\n      return getInfoList;\n    }(),\n    //获取商品详情\n    getGoodsDetail: function getGoodsDetail() {\n      var _this = this;\n\n      //商品ID\n      this.style_id = this.$route.query.style_id;\n      var arg = {\n        style_id: this.style_id\n      };\n\n      if (this.page_type == 'goods') {\n        //商品管理\n        resource.editGoodsGet(arg).then(function (res) {\n          if (res.data.code == 1) {\n            var data_info = res.data.data;\n            data_info.img.map(function (item) {\n              var img_obj = {\n                urls: item,\n                show_icon: false\n              };\n\n              _this.img_list.push(img_obj);\n\n              _this.preview_image.push(_this.domain + item);\n            });\n\n            for (var key in _this.arg) {\n              for (var k in data_info) {\n                if (key == k) {\n                  //款式编码逗号转分号\n                  if (k == 'i_id' && data_info[k].indexOf(',') > -1) {\n                    data_info[k] = data_info[k].replaceAll(\",\", \";\");\n                  }\n\n                  _this.arg[key] = data_info[k];\n                }\n              }\n            }\n          } else {\n            _this.$message.warning(res.data.msg);\n          }\n        });\n      } else {\n        //反馈管理\n        resource.feedBackEditGoodsGet(arg).then(function (res) {\n          if (res.data.code == 1) {\n            var data_info = res.data.data;\n            data_info.img.map(function (item) {\n              var img_obj = {\n                urls: item,\n                show_icon: false\n              };\n\n              _this.img_list.push(img_obj);\n            });\n\n            for (var key in _this.arg) {\n              for (var k in data_info) {\n                if (key == k) {\n                  //款式编码逗号转分号\n                  if (k == 'i_id' && data_info[k].indexOf(',') > -1) {\n                    data_info[k] = data_info[k].replaceAll(\",\", \";\");\n                  }\n\n                  _this.arg[key] = data_info[k];\n                }\n              }\n            }\n          } else {\n            _this.$message.warning(res.data.msg);\n          }\n        });\n      }\n    },\n    //获取供应商列表\n    ajaxSupplierList: function ajaxSupplierList() {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxSupplierList().then(function (res) {\n          if (res.data.code == 1) {\n            _this2.supplier_list = res.data.data;\n            resolve();\n          } else {\n            _this2.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //获取类目列表\n    ajaxCateList: function ajaxCateList() {\n      var _this3 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxCateList().then(function (res) {\n          if (res.data.code == 1) {\n            _this3.cate_list = res.data.data;\n            resolve();\n          } else {\n            _this3.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //市场列表\n    ajaxMarketList: function ajaxMarketList() {\n      var _this4 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxMarketList().then(function (res) {\n          if (res.data.code == 1) {\n            _this4.market_list = res.data.data;\n            resolve();\n          } else {\n            _this4.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //拍摄风格列表\n    ajaxStyleList: function ajaxStyleList() {\n      var _this5 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxStyleList().then(function (res) {\n          if (res.data.code == 1) {\n            _this5.style_list = res.data.data;\n            resolve();\n          } else {\n            _this5.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //分类列表\n    ajaxClassList: function ajaxClassList() {\n      var _this6 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxClassList().then(function (res) {\n          if (res.data.code == 1) {\n            _this6.class_list = res.data.data;\n            resolve();\n          } else {\n            _this6.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //监听图片列表回调\n    callbackFn: function callbackFn(img_arr) {\n      this.arg.img = img_arr;\n    },\n    //底部提交\n    commitEditGoods: function commitEditGoods() {\n      var _this7 = this;\n\n      if (!this.arg.style_name) {\n        this.$message.warning('请输入商品款号!');\n      } else if (!this.arg.supplier_id) {\n        this.$message.warning('请选择供应商!');\n      } else if (!this.arg.title) {\n        this.$message.warning('请输入标题!');\n      } else if (!this.arg.category_id) {\n        this.$message.warning('请选择类目!');\n      } else if (!this.arg.market_id) {\n        this.$message.warning('请选择市场!');\n      } else if (!this.arg.shooting_style_id) {\n        this.$message.warning('请选择拍摄风格!');\n      } else if (!this.arg.classification_id) {\n        this.$message.warning('请选择分类!');\n      } else if (!this.arg.fabric) {\n        this.$message.warning('请输入面料!');\n      } else if (!this.arg.cost_price) {\n        this.$message.warning('请输入成本价!');\n      } else if (!this.arg.size) {\n        this.$message.warning('请输入尺码!');\n      } else if (!this.arg.color) {\n        this.$message.warning('请输入颜色!');\n      } else {\n        var arg = this.goods_type == '1' ? this.arg : _objectSpread(_objectSpread({}, this.arg), {\n          style_id: this.style_id\n        });\n\n        if (arg.i_id.indexOf(\";\") > -1) {\n          arg.i_id = arg.i_id.replaceAll(\";\", \",\");\n        }\n\n        if (this.goods_type == '1') {\n          //添加\n          resource.addGoods(arg).then(function (res) {\n            if (res.data.code == 1) {\n              _this7.$message.success(res.data.msg);\n\n              _this7.$router.go(-1);\n            } else {\n              _this7.$message.warning(res.data.msg);\n            }\n          });\n        } else {\n          //编辑或重新提交\n          if (this.page_type == 'goods') {\n            //商品管理\n            if (this.goods_type == '5') {\n              arg.type = 1;\n            }\n\n            resource.editGoodsPost(arg).then(function (res) {\n              if (res.data.code == 1) {\n                _this7.$message.success(res.data.msg);\n\n                _this7.$router.go(-1);\n              } else {\n                _this7.$message.warning(res.data.msg);\n              }\n            });\n          } else {\n            //反馈管理\n            resource.feedBackEditGoodsPost(arg).then(function (res) {\n              if (res.data.code == 1) {\n                _this7.$message.success(res.data.msg);\n\n                _this7.$router.go(-1);\n              } else {\n                _this7.$message.warning(res.data.msg);\n              }\n            });\n          }\n        }\n      }\n    },\n    //审批\n    auditFn: function auditFn(type) {\n      var _this8 = this;\n\n      this.$confirm(\"\\u786E\\u8BA4\".concat(type == '1' ? '同意' : '拒绝', \"?\"), '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var arg = {\n          type: type,\n          id: _this8.style_id\n        };\n        resource.auditGoods(arg).then(function (res) {\n          if (res.data.code == 1) {\n            _this8.$message.success(res.data.msg);\n\n            _this8.$router.go(-1);\n          } else {\n            _this8.$message.warning(res.data.msg);\n          }\n        });\n      }).catch(function () {\n        _this8.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    }\n  },\n  components: {\n    UploadFile: UploadFile\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;AAoHA;AACA;AAEA;AACA;EACAA,IADA,kBACA;IACA;MACAC,gBADA;MACA;MACAC,aAFA;MAEA;MACAC,cAHA;MAGA;MACAC,iBAJA;MAIA;MACAC,aALA;MAKA;MACAC,eANA;MAMA;MACAC,cAPA;MAOA;MACAC,cARA;MAQA;MACAC,iBATA;MASA;MACAC,YAVA;MAWAC,YAXA;MAWA;MACAC;QACAC,QADA;QACA;QACAC,cAFA;QAEA;QACAC,eAHA;QAGA;QACAC,SAJA;QAIA;QACAC,eALA;QAKA;QACAC,aANA;QAMA;QACAC,qBAPA;QAOA;QACAC,qBARA;QAQA;QACAC,UATA;QASA;QACAC,QAVA;QAUA;QACAC,cAXA;QAWA;QACAC,QAZA;QAYA;QACAC,SAbA;QAaA;QACAC,YAdA;QAcA;QACAC,aAfA;QAeA;QACAC,aAhBA;QAgBA;QACAC,cAjBA;QAiBA;QACAC,oBAlBA;QAkBA;QACAC,uBAnBA;QAmBA;QACAC,OApBA;QAoBA;QACAC,UArBA,CAqBA;;MArBA,CAZA,CAkCA;;IAlCA;EAoCA,CAtCA;EAuCAC,OAvCA,qBAuCA;IACA,2GADA,CAEA;;IACA,6CAHA,CAIA;;IACA,+CALA,CAMA;;IACA;EACA,CA/CA;EAgDAC;IACA;IACAC,MAFA,oBAEA;MACA;IACA;EAJA,CAhDA;EAsDAC;IACA;IACAC,WAFA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAIA,uBAJA;;cAAA;gBAAA;gBAAA,OAMA,mBANA;;cAAA;gBAAA;gBAAA,OAQA,qBARA;;cAAA;gBAAA;gBAAA,OAUA,oBAVA;;cAAA;gBAAA;gBAAA,OAYA,oBAZA;;cAAA;gBAaA;kBAAA;kBACA;kBACA;gBACA;;cAhBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;IAkBA;IACAC,cAnBA,4BAmBA;MAAA;;MACA;MACA;MACA;QACA5B;MADA;;MAGA;QAAA;QACA6B;UACA;YACA;YACAC;cACA;gBACAC,UADA;gBAEAC;cAFA;;cAIA;;cACA;YACA,CAPA;;YAQA;cACA;gBACA;kBACA;kBACA;oBACAF;kBACA;;kBACA;gBACA;cACA;YACA;UACA,CArBA,MAqBA;YACA;UACA;QACA,CAzBA;MA0BA,CA3BA,MA2BA;QAAA;QACAD;UACA;YACA;YACAC;cACA;gBACAC,UADA;gBAEAC;cAFA;;cAIA;YACA,CANA;;YAOA;cACA;gBACA;kBACA;kBACA;oBACAF;kBACA;;kBACA;gBACA;cACA;YACA;UACA,CApBA,MAoBA;YACA;UACA;QACA,CAxBA;MAyBA;IACA,CA/EA;IAgFA;IACAG,gBAjFA,8BAiFA;MAAA;;MACA;QACAC;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CA5FA;IA6FA;IACAC,YA9FA,0BA8FA;MAAA;;MACA;QACAF;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CAzGA;IA0GA;IACAE,cA3GA,4BA2GA;MAAA;;MACA;QACAH;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CAtHA;IAuHA;IACAG,aAxHA,2BAwHA;MAAA;;MACA;QACAJ;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CAnIA;IAoIA;IACAI,aArIA,2BAqIA;MAAA;;MACA;QACAL;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CAhJA;IAiJA;IACAK,UAlJA,sBAkJAC,OAlJA,EAkJA;MACA;IACA,CApJA;IAqJA;IACAC,eAtJA,6BAsJA;MAAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;UAAA1C;QAAA;;QACA;UACAC;QACA;;QACA;UAAA;UACA4B;YACA;cACA;;cACA;YACA,CAHA,MAGA;cACA;YACA;UACA,CAPA;QAQA,CATA,MASA;UAAA;UACA;YAAA;YACA;cACA5B;YACA;;YACA4B;cACA;gBACA;;gBACA;cACA,CAHA,MAGA;gBACA;cACA;YACA,CAPA;UAQA,CAZA,MAYA;YAAA;YACAA;cACA;gBACA;;gBACA;cACA,CAHA,MAGA;gBACA;cACA;YACA,CAPA;UAQA;QACA;MACA;IACA,CApNA;IAqNA;IACAc,OAtNA,mBAsNAC,IAtNA,EAsNA;MAAA;;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAF;MAHA,GAIAG,IAJA,CAIA;QACA;UACAH,UADA;UAEAI;QAFA;QAIAnB;UACA;YACA;;YACA;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CAjBA,EAiBAoB,KAjBA,CAiBA;QACA;UACAL,YADA;UAEAM;QAFA;MAIA,CAtBA;IAuBA;EA9OA,CAtDA;EAsSAC;IACAC;EADA;AAtSA","names":["data","is_detail","page_type","goods_type","supplier_list","cate_list","market_list","style_list","class_list","preview_image","img_list","style_id","arg","i_id","style_name","supplier_id","title","category_id","market_id","shooting_style_id","classification_id","fabric","mode","cost_price","size","color","hot_style","sole_style","data_style","again_style","net_disk_address","shared_disk_address","img","remark","created","computed","domain","methods","getInfoList","getGoodsDetail","resource","data_info","urls","show_icon","ajaxSupplierList","commonResource","resolve","ajaxCateList","ajaxMarketList","ajaxStyleList","ajaxClassList","callbackFn","img_arr","commitEditGoods","auditFn","type","confirmButtonText","cancelButtonText","then","id","catch","message","components","UploadFile"],"sourceRoot":"src/pages/SupplyChain/pages/GoodsPages","sources":["edit_goods.vue"],"sourcesContent":["<template>\n\t<div class=\"chain_page_content\">\n\t\t<el-card class=\"card_box\">\n\t\t\t<div class=\"form_row\">\n\t\t\t\t<el-form size=\"small\" label-width=\"100px\">\n\t\t\t\t\t<el-form-item label=\"款式编码：\">\n\t\t\t\t\t\t<el-input type=\"textarea\" autosize placeholder=\"多个请用分号间隔\" v-model=\"arg.i_id\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"供应商：\" required>\n\t\t\t\t\t\t<el-select v-model=\"arg.supplier_id\" clearable placeholder=\"请选择供应商\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t<el-option v-for=\"item in supplier_list\" :key=\"item.supplier_id\" :label=\"item.supplier_name\" :value=\"item.supplier_id\">\n\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"类目：\" required>\n\t\t\t\t\t\t<el-select v-model=\"arg.category_id\" clearable placeholder=\"请选择类目\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t<el-option v-for=\"item in cate_list\" :key=\"item.category_id\" :label=\"item.category_name\" :value=\"item.category_id\">\n\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"拍摄风格：\" required>\n\t\t\t\t\t\t<el-select v-model=\"arg.shooting_style_id\" clearable placeholder=\"请选择拍摄风格\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t<el-option v-for=\"item in style_list\" :key=\"item.shooting_style_id\" :label=\"item.shooting_style_name\" :value=\"item.shooting_style_id\">\n\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"面料：\" required>\n\t\t\t\t\t\t<el-input placeholder=\"面料\" v-model=\"arg.fabric\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"成本价：\" required>\n\t\t\t\t\t\t<el-input type=\"number\" placeholder=\"成本价\" v-model=\"arg.cost_price\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"颜色：\" required>\n\t\t\t\t\t\t<el-input placeholder=\"颜色\" v-model=\"arg.color\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t\t<el-form size=\"small\" label-width=\"100px\">\n\t\t\t\t\t<el-form-item label=\"商品款号：\" required>\n\t\t\t\t\t\t<el-input placeholder=\"商品款号\" v-model=\"arg.style_name\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"标题：\" required>\n\t\t\t\t\t\t<el-input placeholder=\"标题\" v-model=\"arg.title\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"市场：\" required>\n\t\t\t\t\t\t<el-select v-model=\"arg.market_id\" clearable placeholder=\"请选择市场\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t<el-option v-for=\"item in market_list\" :key=\"item.market_id\" :label=\"item.market_name\" :value=\"item.market_id\">\n\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"分类：\" required>\n\t\t\t\t\t\t<el-select v-model=\"arg.classification_id\" clearable placeholder=\"请选择分类\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t<el-option v-for=\"item in class_list\" :key=\"item.classification_id\" :label=\"item.classification_name\" :value=\"item.classification_id\">\n\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"合作模式：\">\n\t\t\t\t\t\t<el-input placeholder=\"合作模式\" v-model=\"arg.mode\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"尺码：\" required>\n\t\t\t\t\t\t<el-input placeholder=\"尺码\" v-model=\"arg.size\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t</div>\n\t\t\t<div class=\"form_row margin_bottom\">\n\t\t\t\t<el-checkbox v-model=\"arg.hot_style\" :true-label=\"1\" :false-label=\"0\" :disabled=\"is_detail\">爆款</el-checkbox>\n\t\t\t\t<el-checkbox v-model=\"arg.sole_style\" :true-label=\"1\" :false-label=\"0\" :disabled=\"is_detail\">独家款</el-checkbox>\n\t\t\t\t<el-checkbox v-model=\"arg.data_style\" :true-label=\"1\" :false-label=\"0\" :disabled=\"is_detail\">主推款</el-checkbox>\n\t\t\t\t<el-checkbox v-model=\"arg.again_style\" :true-label=\"1\" :false-label=\"0\" :disabled=\"is_detail\">二开款</el-checkbox>\n\t\t\t</div>\n\t\t\t<div class=\"form_row\">\n\t\t\t\t<el-form size=\"small\" label-width=\"100px\">\n\t\t\t\t\t<el-form-item label=\"网盘地址：\">\n\t\t\t\t\t\t<el-input placeholder=\"网盘地址\" v-model=\"arg.net_disk_address\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t\t<el-form size=\"small\" label-width=\"150px\">\n\t\t\t\t\t<el-form-item label=\"共享盘地址：\">\n\t\t\t\t\t\t<el-input placeholder=\"共享盘地址\" v-model=\"arg.shared_disk_address\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t</div>\n\t\t\t<div class=\"form_row\">\n\t\t\t\t<el-form size=\"small\" label-width=\"100px\">\n\t\t\t\t\t<el-form-item label=\"商品图：\">\n\t\t\t\t\t\t<div v-if=\"is_detail\">\n\t\t\t\t\t\t\t<el-image class=\"card_img\" v-for=\"item in preview_image\" :src=\"item\" fit=\"scale-down\" :preview-src-list=\"preview_image\"></el-image>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<UploadFile :img_list=\"img_list\" :is_multiple=\"true\" :current_num=\"arg.img.length\" :max_num=\"99\" @callbackFn=\"callbackFn\" v-else/>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"备注：\">\n\t\t\t\t\t\t<el-input type=\"textarea\" :rows=\"5\" placeholder=\"请输入备注\" v-model=\"arg.remark\" :disabled=\"is_detail\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-form>\n\t\t\t</div>\n\t\t\t<div class=\"bottom_row\" v-if=\"goods_type == '1' || goods_type == '2' || goods_type == '5'\">\n\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"commitEditGoods\">提交</el-button>\n\t\t\t</div>\n\t\t\t<div class=\"bottom_row\" v-if=\"goods_type == '4'\">\n\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"auditFn('1')\">同意</el-button>\n\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"auditFn('2')\">拒绝</el-button>\n\t\t\t</div>\n\t\t</el-card>\n\t</div>\n</template>\n<script>\n\timport commonResource from '../../../../api/common_resource.js'\n\timport resource from '../../../../api/chain_resource.js'\n\n\timport UploadFile from '../../../../components/upload_file.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tis_detail:false,\t\t//是否是详情\n\t\t\t\tpage_type:'',\t\t\t//页面来源（goods:商品；feekback:反馈）\n\t\t\t\tgoods_type:\"\",\t\t\t//类型（1:添加；2:编辑；3:查看；4:审核；5：重新提交）\n\t\t\t\tsupplier_list:[],\t\t//供应商列表\n\t\t\t\tcate_list:[],\t\t\t//类目列表\n\t\t\t\tmarket_list:[],\t\t\t//市场列表\n\t\t\t\tstyle_list:[],\t\t\t//拍摄风格列表\n\t\t\t\tclass_list:[],\t\t\t//分类列表\n\t\t\t\tpreview_image:[],\t\t//查看详情的图片列表\n\t\t\t\timg_list:[],\t\t\t\n\t\t\t\tstyle_id:\"\",\t\t\t//商品ID\n\t\t\t\targ:{\n\t\t\t\t\ti_id:\"\",\t\t\t\t//款式编码\n\t\t\t\t\tstyle_name:\"\",\t\t\t//商品款号\n\t\t\t\t\tsupplier_id:\"\",\t\t\t//选中的供应商\n\t\t\t\t\ttitle:\"\",\t\t\t\t//标题\n\t\t\t\t\tcategory_id:\"\",\t\t\t//选中的类目\n\t\t\t\t\tmarket_id:\"\",\t\t\t//选中的市场\n\t\t\t\t\tshooting_style_id:\"\",\t//选中的拍摄风格\n\t\t\t\t\tclassification_id:\"\",\t//选中的分类\n\t\t\t\t\tfabric:\"\",\t\t\t\t//面料\n\t\t\t\t\tmode:\"\",\t\t\t\t//合作模式\n\t\t\t\t\tcost_price:\"\",\t\t\t//成本价\n\t\t\t\t\tsize:\"\",\t\t\t\t//尺码\n\t\t\t\t\tcolor:\"\",\t\t\t\t//颜色\n\t\t\t\t\thot_style:0,\t\t\t//爆款\n\t\t\t\t\tsole_style:0,\t\t\t//独家款\n\t\t\t\t\tdata_style:0,\t\t\t//主推款\n\t\t\t\t\tagain_style:0,\t\t\t//二开款\n\t\t\t\t\tnet_disk_address:\"\",\t//网盘地址\n\t\t\t\t\tshared_disk_address:\"\",\t//共享盘地址\n\t\t\t\t\timg:[],\t\t\t\t\t//图片列表\n\t\t\t\t\tremark:\"\",\t\t\t\t//备注\n\t\t\t\t},\t\t\t\t\t\t\t\t\t//可传递的参数\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\tthis.is_detail = this.$route.query.goods_type == '3' || this.$route.query.goods_type == '4'?true:false;\n\t\t\t//页面来源\n\t\t\tthis.page_type = this.$route.query.page_type;\n\t\t\t//类型\n\t\t\tthis.goods_type = this.$route.query.goods_type;\n\t\t\t//获取数据列表\n\t\t\tthis.getInfoList();\n\t\t},\n\t\tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t//获取数据列表\n\t\t\tasync getInfoList(){\n\t\t\t\t//获取供应商列表\n\t\t\t\tawait this.ajaxSupplierList();\n\t\t\t\t//获取类目列表\n\t\t\t\tawait this.ajaxCateList();\n\t\t\t\t//市场列表\n\t\t\t\tawait this.ajaxMarketList();\n\t\t\t\t//拍摄风格列表\n\t\t\t\tawait this.ajaxStyleList();\n\t\t\t\t//分类列表\n\t\t\t\tawait this.ajaxClassList();\n\t\t\t\tif(this.goods_type == '2' || this.goods_type == '3' || this.goods_type == '4' || this.goods_type == '5'){\t//2:编辑;3:详情；4:审核；5:重新提交\n\t\t\t\t\t//获取商品详情\n\t\t\t\t\tthis.getGoodsDetail();\n\t\t\t\t}\n\t\t\t},\n\t\t\t//获取商品详情\n\t\t\tgetGoodsDetail(){\n\t\t\t\t//商品ID\n\t\t\t\tthis.style_id = this.$route.query.style_id;\n\t\t\t\tvar arg = {\n\t\t\t\t\tstyle_id:this.style_id\n\t\t\t\t}\n\t\t\t\tif(this.page_type == 'goods'){\t//商品管理\n\t\t\t\t\tresource.editGoodsGet(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tlet data_info = res.data.data;\n\t\t\t\t\t\t\tdata_info.img.map(item => {\n\t\t\t\t\t\t\t\tlet img_obj = {\n\t\t\t\t\t\t\t\t\turls:item,\n\t\t\t\t\t\t\t\t\tshow_icon:false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.img_list.push(img_obj);\n\t\t\t\t\t\t\t\tthis.preview_image.push(this.domain + item);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tfor(let key in this.arg){\n\t\t\t\t\t\t\t\tfor(let k in data_info){\n\t\t\t\t\t\t\t\t\tif(key == k){\n\t\t\t\t\t\t\t\t\t\t//款式编码逗号转分号\n\t\t\t\t\t\t\t\t\t\tif(k == 'i_id' && data_info[k].indexOf(',') > -1){\n\t\t\t\t\t\t\t\t\t\t\tdata_info[k] = data_info[k].replaceAll(\",\", \";\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tthis.arg[key] = data_info[k];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}else{\t\t//反馈管理\n\t\t\t\t\tresource.feedBackEditGoodsGet(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tlet data_info = res.data.data;\n\t\t\t\t\t\t\tdata_info.img.map(item => {\n\t\t\t\t\t\t\t\tlet img_obj = {\n\t\t\t\t\t\t\t\t\turls:item,\n\t\t\t\t\t\t\t\t\tshow_icon:false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.img_list.push(img_obj);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tfor(let key in this.arg){\n\t\t\t\t\t\t\t\tfor(let k in data_info){\n\t\t\t\t\t\t\t\t\tif(key == k){\n\t\t\t\t\t\t\t\t\t\t//款式编码逗号转分号\n\t\t\t\t\t\t\t\t\t\tif(k == 'i_id' && data_info[k].indexOf(',') > -1){\n\t\t\t\t\t\t\t\t\t\t\tdata_info[k] = data_info[k].replaceAll(\",\", \";\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tthis.arg[key] = data_info[k];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t//获取供应商列表\n\t\t\tajaxSupplierList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxSupplierList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.supplier_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//获取类目列表\n\t\t\tajaxCateList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxCateList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.cate_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//市场列表\n\t\t\tajaxMarketList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxMarketList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.market_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//拍摄风格列表\n\t\t\tajaxStyleList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxStyleList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.style_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//分类列表\n\t\t\tajaxClassList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxClassList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.class_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//监听图片列表回调\n\t\t\tcallbackFn(img_arr) {\n\t\t\t\tthis.arg.img = img_arr;\n\t\t\t},\n\t\t\t//底部提交\n\t\t\tcommitEditGoods(){\n\t\t\t\tif(!this.arg.style_name){\n\t\t\t\t\tthis.$message.warning('请输入商品款号!');\n\t\t\t\t}else if(!this.arg.supplier_id){\n\t\t\t\t\tthis.$message.warning('请选择供应商!');\n\t\t\t\t}else if(!this.arg.title){\n\t\t\t\t\tthis.$message.warning('请输入标题!');\n\t\t\t\t}else if(!this.arg.category_id){\n\t\t\t\t\tthis.$message.warning('请选择类目!');\n\t\t\t\t}else if(!this.arg.market_id){\n\t\t\t\t\tthis.$message.warning('请选择市场!');\n\t\t\t\t}else if(!this.arg.shooting_style_id){\n\t\t\t\t\tthis.$message.warning('请选择拍摄风格!');\n\t\t\t\t}else if(!this.arg.classification_id){\n\t\t\t\t\tthis.$message.warning('请选择分类!');\n\t\t\t\t}else if(!this.arg.fabric){\n\t\t\t\t\tthis.$message.warning('请输入面料!');\n\t\t\t\t}else if(!this.arg.cost_price){\n\t\t\t\t\tthis.$message.warning('请输入成本价!');\n\t\t\t\t}else if(!this.arg.size){\n\t\t\t\t\tthis.$message.warning('请输入尺码!');\n\t\t\t\t}else if(!this.arg.color){\n\t\t\t\t\tthis.$message.warning('请输入颜色!');\n\t\t\t\t}else{\n\t\t\t\t\tvar arg = this.goods_type == '1'?this.arg:{...this.arg,...{style_id:this.style_id}};\n\t\t\t\t\tif (arg.i_id.indexOf(\";\") > -1) {\n\t\t\t\t\t\targ.i_id = arg.i_id.replaceAll(\";\", \",\");\n\t\t\t\t\t}\n\t\t\t\t\tif(this.goods_type == '1'){\t//添加\n\t\t\t\t\t\tresource.addGoods(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\t\t\t//编辑或重新提交\n\t\t\t\t\t\tif(this.page_type == 'goods'){\t//商品管理\n\t\t\t\t\t\t\tif(this.goods_type == '5'){\n\t\t\t\t\t\t\t\targ.type = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresource.editGoodsPost(arg).then(res => {\n\t\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}else{\t\t//反馈管理\n\t\t\t\t\t\t\tresource.feedBackEditGoodsPost(arg).then(res => {\n\t\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t//审批\n\t\t\tauditFn(type){\n\t\t\t\tthis.$confirm(`确认${type == '1'?'同意':'拒绝'}?`, '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet arg = {\n\t\t\t\t\t\ttype:type,\n\t\t\t\t\t\tid:this.style_id\n\t\t\t\t\t}\n\t\t\t\t\tresource.auditGoods(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\tcomponents:{\n\t\t\tUploadFile\n\t\t}\n\t}\n</script>\n<style lang=\"less\" scoped>\n.chain_page_content{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 24rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\t.card_box{\n\t\tflex:1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\toverflow-y: scroll;\n\t\t.form_row{\n\t\t\twidth: 1000rem;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\t.card_img{\n\t\t\t\tmargin-right: 40rem;\n\t\t\t\tmargin-bottom: 20rem;\n\t\t\t\tborder-radius: 2rem;\n\t\t\t\twidth: 160rem;\n\t\t\t\theight: 160rem;\n\t\t\t}\n\t\t}\n\t\t.margin_bottom{\n\t\t\tmargin-bottom: 20px;\n\t\t}\n\t\t.bottom_row{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n}\n</style>"]}]}