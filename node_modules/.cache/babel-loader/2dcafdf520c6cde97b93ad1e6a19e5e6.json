{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/choose-product/src/pages/StyleInfo/gys_edit_goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/pages/StyleInfo/gys_edit_goods.vue","mtime":1680589115000},{"path":"/Users/fanyulong/project/2022/choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/fanyulong/project/2022/choose-product/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/fanyulong/project/2022/choose-product/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport commonResource from \"../../api/common_resource.js\";\nimport resource from \"../../api/supplier_resource.js\";\nimport UploadFile from \"../../components/upload_file.vue\";\nimport GoBack from \"../../components/go_back.vue\";\nimport TableTitle from \"../SupplyChain/components/table_title.vue\";\nexport default {\n  data: function data() {\n    return {\n      table_title: \"\",\n      //顶部标题\n      is_detail: false,\n      //是否是详情\n      goods_type: \"\",\n      //类型（1:添加；2:编辑；3:查看；5：重新提交）\n      cate_list: [],\n      //类目列表\n      market_list: [],\n      //市场列表\n      style_list: [],\n      //拍摄风格列表\n      class_list: [],\n      //分类列表\n      preview_image: [],\n      //查看详情的图片列表\n      preview_bk_image: [],\n      //查看详情的爆款图片列表\n      img_list: [],\n      style_id: \"\",\n      //商品ID\n      price_status: \"\",\n      //调价审核状态\n      edit_price: \"\",\n      max_height: 0,\n      arg: {\n        add_admin_name: \"\",\n        style_name: \"\",\n        //商品款号\n        title: \"\",\n        //标题\n        category_id: \"\",\n        //选中的类目\n        market_id: \"\",\n        //选中的市场\n        classification_id: \"\",\n        //选中的分类\n        fabric: \"\",\n        //面料\n        mode: \"\",\n        //合作模式\n        cost_price: \"\",\n        //成本价\n        price_control: \"\",\n        //控价\n        size: \"\",\n        //尺码\n        color: \"\",\n        //颜色\n        hot_style: 0,\n        //爆款\n        sole_style: 0,\n        //独家款\n        data_style: 0,\n        //主推款\n        again_style: 0,\n        //二开款\n        depth_inventory: 0,\n        //深度库存\n        video_style: 0,\n        //视频款\n        net_disk_address: \"\",\n        //网盘地址\n        img: [],\n        //图片列表\n        remark: \"\" //备注\n\n      },\n      //可传递的参数\n      shooting_style_ids: [],\n      //已选中的拍摄风格\n      default_hot_style: 0,\n      //默认是否爆款\n      default_data_style: 0,\n      //默认是否主推款\n      hot_status: 10,\n      //爆款审核状态\n      data_status: 10,\n      //主推款审核状态\n      depth_inventory_status: 10,\n      //深度库存审核状态\n      video_style_status: 10,\n      //视频款审核状态\n      link_urls: [],\n      //已填写的爆款链接列表\n      inputVisible: false,\n      //是否显示新建链接的输入框\n      inputValue: '',\n      //新建链接的输入框内容\n      bk_img_list: [],\n      //选中的爆款图片列表(可查看)\n      bk_img: [],\n      //选中的爆款图片列表（可传递）\n      kcs: \"\",\n      //库存数\n      tj: \"\",\n      //调价\n      bz: \"\" //备注\n\n    };\n  },\n  created: function created() {\n    //商品ID\n    this.style_id = this.$route.query.style_id;\n    this.is_detail = this.$route.query.goods_type == '3' ? true : false; //类型\n\n    this.goods_type = this.$route.query.goods_type;\n\n    switch (this.goods_type) {\n      case '1':\n        // 添加\n        this.table_title = \"添加商品\";\n        break;\n\n      case '2':\n        // 编辑\n        this.table_title = \"编辑商品\";\n        break;\n\n      case '3':\n        // 商品详情\n        this.table_title = \"商品详情\";\n        break;\n\n      case '5':\n        // 重新提交\n        this.table_title = \"重新提交\";\n        break;\n    } //获取数据列表\n\n\n    this.getInfoList();\n  },\n  computed: {\n    //图片前缀\n    domain: function domain() {\n      return this.$store.state.domain;\n    }\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener(\"resize\", function () {});\n  },\n  mounted: function mounted() {\n    //获取表格最大高度\n    this.onResize();\n    window.addEventListener(\"resize\", this.onResize());\n  },\n  methods: {\n    //监听屏幕大小变化\n    onResize: function onResize() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var card_box_height = document.getElementById(\"card_box\").offsetHeight;\n        var title_height = document.getElementById(\"title_box\").offsetHeight;\n        _this.max_height = card_box_height - title_height - 50 + \"px\";\n      });\n    },\n    //获取数据列表\n    getInfoList: function () {\n      var _getInfoList = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.ajaxCateList();\n\n              case 2:\n                _context.next = 4;\n                return this.ajaxMarketList();\n\n              case 4:\n                _context.next = 6;\n                return this.ajaxStyleList();\n\n              case 6:\n                _context.next = 8;\n                return this.ajaxClassList();\n\n              case 8:\n                if (this.goods_type == '2' || this.goods_type == '3' || this.goods_type == '5') {\n                  //2:编辑;3:详情；5:重新提交\n                  //获取商品详情\n                  this.getGoodsDetail();\n                }\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getInfoList() {\n        return _getInfoList.apply(this, arguments);\n      }\n\n      return getInfoList;\n    }(),\n    //获取商品详情\n    getGoodsDetail: function getGoodsDetail() {\n      var _this2 = this;\n\n      var arg = {\n        style_id: this.style_id\n      };\n\n      if (this.goods_type == '3') {\n        //查看\n        resource.getOnepro(arg).then(function (res) {\n          if (res.data.code == 1) {\n            var data_info = res.data.data; //处理详情\n\n            _this2.setInfo(data_info);\n          } else {\n            _this2.$message.warning(res.data.msg);\n          }\n        });\n      } else if (this.goods_type == '5') {\n        //重新提交\n        resource.returnEditGoodsGet(arg).then(function (res) {\n          if (res.data.code == 1) {\n            var data_info = res.data.data; //处理详情\n\n            _this2.setInfo(data_info);\n          } else {\n            _this2.$message.warning(res.data.msg);\n          }\n        });\n      } else {\n        resource.editProductStyleGet(arg).then(function (res) {\n          if (res.data.code == 1) {\n            var data_info = res.data.data; //处理详情\n\n            _this2.setInfo(data_info);\n          } else {\n            _this2.$message.warning(res.data.msg);\n          }\n        });\n      }\n    },\n    //处理详情\n    setInfo: function setInfo(data_info) {\n      var _this3 = this;\n\n      this.price_status = data_info.price_status;\n      this.edit_price = data_info.edit_price;\n      this.default_hot_style = data_info.hot_style; //默认是否爆款\n\n      this.default_data_style = data_info.data_style; //默认是否主推款\n\n      this.hot_status = data_info.hot_status; //爆款审核状态\n\n      this.data_status = data_info.data_status; //主推款审核状态\n\n      this.depth_inventory_status = data_info.depth_inventory_status; //深度库存审核状态\n\n      this.video_style_status = data_info.video_style_status; //视频款审核状态\n\n      data_info.img.map(function (item) {\n        var img_obj = {\n          urls: item,\n          show_icon: false\n        };\n\n        _this3.img_list.push(img_obj);\n\n        _this3.preview_image.push(_this3.domain + item);\n      });\n      this.link_urls = data_info.hot_url;\n      data_info.hot_img.map(function (item) {\n        var img_obj = {\n          urls: item,\n          show_icon: false\n        };\n\n        _this3.bk_img_list.push(img_obj);\n\n        _this3.preview_bk_image.push(_this3.domain + item);\n      });\n      this.bk_img = data_info.hot_img;\n      this.kcs = data_info.data_num;\n      this.tj = data_info.data_price;\n      this.bz = data_info.data_remark;\n\n      if (data_info.shooting_style_id != '') {\n        var shooting_style_ids = data_info.shooting_style_id.split(',');\n        this.shooting_style_ids = shooting_style_ids.map(function (item) {\n          return parseInt(item);\n        });\n      }\n\n      for (var key in this.arg) {\n        for (var k in data_info) {\n          if (key == k) {\n            this.arg[key] = data_info[k];\n          }\n        }\n      }\n    },\n    //获取类目列表\n    ajaxCateList: function ajaxCateList() {\n      var _this4 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxCateList().then(function (res) {\n          if (res.data.code == 1) {\n            _this4.cate_list = res.data.data;\n            resolve();\n          } else {\n            _this4.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //市场列表\n    ajaxMarketList: function ajaxMarketList() {\n      var _this5 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxMarketList().then(function (res) {\n          if (res.data.code == 1) {\n            _this5.market_list = res.data.data;\n            resolve();\n          } else {\n            _this5.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //拍摄风格列表\n    ajaxStyleList: function ajaxStyleList() {\n      var _this6 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxStyleList().then(function (res) {\n          if (res.data.code == 1) {\n            _this6.style_list = res.data.data;\n            resolve();\n          } else {\n            _this6.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //分类列表\n    ajaxClassList: function ajaxClassList() {\n      var _this7 = this;\n\n      return new Promise(function (resolve) {\n        commonResource.ajaxClassList().then(function (res) {\n          if (res.data.code == 1) {\n            _this7.class_list = res.data.data;\n            resolve();\n          } else {\n            _this7.$message.warning(res.data.msg);\n          }\n        });\n      });\n    },\n    //监听图片列表回调\n    callbackFn: function callbackFn(img_arr) {\n      this.arg.img = img_arr;\n    },\n    //删除当前选中的爆款链接\n    handleClose: function handleClose(url) {\n      this.link_urls.splice(this.link_urls.indexOf(url), 1);\n    },\n    //监听爆款图片列表回调\n    bkCallbackFn: function bkCallbackFn(img_arr) {\n      this.bk_img = img_arr;\n    },\n    //点击新增爆款链接\n    showInput: function showInput() {\n      var _this8 = this;\n\n      this.inputVisible = true;\n      this.$nextTick(function (_) {\n        _this8.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    handleInputConfirm: function handleInputConfirm() {\n      var inputValue = this.inputValue;\n\n      if (inputValue) {\n        this.link_urls.push(inputValue);\n      }\n\n      this.inputVisible = false;\n      this.inputValue = '';\n    },\n    //底部提交\n    commitEditGoods: function commitEditGoods() {\n      var _this9 = this;\n\n      if (!this.arg.style_name) {\n        this.$message.warning('请输入商品款号!');\n      } else if (!this.arg.title) {\n        this.$message.warning('请输入标题!');\n      } else if (!this.arg.category_id) {\n        this.$message.warning('请选择类目!');\n      } else if (!this.arg.market_id) {\n        this.$message.warning('请选择市场!');\n      } else if (!this.arg.mode) {\n        this.$message.warning('请填写合作模式!');\n      } else if (!this.arg.classification_id) {\n        this.$message.warning('请选择分类!');\n      } else if (!this.arg.fabric) {\n        this.$message.warning('请输入面料!');\n      } else if (!this.arg.size) {\n        this.$message.warning('请输入尺码!');\n      } else if (!this.arg.color) {\n        this.$message.warning('请输入颜色!');\n      } else {\n        var arg = this.goods_type == '1' ? this.arg : _objectSpread(_objectSpread({}, this.arg), {\n          style_id: this.style_id\n        });\n        arg.shooting_style_id = this.shooting_style_ids.join(',');\n        arg.hot_url = this.link_urls.join(',');\n        arg.hot_img = this.bk_img.join(',');\n        arg.data_num = this.kcs;\n        arg.data_price = this.tj;\n        arg.data_remark = this.bz;\n        this.$confirm(\"\\u786E\\u8BA4\".concat(this.goods_type == '1' ? '添加' : '编辑', \"\\u6B64\\u5546\\u54C1\\u5417?\"), '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          if (_this9.goods_type == '1') {\n            //添加\n            resource.addProductStyle(arg).then(function (res) {\n              if (res.data.code == 1) {\n                _this9.$message.success(res.data.msg);\n\n                _this9.$router.go(-1);\n              } else {\n                _this9.$message.warning(res.data.msg);\n              }\n            });\n          } else {\n            //编辑或重新提交\n            if (_this9.goods_type == '5') {\n              //重新提交\n              arg.type = 1;\n              resource.returnEditGoodsPost(arg).then(function (res) {\n                if (res.data.code == 1) {\n                  _this9.$message.success(res.data.msg);\n\n                  _this9.$router.go(-1);\n                } else {\n                  _this9.$message.warning(res.data.msg);\n                }\n              });\n            } else if (_this9.goods_type == '2') {\n              //编辑\n              resource.editProductStylePost(arg).then(function (res) {\n                if (res.data.code == 1) {\n                  _this9.$message.success(res.data.msg);\n\n                  _this9.$router.go(-1);\n                } else {\n                  _this9.$message.warning(res.data.msg);\n                }\n              });\n            }\n          }\n        }).catch(function () {\n          _this9.$message({\n            type: 'info',\n            message: '已取消'\n          });\n        });\n      }\n    }\n  },\n  filters: {\n    priceStatus: function priceStatus(e) {\n      var status_str = \"\";\n\n      switch (e) {\n        case 1:\n          status_str = '待审核';\n          break;\n\n        case 2:\n          status_str = '审核通过';\n          break;\n\n        case 3:\n          status_str = '审核拒绝';\n          break;\n      }\n\n      return status_str;\n    }\n  },\n  components: {\n    UploadFile: UploadFile,\n    TableTitle: TableTitle,\n    GoBack: GoBack\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;AA6KA;AACA;AAEA;AACA;AACA;AACA;EACAA,IADA,kBACA;IACA;MACAC,eADA;MACA;MACAC,gBAFA;MAEA;MACAC,cAHA;MAGA;MACAC,aAJA;MAIA;MACAC,eALA;MAKA;MACAC,cANA;MAMA;MACAC,cAPA;MAOA;MACAC,iBARA;MAQA;MACAC,oBATA;MASA;MACAC,YAVA;MAWAC,YAXA;MAWA;MACAC,gBAZA;MAYA;MACAC,cAbA;MAcAC,aAdA;MAeAC;QACAC,kBADA;QAEAC,cAFA;QAEA;QACAC,SAHA;QAGA;QACAC,eAJA;QAIA;QACAC,aALA;QAKA;QACAC,qBANA;QAMA;QACAC,UAPA;QAOA;QACAC,QARA;QAQA;QACAC,cATA;QASA;QACAC,iBAVA;QAUA;QACAC,QAXA;QAWA;QACAC,SAZA;QAYA;QACAC,YAbA;QAaA;QACAC,aAdA;QAcA;QACAC,aAfA;QAeA;QACAC,cAhBA;QAgBA;QACAC,kBAjBA;QAiBA;QACAC,cAlBA;QAkBA;QACAC,oBAnBA;QAmBA;QACAC,OApBA;QAoBA;QACAC,UArBA,CAqBA;;MArBA,CAfA;MAqCA;MACAC,sBAtCA;MAsCA;MACAC,oBAvCA;MAuCA;MACAC,qBAxCA;MAwCA;MACAC,cAzCA;MAyCA;MACAC,eA1CA;MA0CA;MACAC,0BA3CA;MA2CA;MACAC,sBA5CA;MA4CA;MACAC,aA7CA;MA6CA;MACAC,mBA9CA;MA8CA;MACAC,cA/CA;MA+CA;MACAC,eAhDA;MAgDA;MACAC,UAjDA;MAiDA;MACAC,OAlDA;MAkDA;MACAC,MAnDA;MAmDA;MACAC,MApDA,CAoDA;;IApDA;EAsDA,CAxDA;EAyDAC,OAzDA,qBAyDA;IACA;IACA;IACA,oEAHA,CAIA;;IACA;;IACA;MACA;QAAA;QACA;QACA;;MACA;QAAA;QACA;QACA;;MACA;QAAA;QACA;QACA;;MACA;QAAA;QACA;QACA;IAZA,CANA,CAoBA;;;IACA;EACA,CA/EA;EAgFAC;IACA;IACAC,MAFA,oBAEA;MACA;IACA;EAJA,CAhFA;EAsFAC,SAtFA,uBAsFA;IACAC;EACA,CAxFA;EAyFAC,OAzFA,qBAyFA;IACA;IACA;IACAD;EACA,CA7FA;EA8FAE;IACA;IACAC,QAFA,sBAEA;MAAA;;MACA;QACA;QACA;QACA,mBACAC,kBACAC,YADA,GAEA,EAFA,GAGA,IAJA;MAKA,CARA;IASA,CAZA;IAaA;IACAC,WAdA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAgBA,mBAhBA;;cAAA;gBAAA;gBAAA,OAkBA,qBAlBA;;cAAA;gBAAA;gBAAA,OAoBA,oBApBA;;cAAA;gBAAA;gBAAA,OAsBA,oBAtBA;;cAAA;gBAuBA;kBAAA;kBACA;kBACA;gBACA;;cA1BA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;IA4BA;IACAC,cA7BA,4BA6BA;MAAA;;MACA;QACApD;MADA;;MAGA;QAAA;QACAqD;UACA;YACA,8BADA,CAEA;;YACA;UACA,CAJA,MAIA;YACA;UACA;QACA,CARA;MASA,CAVA,MAUA;QAAA;QACAA;UACA;YACA,8BADA,CAEA;;YACA;UACA,CAJA,MAIA;YACA;UACA;QACA,CARA;MASA,CAVA,MAUA;QACAA;UACA;YACA,8BADA,CAEA;;YACA;UACA,CAJA,MAIA;YACA;UACA;QACA,CARA;MASA;IAEA,CAjEA;IAkEA;IACAC,OAnEA,mBAmEAC,SAnEA,EAmEA;MAAA;;MACA;MACA;MAEA,6CAJA,CAIA;;MACA,+CALA,CAKA;;MACA,uCANA,CAMA;;MACA,yCAPA,CAOA;;MACA,+DARA,CAQA;;MACA,uDATA,CASA;;MAEAA;QACA;UACAC,UADA;UAEAC;QAFA;;QAIA;;QACA;MACA,CAPA;MASA;MACAF;QACA;UACAC,UADA;UAEAC;QAFA;;QAIA;;QACA;MACA,CAPA;MAQA;MACA;MACA;MACA;;MAEA;QACA;QACA;UACA;QACA,CAFA;MAGA;;MACA;QACA;UACA;YACA;UACA;QACA;MACA;IACA,CAlHA;IAmHA;IACAC,YApHA,0BAoHA;MAAA;;MACA;QACAC;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CA/HA;IAgIA;IACAC,cAjIA,4BAiIA;MAAA;;MACA;QACAF;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CA5IA;IA6IA;IACAE,aA9IA,2BA8IA;MAAA;;MACA;QACAH;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CAzJA;IA0JA;IACAG,aA3JA,2BA2JA;MAAA;;MACA;QACAJ;UACA;YACA;YACAC;UACA,CAHA,MAGA;YACA;UACA;QACA,CAPA;MAQA,CATA;IAUA,CAtKA;IAuKA;IACAI,UAxKA,sBAwKAC,OAxKA,EAwKA;MACA;IACA,CA1KA;IA2KA;IACAC,WA5KA,uBA4KAC,GA5KA,EA4KA;MACA;IACA,CA9KA;IA+KA;IACAC,YAhLA,wBAgLAH,OAhLA,EAgLA;MACA;IACA,CAlLA;IAmLA;IACAI,SApLA,uBAoLA;MAAA;;MACA;MACA;QACA;MACA,CAFA;IAGA,CAzLA;IA0LAC,kBA1LA,gCA0LA;MACA;;MACA;QACA;MACA;;MACA;MACA;IACA,CAjMA;IAkMA;IACAC,eAnMA,6BAmMA;MAAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;UAAAvE;QAAA;QACAI;QAEAA;QACAA;QACAA;QACAA;QACAA;QACA;UACAoE,uBADA;UAEAC,sBAFA;UAGAC;QAHA,GAIAC,IAJA,CAIA;UACA;YAAA;YACAtB;cACA;gBACA;;gBACA;cACA,CAHA,MAGA;gBACA;cACA;YACA,CAPA;UAQA,CATA,MASA;YAAA;YACA;cAAA;cACAjD;cACAiD;gBACA;kBACA;;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;cACA,CAPA;YAQA,CAVA,MAUA;cAAA;cACAA;gBACA;kBACA;;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;cACA,CAPA;YAQA;UAEA;QACA,CArCA,EAqCAuB,KArCA,CAqCA;UACA;YACAF,YADA;YAEAG;UAFA;QAIA,CA1CA;MA2CA;IACA;EA3QA,CA9FA;EA2WAC;IACAC;MACA;;MACA;QACA;UACAC;UACA;;QACA;UACAA;UACA;;QACA;UACAA;UACA;MATA;;MAWA;IACA;EAfA,CA3WA;EA4XAC;IACAC,sBADA;IAEAC,sBAFA;IAGAC;EAHA;AA5XA","names":["data","table_title","is_detail","goods_type","cate_list","market_list","style_list","class_list","preview_image","preview_bk_image","img_list","style_id","price_status","edit_price","max_height","arg","add_admin_name","style_name","title","category_id","market_id","classification_id","fabric","mode","cost_price","price_control","size","color","hot_style","sole_style","data_style","again_style","depth_inventory","video_style","net_disk_address","img","remark","shooting_style_ids","default_hot_style","default_data_style","hot_status","data_status","depth_inventory_status","video_style_status","link_urls","inputVisible","inputValue","bk_img_list","bk_img","kcs","tj","bz","created","computed","domain","destroyed","window","mounted","methods","onResize","card_box_height","title_height","getInfoList","getGoodsDetail","resource","setInfo","data_info","urls","show_icon","ajaxCateList","commonResource","resolve","ajaxMarketList","ajaxStyleList","ajaxClassList","callbackFn","img_arr","handleClose","url","bkCallbackFn","showInput","handleInputConfirm","commitEditGoods","confirmButtonText","cancelButtonText","type","then","catch","message","filters","priceStatus","status_str","components","UploadFile","TableTitle","GoBack"],"sourceRoot":"src/pages/StyleInfo","sources":["gys_edit_goods.vue"],"sourcesContent":["<template>\n\t<div class=\"chain_page_content\">\n\t\t<el-card class=\"card_box\" id=\"card_box\">\n\t\t\t<TableTitle :title=\"table_title\" id=\"title_box\">\n\t\t\t\t<GoBack/>\n\t\t\t</TableTitle>\n\t\t\t<div class=\"scroll_box\" :style=\"{height:max_height}\">\n\t\t\t\t<div class=\"form_row\">\n\t\t\t\t\t<el-form size=\"small\" label-width=\"100px\" style=\"width:50%\">\n\t\t\t\t\t\t<el-form-item label=\"提交人：\" v-if=\"is_detail\">\n\t\t\t\t\t\t\t<div>{{arg.add_admin_name}}</div>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"类目：\" required>\n\t\t\t\t\t\t\t<el-select v-model=\"arg.category_id\" clearable placeholder=\"请选择类目\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in cate_list\" :key=\"item.category_id\" :label=\"item.category_name\" :value=\"item.category_id\">\n\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"拍摄风格：\">\n\t\t\t\t\t\t\t<el-select v-model=\"shooting_style_ids\" multiple filterable clearable placeholder=\"请选择拍摄风格\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in style_list\" :key=\"item.shooting_style_id\" :label=\"item.shooting_style_name\" :value=\"item.shooting_style_id\">\n\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"面料：\" required>\n\t\t\t\t\t\t\t<el-input placeholder=\"面料\" v-model=\"arg.fabric\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"成本价：\" required>\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"arg.cost_price\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"控价：\">\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"arg.price_control\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"网盘地址：\">\n\t\t\t\t\t\t\t<el-input :placeholder=\"is_detail?'':'网盘地址'\" v-model=\"arg.net_disk_address\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"备注：\">\n\t\t\t\t\t\t\t<el-input type=\"textarea\" :rows=\"5\" :placeholder=\"is_detail?'':'请输入备注'\" v-model=\"arg.remark\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"调价状态：\" v-if=\"!!price_status\">\n\t\t\t\t\t\t\t{{price_status | priceStatus}}\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"修改后价格：\" v-if=\"price_status != 0 && !!edit_price\">\n\t\t\t\t\t\t\t{{edit_price}}\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"尺码：\" required>\n\t\t\t\t\t\t\t<el-input placeholder=\"尺码\" v-model=\"arg.size\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"颜色：\" required>\n\t\t\t\t\t\t\t<el-input placeholder=\"颜色\" v-model=\"arg.color\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t\t<el-form size=\"small\" label-width=\"100px\" style=\"width:50%\">\n\t\t\t\t\t\t<el-form-item label=\"商品款号：\" required>\n\t\t\t\t\t\t\t<el-input placeholder=\"商品款号\" style=\"width:190px\" v-model=\"arg.style_name\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"标题：\" required>\n\t\t\t\t\t\t\t<el-input placeholder=\"标题\" v-model=\"arg.title\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"市场：\" required>\n\t\t\t\t\t\t\t<el-select v-model=\"arg.market_id\" clearable placeholder=\"请选择市场\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in market_list\" :key=\"item.market_id\" :label=\"item.market_name\" :value=\"item.market_id\">\n\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"分类：\" required>\n\t\t\t\t\t\t\t<el-select v-model=\"arg.classification_id\" clearable placeholder=\"请选择分类\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in class_list\" :key=\"item.classification_id\" :label=\"item.classification_name\" :value=\"item.classification_id\">\n\t\t\t\t\t\t\t\t</el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"合作模式：\" required>\n\t\t\t\t\t\t\t<el-input :placeholder=\"is_detail?'':'合作模式'\" style=\"width:190px\" v-model=\"arg.mode\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<el-form-item label=\"爆款：\">\n\t\t\t\t\t\t\t<el-radio-group v-model=\"arg.hot_style\" :disabled=\"is_detail || hot_status === 0\">\n\t\t\t\t\t\t\t\t<el-radio :label=\"1\">是</el-radio>\n\t\t\t\t\t\t\t\t<el-radio :label=\"0\">否</el-radio>\n\t\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"爆款链接：\" v-if=\"arg.hot_style\">\n\t\t\t\t\t\t\t<div style=\"display: flex;flex-wrap: wrap\">\n\t\t\t\t\t\t\t\t<div :key=\"url\" v-for=\"url in link_urls\">\n\t\t\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" :content=\"url\" placement=\"top-start\">\n\t\t\t\t\t\t\t\t\t\t<el-tag size=\"small\" :closable=\"!is_detail && default_hot_style === 0\" :disable-transitions=\"false\" @close=\"handleClose(url)\">\n\t\t\t\t\t\t\t\t\t\t\t{{url}}\n\t\t\t\t\t\t\t\t\t\t</el-tag>\n\t\t\t\t\t\t\t\t\t</el-tooltip>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<el-input class=\"input-new-tag\" v-if=\"inputVisible\" v-model=\"inputValue\" ref=\"saveTagInput\" size=\"small\" @keyup.enter.native=\"handleInputConfirm\" @blur=\"handleInputConfirm\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t<el-button size=\"mini\" v-if=\"!inputVisible && !is_detail && default_hot_style === 0\" type=\"primary\" icon=\"el-icon-plus\" @click=\"showInput\">新增</el-button>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"爆款图片：\" v-if=\"arg.hot_style\">\n\t\t\t\t\t\t\t<div v-if=\"is_detail || default_hot_style === 1\">\n\t\t\t\t\t\t\t\t<el-image class=\"bk_card_img\" v-for=\"item in preview_bk_image\" :src=\"item\" fit=\"scale-down\" :preview-src-list=\"preview_bk_image\"></el-image>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<UploadFile :img_list=\"bk_img_list\" :is_multiple=\"true\" :current_num=\"bk_img.length\" :size=\"80\" :max_num=\"9\" @callbackFn=\"bkCallbackFn\" v-else/>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"主推款：\">\n\t\t\t\t\t\t\t<el-radio-group v-model=\"arg.data_style\" :disabled=\"is_detail || data_status === 0\">\n\t\t\t\t\t\t\t\t<el-radio :label=\"1\">是</el-radio>\n\t\t\t\t\t\t\t\t<el-radio :label=\"0\">否</el-radio>\n\t\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"库存数：\" v-if=\"arg.data_style\">\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"kcs\" :disabled=\"is_detail || default_data_style === 1\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"调价：\" v-if=\"arg.data_style\">\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"tj\" :disabled=\"is_detail || default_data_style === 1\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"备注：\" v-if=\"arg.data_style\">\n\t\t\t\t\t\t\t<el-input type=\"textarea\" :rows=\"3\" :placeholder=\"is_detail?'':'请输入备注'\" v-model=\"bz\" :disabled=\"is_detail || default_data_style === 1\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"独家款：\">\n\t\t\t\t\t\t\t<el-radio-group v-model=\"arg.sole_style\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t\t<el-radio :label=\"1\">是</el-radio>\n\t\t\t\t\t\t\t\t<el-radio :label=\"0\">否</el-radio>\n\t\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"自主款：\">\n\t\t\t\t\t\t\t<el-radio-group v-model=\"arg.again_style\" :disabled=\"is_detail\">\n\t\t\t\t\t\t\t\t<el-radio :label=\"1\">是</el-radio>\n\t\t\t\t\t\t\t\t<el-radio :label=\"0\">否</el-radio>\n\t\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"深度库存 ：\">\n\t\t\t\t\t\t\t<el-radio-group v-model=\"arg.depth_inventory\" :disabled=\"is_detail || depth_inventory_status === 0\">\n\t\t\t\t\t\t\t\t<el-radio :label=\"1\">是</el-radio>\n\t\t\t\t\t\t\t\t<el-radio :label=\"0\">否</el-radio>\n\t\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item label=\"视频款：\">\n\t\t\t\t\t\t\t<el-radio-group v-model=\"arg.video_style\" :disabled=\"is_detail || video_style_status === 0\">\n\t\t\t\t\t\t\t\t<el-radio :label=\"1\">是</el-radio>\n\t\t\t\t\t\t\t\t<el-radio :label=\"0\">否</el-radio>\n\t\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form_row\">\n\t\t\t\t\t<el-form size=\"small\" label-width=\"100px\">\n\t\t\t\t\t\t<el-form-item label=\"商品图：\">\n\t\t\t\t\t\t\t<div v-if=\"is_detail\">\n\t\t\t\t\t\t\t\t<el-image class=\"card_img\" v-for=\"item in preview_image\" :src=\"item\" fit=\"scale-down\" :preview-src-list=\"preview_image\"></el-image>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<UploadFile :is_main=\"true\" :img_list=\"img_list\" :is_multiple=\"true\" :current_num=\"arg.img.length\" :max_num=\"99\" @callbackFn=\"callbackFn\" v-else/>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bottom_row\" v-if=\"goods_type == '1' || goods_type == '2' || goods_type == '5'\">\n\t\t\t\t\t<el-button size=\"small\" type=\"primary\" @click=\"commitEditGoods\">提交</el-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-card>\n\t</div>\n</template>\n<script>\n\timport commonResource from '../../api/common_resource.js'\n\timport resource from '../../api/supplier_resource.js'\n\n\timport UploadFile from '../../components/upload_file.vue'\n\timport GoBack from '../../components/go_back.vue'\n\timport TableTitle from '../SupplyChain/components/table_title.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\ttable_title:\"\",\t\t\t//顶部标题\n\t\t\t\tis_detail:false,\t\t//是否是详情\n\t\t\t\tgoods_type:\"\",\t\t\t//类型（1:添加；2:编辑；3:查看；5：重新提交）\n\t\t\t\tcate_list:[],\t\t\t//类目列表\n\t\t\t\tmarket_list:[],\t\t\t//市场列表\n\t\t\t\tstyle_list:[],\t\t\t//拍摄风格列表\n\t\t\t\tclass_list:[],\t\t\t//分类列表\n\t\t\t\tpreview_image:[],\t\t//查看详情的图片列表\n\t\t\t\tpreview_bk_image:[],\t//查看详情的爆款图片列表\n\t\t\t\timg_list:[],\t\t\t\n\t\t\t\tstyle_id:\"\",\t\t\t//商品ID\n\t\t\t\tprice_status:\"\",\t\t//调价审核状态\n\t\t\t\tedit_price:\"\",\n\t\t\t\tmax_height:0,\n\t\t\t\targ:{\n\t\t\t\t\tadd_admin_name:\"\",\n\t\t\t\t\tstyle_name:\"\",\t\t\t//商品款号\n\t\t\t\t\ttitle:\"\",\t\t\t\t//标题\n\t\t\t\t\tcategory_id:\"\",\t\t\t//选中的类目\n\t\t\t\t\tmarket_id:\"\",\t\t\t//选中的市场\n\t\t\t\t\tclassification_id:\"\",\t//选中的分类\n\t\t\t\t\tfabric:\"\",\t\t\t\t//面料\n\t\t\t\t\tmode:\"\",\t\t\t\t//合作模式\n\t\t\t\t\tcost_price:\"\",\t\t\t//成本价\n\t\t\t\t\tprice_control:\"\",\t\t//控价\n\t\t\t\t\tsize:\"\",\t\t\t\t//尺码\n\t\t\t\t\tcolor:\"\",\t\t\t\t//颜色\n\t\t\t\t\thot_style:0,\t\t\t//爆款\n\t\t\t\t\tsole_style:0,\t\t\t//独家款\n\t\t\t\t\tdata_style:0,\t\t\t//主推款\n\t\t\t\t\tagain_style:0,\t\t\t//二开款\n\t\t\t\t\tdepth_inventory:0,\t\t//深度库存\n\t\t\t\t\tvideo_style:0,\t\t\t//视频款\n\t\t\t\t\tnet_disk_address:\"\",\t//网盘地址\n\t\t\t\t\timg:[],\t\t\t\t\t//图片列表\n\t\t\t\t\tremark:\"\",\t\t\t\t//备注\n\t\t\t\t},\t\t\t\t\t\t\t//可传递的参数\n\t\t\t\tshooting_style_ids:[],\t\t//已选中的拍摄风格\n\t\t\t\tdefault_hot_style:0,\t\t//默认是否爆款\n\t\t\t\tdefault_data_style:0,\t\t//默认是否主推款\n\t\t\t\thot_status:10,\t\t\t\t//爆款审核状态\n\t\t\t\tdata_status:10,\t\t\t\t//主推款审核状态\n\t\t\t\tdepth_inventory_status:10,\t//深度库存审核状态\n\t\t\t\tvideo_style_status:10,\t\t//视频款审核状态\n\t\t\t\tlink_urls: [],\t\t\t\t//已填写的爆款链接列表\n\t\t\t\tinputVisible: false,\t\t//是否显示新建链接的输入框\n\t\t\t\tinputValue: '',\t\t\t\t//新建链接的输入框内容\n\t\t\t\tbk_img_list:[],\t\t\t\t//选中的爆款图片列表(可查看)\n\t\t\t\tbk_img:[],\t\t\t\t\t//选中的爆款图片列表（可传递）\n\t\t\t\tkcs:\"\",\t\t\t\t\t\t//库存数\n\t\t\t\ttj:\"\",\t\t\t\t\t\t//调价\n\t\t\t\tbz:\"\",\t\t\t\t\t\t//备注\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\t//商品ID\n\t\t\tthis.style_id = this.$route.query.style_id;\n\t\t\tthis.is_detail = this.$route.query.goods_type == '3'?true:false;\n\t\t\t//类型\n\t\t\tthis.goods_type = this.$route.query.goods_type;\n\t\t\tswitch(this.goods_type){\n\t\t\t\tcase '1': // 添加\n\t\t\t\tthis.table_title = \"添加商品\";\n\t\t\t\tbreak;\n\t\t\t\tcase '2': // 编辑\n\t\t\t\tthis.table_title = \"编辑商品\";\n\t\t\t\tbreak;\n\t\t\t\tcase '3': // 商品详情\n\t\t\t\tthis.table_title = \"商品详情\";\n\t\t\t\tbreak;\n\t\t\t\tcase '5': // 重新提交\n\t\t\t\tthis.table_title = \"重新提交\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//获取数据列表\n\t\t\tthis.getInfoList();\n\t\t},\n\t\tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t}\n\t\t},\n\t\tdestroyed() {\n\t\t\twindow.removeEventListener(\"resize\", () => {});\n\t\t},\n\t\tmounted() {\n    \t\t//获取表格最大高度\n    \t\tthis.onResize();\n    \t\twindow.addEventListener(\"resize\", this.onResize());\n    \t},\n    \tmethods: {\n\t\t\t//监听屏幕大小变化\n\t\t\tonResize() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n\t\t\t\t\tlet title_height = document.getElementById(\"title_box\").offsetHeight;\n\t\t\t\t\tthis.max_height =\n\t\t\t\t\tcard_box_height -\n\t\t\t\t\ttitle_height -\n\t\t\t\t\t50 +\n\t\t\t\t\t\"px\";\n\t\t\t\t});\n\t\t\t},\n\t\t\t//获取数据列表\n\t\t\tasync getInfoList(){\n\t\t\t\t//获取类目列表\n\t\t\t\tawait this.ajaxCateList();\n\t\t\t\t//市场列表\n\t\t\t\tawait this.ajaxMarketList();\n\t\t\t\t//拍摄风格列表\n\t\t\t\tawait this.ajaxStyleList();\n\t\t\t\t//分类列表\n\t\t\t\tawait this.ajaxClassList();\n\t\t\t\tif(this.goods_type == '2' || this.goods_type == '3' || this.goods_type == '5'){\t//2:编辑;3:详情；5:重新提交\n\t\t\t\t\t//获取商品详情\n\t\t\t\t\tthis.getGoodsDetail();\n\t\t\t\t}\n\t\t\t},\n\t\t\t//获取商品详情\n\t\t\tgetGoodsDetail(){\n\t\t\t\tvar arg = {\n\t\t\t\t\tstyle_id:this.style_id\n\t\t\t\t}\n\t\t\t\tif(this.goods_type == '3'){\t//查看\n\t\t\t\t\tresource.getOnepro(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tlet data_info = res.data.data;\n\t\t\t\t\t\t\t//处理详情\n\t\t\t\t\t\t\tthis.setInfo(data_info);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}else if(this.goods_type == '5'){\t//重新提交\n\t\t\t\t\tresource.returnEditGoodsGet(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tlet data_info = res.data.data;\n\t\t\t\t\t\t\t//处理详情\n\t\t\t\t\t\t\tthis.setInfo(data_info);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\tresource.editProductStyleGet(arg).then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tlet data_info = res.data.data;\n\t\t\t\t\t\t\t//处理详情\n\t\t\t\t\t\t\tthis.setInfo(data_info);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t},\n\t\t\t//处理详情\n\t\t\tsetInfo(data_info){\n\t\t\t\tthis.price_status = data_info.price_status;\n\t\t\t\tthis.edit_price = data_info.edit_price;\n\n\t\t\t\tthis.default_hot_style = data_info.hot_style;//默认是否爆款\n\t\t\t\tthis.default_data_style = data_info.data_style;\t//默认是否主推款\n\t\t\t\tthis.hot_status = data_info.hot_status; //爆款审核状态\n\t\t\t\tthis.data_status = data_info.data_status; //主推款审核状态\n\t\t\t\tthis.depth_inventory_status = data_info.depth_inventory_status;\t//深度库存审核状态\n\t\t\t\tthis.video_style_status = data_info.video_style_status;\t//视频款审核状态\n\n\t\t\t\tdata_info.img.map(item => {\n\t\t\t\t\tlet img_obj = {\n\t\t\t\t\t\turls:item,\n\t\t\t\t\t\tshow_icon:false\n\t\t\t\t\t}\n\t\t\t\t\tthis.img_list.push(img_obj);\n\t\t\t\t\tthis.preview_image.push(this.domain + item);\n\t\t\t\t})\n\n\t\t\t\tthis.link_urls = data_info.hot_url;\n\t\t\t\tdata_info.hot_img.map(item => {\n\t\t\t\t\tlet img_obj = {\n\t\t\t\t\t\turls:item,\n\t\t\t\t\t\tshow_icon:false\n\t\t\t\t\t}\n\t\t\t\t\tthis.bk_img_list.push(img_obj);\n\t\t\t\t\tthis.preview_bk_image.push(this.domain + item);\n\t\t\t\t})\n\t\t\t\tthis.bk_img = data_info.hot_img;\n\t\t\t\tthis.kcs = data_info.data_num;\n\t\t\t\tthis.tj = data_info.data_price;\n\t\t\t\tthis.bz = data_info.data_remark;\n\n\t\t\t\tif(data_info.shooting_style_id != ''){\n\t\t\t\t\tlet shooting_style_ids = data_info.shooting_style_id.split(',');\n\t\t\t\t\tthis.shooting_style_ids = shooting_style_ids.map(item => {\n\t\t\t\t\t\treturn parseInt(item);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tfor(let key in this.arg){\n\t\t\t\t\tfor(let k in data_info){\n\t\t\t\t\t\tif(key == k){\n\t\t\t\t\t\t\tthis.arg[key] = data_info[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t//获取类目列表\n\t\t\tajaxCateList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxCateList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.cate_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//市场列表\n\t\t\tajaxMarketList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxMarketList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.market_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//拍摄风格列表\n\t\t\tajaxStyleList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxStyleList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.style_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//分类列表\n\t\t\tajaxClassList(){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tcommonResource.ajaxClassList().then(res => {\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.class_list = res.data.data;\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t//监听图片列表回调\n\t\t\tcallbackFn(img_arr) {\n\t\t\t\tthis.arg.img = img_arr;\n\t\t\t},\n\t\t\t//删除当前选中的爆款链接\n\t\t\thandleClose(url) {\n\t\t\t\tthis.link_urls.splice(this.link_urls.indexOf(url), 1);\n\t\t\t},\n\t\t\t//监听爆款图片列表回调\n\t\t\tbkCallbackFn(img_arr){\n\t\t\t\tthis.bk_img = img_arr;\n\t\t\t},\n\t\t\t//点击新增爆款链接\n\t\t\tshowInput() {\n\t\t\t\tthis.inputVisible = true;\n\t\t\t\tthis.$nextTick(_ => {\n\t\t\t\t\tthis.$refs.saveTagInput.$refs.input.focus();\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleInputConfirm() {\n\t\t\t\tlet inputValue = this.inputValue;\n\t\t\t\tif (inputValue) {\n\t\t\t\t\tthis.link_urls.push(inputValue);\n\t\t\t\t}\n\t\t\t\tthis.inputVisible = false;\n\t\t\t\tthis.inputValue = '';\n\t\t\t},\n\t\t\t//底部提交\n\t\t\tcommitEditGoods(){\n\t\t\t\tif(!this.arg.style_name){\n\t\t\t\t\tthis.$message.warning('请输入商品款号!');\n\t\t\t\t}else if(!this.arg.title){\n\t\t\t\t\tthis.$message.warning('请输入标题!');\n\t\t\t\t}else if(!this.arg.category_id){\n\t\t\t\t\tthis.$message.warning('请选择类目!');\n\t\t\t\t}else if(!this.arg.market_id){\n\t\t\t\t\tthis.$message.warning('请选择市场!');\n\t\t\t\t}else if(!this.arg.mode){\n\t\t\t\t\tthis.$message.warning('请填写合作模式!');\n\t\t\t\t}else if(!this.arg.classification_id){\n\t\t\t\t\tthis.$message.warning('请选择分类!');\n\t\t\t\t}else if(!this.arg.fabric){\n\t\t\t\t\tthis.$message.warning('请输入面料!');\n\t\t\t\t}else if(!this.arg.size){\n\t\t\t\t\tthis.$message.warning('请输入尺码!');\n\t\t\t\t}else if(!this.arg.color){\n\t\t\t\t\tthis.$message.warning('请输入颜色!');\n\t\t\t\t}else{\n\t\t\t\t\tvar arg = this.goods_type == '1'?this.arg:{...this.arg,...{style_id:this.style_id}};\n\t\t\t\t\targ.shooting_style_id = this.shooting_style_ids.join(',');\n\n\t\t\t\t\targ.hot_url = this.link_urls.join(',');\n\t\t\t\t\targ.hot_img = this.bk_img.join(',');\n\t\t\t\t\targ.data_num = this.kcs;\n\t\t\t\t\targ.data_price = this.tj;\n\t\t\t\t\targ.data_remark = this.bz;\n\t\t\t\t\tthis.$confirm(`确认${this.goods_type == '1'?'添加':'编辑'}此商品吗?`, '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tif(this.goods_type == '1'){\t//添加\n\t\t\t\t\t\t\tresource.addProductStyle(arg).then(res => {\n\t\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}else{\t\t\t//编辑或重新提交\n\t\t\t\t\t\t\tif(this.goods_type == '5'){\t//重新提交\n\t\t\t\t\t\t\t\targ.type = 1;\n\t\t\t\t\t\t\t\tresource.returnEditGoodsPost(arg).then(res => {\n\t\t\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}else if(this.goods_type == '2'){\t//编辑\n\t\t\t\t\t\t\t\tresource.editProductStylePost(arg).then(res => {\n\t\t\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t\t\tthis.$router.go(-1);\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t\t});          \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfilters:{\n\t\t\tpriceStatus:function(e){\n\t\t\t\tlet status_str = \"\";\n\t\t\t\tswitch(e){\n\t\t\t\t\tcase 1:\n\t\t\t\t\tstatus_str = '待审核';\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tstatus_str = '审核通过';\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\tstatus_str = '审核拒绝';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn status_str;\n\t\t\t}\n\t\t},\n\t\tcomponents:{\n\t\t\tUploadFile,\n\t\t\tTableTitle,\n\t\t\tGoBack\n\t\t}\n\t}\n</script>\n<style>\n.el-tag {\n\tposition: relative;\n\tmax-width: 300px;\n\tmargin-right: 10px;\n\tmargin-bottom: 0!important;\n\toverflow: hidden!important;\n\ttext-overflow: ellipsis!important;\n\twhite-space: nowrap!important;\n\tpadding-right: 18px;\n}\n.el-tag__close{\n\tposition: absolute!important;\n\tright: 1px!important;\n\ttop: 3px!important;\n}\n</style>\n<style lang=\"less\" scoped>\n.chain_page_content{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 20rem 240rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\t.card_box{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex:1;\n\t\t.scroll_box{\n\t\t\toverflow-y: scroll;\n\t\t}\n\t\t.scroll_box::-webkit-scrollbar{display:none}\n\t\t.form_row{\n\t\t\tmargin: 0 auto;\n\t\t\twidth: 1000rem;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\t.card_img{\n\t\t\t\tmargin-right: 40rem;\n\t\t\t\tmargin-bottom: 20rem;\n\t\t\t\tborder-radius: 2rem;\n\t\t\t\twidth: 160rem;\n\t\t\t\theight: 160rem;\n\t\t\t}\n\t\t}\n\t\t.bk_card_img{\n\t\t\tmargin-right: 16px;\n\t\t\tmargin-bottom: 16px;\n\t\t\tborder-radius: 2rem;\n\t\t\twidth: 80px;\n\t\t\theight: 80px;\n\t\t}\n\t\t.margin_bottom{\n\t\t\tmargin-bottom: 20px;\n\t\t}\n\t\t.bottom_row{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n}\n</style>"]}]}