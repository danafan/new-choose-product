{"remainingRequest":"/Users/fanyulong/project/2022/new-choose-product/node_modules/thread-loader/dist/cjs.js!/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/new-choose-product/src/components/search_widget.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/new-choose-product/src/components/search_widget.vue","mtime":1684311056975},{"path":"/Users/fanyulong/project/2022/new-choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/new-choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["export default {\n  data: function data() {\n    return {\n      search_value: \"\",\n      //搜索框内容\n      show_history: false,\n      //搜索历史列表弹窗是否显示\n      history_list: [] //搜索历史列表\n\n    };\n  },\n  props: {\n    // 输入框默认提示\n    placeholder: {\n      type: String,\n      default: \"\"\n    },\n    //页面来源\n    page_path: {\n      type: String,\n      default: ''\n    }\n  },\n  watch: {\n    //每次打开历史列表都重新获取最新\n    show_history: function show_history(n, o) {\n      if (n) {\n        var storage_data = sessionStorage.getItem(this.page_path);\n        var history_list = storage_data ? JSON.parse(storage_data) : [];\n        this.history_list = history_list.slice(0, 10);\n      }\n    }\n  },\n  methods: {\n    //鼠标移开延迟\n    closeFn: function closeFn() {\n      var _this = this;\n\n      setTimeout(function () {\n        _this.show_history = false;\n      }, 100);\n    },\n    //选中某一个历史记录\n    checkValue: function checkValue(search_value) {\n      this.search_value = search_value;\n      this.show_history = false; //点击搜索或回车\n\n      this.searchFn();\n    },\n    //点击删除\n    deleteHistory: function deleteHistory(index) {\n      if (index == -1) {\n        //全部删除\n        sessionStorage.removeItem(this.page_path);\n        this.history_list = [];\n      } else {\n        // 单条删除\n        var storage_data = sessionStorage.getItem(this.page_path);\n        var history_list = JSON.parse(storage_data);\n        history_list.splice(index, 1);\n        this.history_list = history_list;\n        sessionStorage.setItem(this.page_path, JSON.stringify(history_list));\n      }\n    },\n    //点击搜索或回车\n    searchFn: function searchFn() {\n      var _this2 = this;\n\n      var storage_data = sessionStorage.getItem(this.page_path);\n      var history_list = storage_data ? JSON.parse(storage_data) : [];\n      var current_index = null;\n      history_list.map(function (item, index) {\n        if (_this2.search_value == item) {\n          current_index = index;\n        }\n      });\n\n      if (current_index !== null) {\n        history_list.splice(current_index, 1);\n        history_list.unshift(this.search_value);\n        sessionStorage.setItem(this.page_path, JSON.stringify(history_list));\n      } else {\n        if (this.search_value != '') {\n          history_list.unshift(this.search_value);\n          sessionStorage.setItem(this.page_path, JSON.stringify(history_list));\n        }\n      }\n\n      this.show_history = false;\n      this.$refs.input.blur();\n      this.$emit('callback', this.search_value);\n    }\n  }\n};",{"version":3,"mappings":"AAmHA;EACAA,IADA,kBACA;IACA;MACAC,gBADA;MACA;MACAC,mBAFA;MAEA;MACAC,gBAHA,CAGA;;IAHA;EAKA,CAPA;EAQAC;IACA;IACAC;MACAC,YADA;MAEAC;IAFA,CAFA;IAMA;IACAC;MACAF,YADA;MAEAC;IAFA;EAPA,CARA;EAoBAE;IACA;IACAP;MACA;QACA;QACA;QACA;MACA;IACA;EARA,CApBA;EA8BAQ;IACA;IACAC,OAFA,qBAEA;MAAA;;MACAC;QACA;MACA,CAFA,EAEA,GAFA;IAGA,CANA;IAOA;IACAC,UARA,sBAQAZ,YARA,EAQA;MACA;MACA,0BAFA,CAGA;;MACA;IACA,CAbA;IAcA;IACAa,aAfA,yBAeAC,KAfA,EAeA;MACA;QAAA;QACAC;QACA;MACA,CAHA,MAGA;QAAA;QACA;QACA;QACAb;QACA;QACAa;MACA;IACA,CA1BA;IA2BA;IACAC,QA5BA,sBA4BA;MAAA;;MACA;MACA;MACA;MACAd;QACA;UACAe;QACA;MACA,CAJA;;MAKA;QACAf;QACAA;QACAa;MACA,CAJA,MAIA;QACA;UACAb;UACAa;QACA;MACA;;MACA;MACA;MACA;IACA;EAlDA;AA9BA","names":["data","search_value","show_history","history_list","props","placeholder","type","default","page_path","watch","methods","closeFn","setTimeout","checkValue","deleteHistory","index","sessionStorage","searchFn","current_index"],"sourceRoot":"src/components","sources":["search_widget.vue"],"sourcesContent":["<template>\n\t<div class=\"search_widget\" @click.stop>\n\t\t<img class=\"logo_icon\" src=\"../static/logo_icon.png\">\n\t\t<div class=\"search_box\">\n\t\t\t<img class=\"search_icon\" src=\"../static/search_icon.png\">\n\t\t\t<input class=\"search_input\" ref=\"input\" @focus=\"show_history = true\" @blur=\"closeFn\" v-model=\"search_value\" :placeholder=\"placeholder\" @keyup.enter=\"searchFn\">\n\t\t\t<div class=\"search_button\" @click=\"searchFn\">搜 索</div>\n\t\t\t<div class=\"history_list\" v-if=\"show_history\">\n\t\t\t\t<div class=\"history_item history_title\">\n\t\t\t\t\t<div class=\"title\">最近搜索</div>\n\t\t\t\t\t<div class=\"delete pointer\" @mousedown=\"$refs.input.focus()\" @mouseup=\"deleteHistory(-1)\">全部删除</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"history_item pointer\" :class=\"{'border_none':index == history_list.length - 1}\" v-for=\"(item,index) in history_list\">\n\t\t\t\t\t<div class=\"title\" @mouseup=\"checkValue(item)\">{{item}}</div>\n\t\t\t\t\t<div class=\"delete\" @mouseup=\"deleteHistory(index)\">删除</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<style lang=\"less\" scoped>\n.search_widget{\n\theight: 120rem;\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding-left: 250rem;\n\t.logo_icon{\n\t\tmargin-right: 110rem;\n\t\twidth: 148rem;\n\t\theight: 58rem;\n\t}\n\t.search_box{\n\t\tbackground: #ffffff;\n\t\tborder:2px solid var(--color);\n\t\tborder-radius: 25rem;\n\t\twidth: 720rem;\n\t\theight: 50rem;\n\t\tpadding-left: 22rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tposition: relative;\n\t\t.search_icon{\n\t\t\tmargin-right: 22rem;\n\t\t\twidth: 23rem;\n\t\t\theight: 23rem;\n\t\t}\n\t\t.search_input{\n\t\t\tflex: 1;\n\t\t\tborder: none;\n\t\t\toutline: none;\n\t\t\tfont-size: 14rem;\n\t\t\tcolor: #333333;\n\t\t}\n\t\t.search_button{\n\t\t\tmargin-left: 22rem;\n\t\t\tborder-radius: 25rem;\n\t\t\tbackground: var(--color);\n\t\t\twidth: 120rem;\n\t\t\ttext-align: center;\n\t\t\theight: 50rem;\n\t\t\tline-height: 50rem;\n\t\t\tfont-size: 18rem;\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #ffffff;\n\t\t\tcursor:pointer;\n\t\t}\n\t\t.history_list{\n\t\t\tpadding: 6rem 12rem 0 18rem;\n\t\t\tborder:1px solid #DFDFDF;\n\t\t\tposition: absolute;\n\t\t\ttop: 48rem;\n\t\t\tleft: 50%;\n\t\t\twidth: 680rem;\n\t\t\tmax-height: 350rem;\n\t\t\ttransform: translate(-50%);\n\t\t\tbackground: #ffffff;\n\t\t\toverflow-y: scroll;\n\t\t\tz-index: 9;\n\t\t\t.history_item{\n\t\t\t\tborder-bottom: 1px dashed #DEDEDE;\n\t\t\t\theight: 30rem;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tfont-size: 12rem;\n\t\t\t\tcolor: #666666;\n\t\t\t\t.title{\n\t\t\t\t\tflex:1;\n\t\t\t\t\tword-break: break-all;\n\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tdisplay: -webkit-box;\n\t\t\t\t\t-webkit-line-clamp: 1;\n\t\t\t\t\t-webkit-box-orient: vertical;\n\t\t\t\t}\n\t\t\t\t.delete{\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.history_title{\n\t\t\t\tcolor: #333333;\n\t\t\t}\n\t\t\t.border_none{\n\t\t\t\tborder:none;\n\t\t\t}\n\t\t\t.pointer{\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n<script>\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tsearch_value:\"\",\t\t//搜索框内容\n\t\t\t\tshow_history:false,\t\t//搜索历史列表弹窗是否显示\n\t\t\t\thistory_list:[],\t\t//搜索历史列表\n\t\t\t}\n\t\t},\n\t\tprops:{\n\t\t\t// 输入框默认提示\n\t\t\tplaceholder:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:\"\"\n\t\t\t},\n\t\t\t//页面来源\n\t\t\tpage_path:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\t//每次打开历史列表都重新获取最新\n\t\t\tshow_history:function(n,o){\n\t\t\t\tif(n){\n\t\t\t\t\tlet storage_data = sessionStorage.getItem(this.page_path);\n\t\t\t\t\tlet history_list = storage_data?JSON.parse(storage_data):[];\n\t\t\t\t\tthis.history_list = history_list.slice(0,10);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\t//鼠标移开延迟\n\t\t\tcloseFn(){\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.show_history = false;\n\t\t\t\t},100);\n\t\t\t},\n\t\t\t//选中某一个历史记录\n\t\t\tcheckValue(search_value){\n\t\t\t\tthis.search_value = search_value;\n\t\t\t\tthis.show_history = false;\n\t\t\t\t//点击搜索或回车\n\t\t\t\tthis.searchFn();\n\t\t\t},\n\t\t\t//点击删除\n\t\t\tdeleteHistory(index){\n\t\t\t\tif(index == -1){\t//全部删除\n\t\t\t\t\tsessionStorage.removeItem(this.page_path);\n\t\t\t\t\tthis.history_list = [];\n\t\t\t\t}else{\t// 单条删除\n\t\t\t\t\tlet storage_data = sessionStorage.getItem(this.page_path);\n\t\t\t\t\tlet history_list = JSON.parse(storage_data);\n\t\t\t\t\thistory_list.splice(index,1);\n\t\t\t\t\tthis.history_list = history_list;\n\t\t\t\t\tsessionStorage.setItem(this.page_path,JSON.stringify(history_list));\n\t\t\t\t}\n\t\t\t},\n\t\t\t//点击搜索或回车\n\t\t\tsearchFn(){\n\t\t\t\tlet storage_data = sessionStorage.getItem(this.page_path);\n\t\t\t\tlet history_list = storage_data?JSON.parse(storage_data):[];\n\t\t\t\tlet current_index = null;\n\t\t\t\thistory_list.map((item,index) => {\n\t\t\t\t\tif(this.search_value == item){\n\t\t\t\t\t\tcurrent_index = index;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif(current_index !== null){\n\t\t\t\t\thistory_list.splice(current_index,1);\n\t\t\t\t\thistory_list.unshift(this.search_value);\n\t\t\t\t\tsessionStorage.setItem(this.page_path,JSON.stringify(history_list));\n\t\t\t\t}else{\n\t\t\t\t\tif(this.search_value != ''){\n\t\t\t\t\t\thistory_list.unshift(this.search_value);\n\t\t\t\t\t\tsessionStorage.setItem(this.page_path,JSON.stringify(history_list));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.show_history = false;\n\t\t\t\tthis.$refs.input.blur();\n\t\t\t\tthis.$emit('callback',this.search_value)\n\t\t\t}\n\t\t}\n\t}\n</script>"]}]}