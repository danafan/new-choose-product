{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/choose-product/node_modules/eslint-loader/index.js??ref--13-0!/Users/fanyulong/project/2022/choose-product/src/api/index.js","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/api/index.js","mtime":1684310998602},{"path":"/Users/fanyulong/project/2022/choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport axios from \"axios\";\nimport router from \"../router/index.js\";\nimport { Message } from \"element-ui\";\nvar baseURL = \"\".concat(location.origin, \"/\"); // 创建axios实例，可以自定义配置\n\nvar instance = axios.create({\n  baseURL: baseURL\n});\ninstance.interceptors.request.use(function (config) {\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\ninstance.interceptors.response.use(function (response) {\n  switch (response.data.code) {\n    case -1:\n      Message({\n        type: \"warning\",\n        message: response.data.msg\n      });\n      router.go(-1);\n      return;\n\n    case 0:\n      Message({\n        type: \"warning\",\n        message: response.data.msg\n      });\n      return;\n\n    case 1:\n      return response;\n\n    case 9999:\n      sessionStorage.clear();\n      Message({\n        type: \"warning\",\n        message: response.data.msg\n      });\n      router.replace(\"/login\");\n      return;\n\n    case 10000:\n      sessionStorage.clear(); //除了获取用户信息其他接口都提示\n\n      if (response.config.url.indexOf('scancodes/getuserinfo') == -1) {\n        Message({\n          type: \"warning\",\n          message: response.data.msg\n        });\n      }\n\n      router.replace(\"/login\");\n      return;\n\n    default:\n      return response;\n  }\n}, function (error) {\n  if (error.response) {\n    switch (error.response.status) {\n      case 404:\n        window.alert(\"参数错误\");\n        break;\n\n      case 500:\n        window.alert(\"服务器故障\");\n        break;\n\n      case 504:\n        window.alert(\"没有网络\");\n        break;\n    }\n  }\n});\nexport default instance;",{"version":3,"names":["axios","router","Message","baseURL","location","origin","instance","create","interceptors","request","use","config","error","Promise","reject","response","data","code","type","message","msg","go","sessionStorage","clear","replace","url","indexOf","status","window","alert"],"sources":["/Users/fanyulong/project/2022/choose-product/src/api/index.js"],"sourcesContent":["import axios from \"axios\";\nimport router from \"../router/index.js\";\nimport { Message } from \"element-ui\";\nconst baseURL = `${location.origin}/`;\n\n// 创建axios实例，可以自定义配置\nconst instance = axios.create({\n  baseURL,\n});\n\ninstance.interceptors.request.use(\n  (config) => {\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n  );\ninstance.interceptors.response.use(\n  (response) => {\n    switch (response.data.code) {\n      case -1:\n      Message({\n        type: \"warning\",\n        message: response.data.msg,\n      });\n      router.go(-1);\n      return;\n      case 0:\n      Message({\n        type: \"warning\",\n        message: response.data.msg,\n      });\n      return;\n      case 1:\n      return response;\n      case 9999:\n      sessionStorage.clear();\n      Message({\n        type: \"warning\",\n        message: response.data.msg,\n      });\n      router.replace(\"/login\");\n      return;\n      case 10000:\n      sessionStorage.clear();\n      //除了获取用户信息其他接口都提示\n      if(response.config.url.indexOf('scancodes/getuserinfo') == -1){\n        Message({\n          type: \"warning\",\n          message: response.data.msg,\n        });\n      }\n      router.replace(\"/login\");\n      return;\n      default:\n      return response;\n    }\n  },\n  function (error) {\n    if (error.response) {\n      switch (error.response.status) {\n        case 404:\n        window.alert(\"参数错误\");\n        break;\n        case 500:\n        window.alert(\"服务器故障\");\n        break;\n        case 504:\n        window.alert(\"没有网络\");\n        break;\n      }\n    }\n  }\n  );\n\nexport default instance;\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,IAAMC,OAAO,aAAMC,QAAQ,CAACC,MAAf,MAAb,C,CAEA;;AACA,IAAMC,QAAQ,GAAGN,KAAK,CAACO,MAAN,CAAa;EAC5BJ,OAAO,EAAPA;AAD4B,CAAb,CAAjB;AAIAG,QAAQ,CAACE,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,UAACC,MAAD,EAAY;EACV,OAAOA,MAAP;AACD,CAHH,EAIE,UAACC,KAAD,EAAW;EACT,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CANH;AAQAN,QAAQ,CAACE,YAAT,CAAsBO,QAAtB,CAA+BL,GAA/B,CACE,UAACK,QAAD,EAAc;EACZ,QAAQA,QAAQ,CAACC,IAAT,CAAcC,IAAtB;IACE,KAAK,CAAC,CAAN;MACAf,OAAO,CAAC;QACNgB,IAAI,EAAE,SADA;QAENC,OAAO,EAAEJ,QAAQ,CAACC,IAAT,CAAcI;MAFjB,CAAD,CAAP;MAIAnB,MAAM,CAACoB,EAAP,CAAU,CAAC,CAAX;MACA;;IACA,KAAK,CAAL;MACAnB,OAAO,CAAC;QACNgB,IAAI,EAAE,SADA;QAENC,OAAO,EAAEJ,QAAQ,CAACC,IAAT,CAAcI;MAFjB,CAAD,CAAP;MAIA;;IACA,KAAK,CAAL;MACA,OAAOL,QAAP;;IACA,KAAK,IAAL;MACAO,cAAc,CAACC,KAAf;MACArB,OAAO,CAAC;QACNgB,IAAI,EAAE,SADA;QAENC,OAAO,EAAEJ,QAAQ,CAACC,IAAT,CAAcI;MAFjB,CAAD,CAAP;MAIAnB,MAAM,CAACuB,OAAP,CAAe,QAAf;MACA;;IACA,KAAK,KAAL;MACAF,cAAc,CAACC,KAAf,GADA,CAEA;;MACA,IAAGR,QAAQ,CAACJ,MAAT,CAAgBc,GAAhB,CAAoBC,OAApB,CAA4B,uBAA5B,KAAwD,CAAC,CAA5D,EAA8D;QAC5DxB,OAAO,CAAC;UACNgB,IAAI,EAAE,SADA;UAENC,OAAO,EAAEJ,QAAQ,CAACC,IAAT,CAAcI;QAFjB,CAAD,CAAP;MAID;;MACDnB,MAAM,CAACuB,OAAP,CAAe,QAAf;MACA;;IACA;MACA,OAAOT,QAAP;EApCF;AAsCD,CAxCH,EAyCE,UAAUH,KAAV,EAAiB;EACf,IAAIA,KAAK,CAACG,QAAV,EAAoB;IAClB,QAAQH,KAAK,CAACG,QAAN,CAAeY,MAAvB;MACE,KAAK,GAAL;QACAC,MAAM,CAACC,KAAP,CAAa,MAAb;QACA;;MACA,KAAK,GAAL;QACAD,MAAM,CAACC,KAAP,CAAa,OAAb;QACA;;MACA,KAAK,GAAL;QACAD,MAAM,CAACC,KAAP,CAAa,MAAb;QACA;IATF;EAWD;AACF,CAvDH;AA0DA,eAAevB,QAAf"}]}