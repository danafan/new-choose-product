{"remainingRequest":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js!/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fanyulong/project/2022/choose-product/src/pages/StyleInfo/style_info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanyulong/project/2022/choose-product/src/pages/StyleInfo/style_info.vue","mtime":1680247698000},{"path":"/Users/fanyulong/project/2022/choose-product/babel.config.js","mtime":1662529345000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanyulong/project/2022/choose-product/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport commonResource from \"../../api/common_resource.js\";\nimport resource from \"../../api/supplier_resource.js\";\nimport { getNowDate, getCurrentDate } from \"../../api/date.js\";\nimport TableTitle from \"../SupplyChain/components/table_title.vue\";\nimport PaginationWidget from \"../../components/pagination_widget.vue\";\nexport default {\n  data: function data() {\n    return {\n      loading: false,\n      cate_list: [],\n      //类目列表\n      category_ids: [],\n      //选中的类目\n      market_list: [],\n      //市场列表\n      market_ids: [],\n      //选中的市场\n      style_list: [],\n      //拍摄风格列表\n      shooting_style_ids: [],\n      //选中的拍摄风格\n      class_list: [],\n      //分类列表\n      classification_ids: [],\n      //选中的分类\n      check_status_list: [{\n        name: '上架待审核',\n        id: 1\n      }, {\n        name: '审核通过(已上架)',\n        id: 2\n      }, {\n        name: '上架审核拒绝',\n        id: 3\n      }, {\n        name: '下架待审核',\n        id: 4\n      }, {\n        name: '下架审核通过(已下架)',\n        id: 5\n      }, {\n        name: '下架审核拒绝',\n        id: 6\n      }],\n      //审核状态列表\n      check_status_id: \"\",\n      //选中的审核状态\n      date: [],\n      //上新日期\n      pickerOptions: {\n        shortcuts: [{\n          text: \"今日上新\",\n          onClick: function onClick(picker) {\n            var start = getNowDate();\n            var end = getNowDate();\n            picker.$emit(\"pick\", [start, end]);\n          }\n        }, {\n          text: \"三日上新\",\n          onClick: function onClick(picker) {\n            var start = getCurrentDate(3);\n            var end = getNowDate();\n            picker.$emit(\"pick\", [start, end]);\n          }\n        }, {\n          text: \"七日上新\",\n          onClick: function onClick(picker) {\n            var start = getCurrentDate(7);\n            var end = getNowDate();\n            picker.$emit(\"pick\", [start, end]);\n          }\n        }]\n      },\n      max_height: 0,\n      page: 1,\n      data: [],\n      //获取的数据\n      total: 0,\n      button_list: {},\n      import_dialog: false,\n      //导入弹窗\n      multiple_selection: [],\n      fullscreenLoading: false,\n      //导入加载弹窗\n      style_id: \"\",\n      //点击的style_id\n      down_dialog: false,\n      //下架原因弹窗\n      off_reason: \"\" //下架原因\n\n    };\n  },\n  activated: function activated() {\n    if (!this.$route.meta.use_cache) {\n      //获取类目列表\n      this.ajaxCateList(); //市场列表\n\n      this.ajaxMarketList(); //拍摄风格列表\n\n      this.ajaxStyleList(); //分类列表\n\n      this.ajaxClassList();\n      this.category_ids = [];\n      this.market_ids = [];\n      this.classification_ids = [];\n      this.shooting_style_ids = [];\n      this.date = [];\n      this.check_status_id = \"\";\n      this.status_id = \"\";\n      this.page = 1;\n    } //获取列表\n\n\n    this.getGoodsList();\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener(\"resize\", function () {});\n  },\n  mounted: function mounted() {\n    //获取表格最大高度\n    this.onResize();\n    window.addEventListener(\"resize\", this.onResize());\n  },\n  computed: {\n    //图片前缀\n    domain: function domain() {\n      return this.$store.state.domain;\n    }\n  },\n  methods: {\n    //监听屏幕大小变化\n    onResize: function onResize() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var card_box_height = document.getElementById(\"card_box\").offsetHeight;\n        var table_title_height = document.getElementById(\"table_title\").offsetHeight;\n        var bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n        _this.max_height = card_box_height - table_title_height - bottom_row_height - 60 + \"px\";\n      });\n    },\n    //获取类目列表\n    ajaxCateList: function ajaxCateList() {\n      var _this2 = this;\n\n      commonResource.ajaxCateList().then(function (res) {\n        if (res.data.code == 1) {\n          _this2.cate_list = res.data.data;\n        } else {\n          _this2.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //市场列表\n    ajaxMarketList: function ajaxMarketList() {\n      var _this3 = this;\n\n      commonResource.ajaxMarketList().then(function (res) {\n        if (res.data.code == 1) {\n          _this3.market_list = res.data.data;\n        } else {\n          _this3.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //拍摄风格列表\n    ajaxStyleList: function ajaxStyleList() {\n      var _this4 = this;\n\n      commonResource.ajaxStyleList().then(function (res) {\n        if (res.data.code == 1) {\n          _this4.style_list = res.data.data;\n        } else {\n          _this4.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //分类列表\n    ajaxClassList: function ajaxClassList() {\n      var _this5 = this;\n\n      commonResource.ajaxClassList().then(function (res) {\n        if (res.data.code == 1) {\n          _this5.class_list = res.data.data;\n        } else {\n          _this5.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //下载模版\n    downTemplate: function downTemplate() {\n      window.open(\"\".concat(this.downLoadUrl, \"/file/\\u4F9B\\u5E94\\u5546\\u5546\\u54C1\\u6279\\u91CF\\u5BFC\\u5165\\u6A21\\u677F.xlsx\"));\n    },\n    //导入\n    uploadCsv: function uploadCsv() {\n      var _this6 = this;\n\n      if (this.$refs.csvUpload.files.length > 0) {\n        var files = this.$refs.csvUpload.files;\n        this.fullscreenLoading = true;\n        resource.addAllProductStyle({\n          file: files[0]\n        }).then(function (res) {\n          _this6.$refs.csvUpload.value = null;\n          _this6.import_dialog = false;\n          _this6.fullscreenLoading = false;\n\n          if (res.data.code == 1) {\n            _this6.$message.success(res.data.msg);\n\n            _this6.page = 1; //获取列表\n\n            _this6.getGoodsList();\n          } else {\n            _this6.$message.warning(res.data.msg);\n          }\n        });\n      }\n    },\n    //获取列表\n    getGoodsList: function getGoodsList() {\n      var _this7 = this;\n\n      var arg = {\n        category_id: this.category_ids.join(','),\n        market_id: this.market_ids.join(','),\n        classification_id: this.classification_ids.join(','),\n        shooting_id: this.shooting_style_ids.join(','),\n        start_time: this.date && this.date.length > 0 ? this.date[0] : \"\",\n        end_time: this.date && this.date.length > 0 ? this.date[1] : \"\",\n        check_status: this.check_status_id,\n        status: this.status_id,\n        page: this.page,\n        pagesize: 100\n      };\n      this.loading = true;\n      resource.getSupplierGoods(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this7.loading = false;\n          _this7.button_list = res.data.data.button_list;\n          _this7.total = res.data.data.total;\n          var data = res.data.data.data;\n          data.map(function (item) {\n            var images = [];\n            item.img.map(function (i) {\n              if (i != '') {\n                images.push(_this7.domain + i);\n              }\n            });\n            item.images = images;\n            var ksbm = [];\n\n            if (item.i_id) {\n              item.i_id.split(',').map(function (i) {\n                ksbm.push(i);\n              });\n              item.ksbm = ksbm;\n            } else {\n              item.ksbm = [];\n            }\n          });\n          _this7.data = data;\n        } else {\n          _this7.$message.warning(res.data.msg);\n        }\n      });\n    },\n    //切换页码\n    checkPage: function checkPage(v) {\n      this.page = v; //获取列表\n\n      this.getGoodsList();\n    },\n    //切换多选\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multiple_selection = val;\n    },\n    //批量操作\n    allSetting: function allSetting(type) {\n      var _this8 = this;\n\n      var title = \"\"; //提示标题\n\n      var total_num = this.multiple_selection.length; //选中的总数\n\n      var unset_num = 0; //不能操作的数量\n\n      var style_id = [];\n\n      if (total_num == 0) {\n        this.$message.warning('至少选择一条！');\n        return;\n      }\n\n      if (type == '0') {\n        //下架\n        title = '确认下架？';\n        var unset_list = this.multiple_selection.filter(function (item) {\n          return item.check_status == 2 || item.check_status == 6;\n        });\n        unset_list.map(function (item) {\n          style_id.push(item.style_id);\n        });\n        unset_num = total_num - unset_list.length;\n      } else if (type == '1') {\n        //上架\n        title = '确认上架？';\n\n        var _unset_list = this.multiple_selection.filter(function (item) {\n          return item.check_status == 5;\n        });\n\n        _unset_list.map(function (item) {\n          style_id.push(item.style_id);\n        });\n\n        unset_num = total_num - _unset_list.length;\n      }\n\n      if (total_num == unset_num) {\n        this.$message.warning('没有符合操作条件的记录！');\n        return;\n      }\n\n      this.$confirm(\"\\u60A8\\u9009\\u62E9\\u4E86\".concat(total_num, \"\\u9879\\uFF0C\\u5176\\u4E2D\\u4E0D\\u53EF\\u64CD\\u4F5C\").concat(unset_num, \"\\u9879\\uFF0C\").concat(title), '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        if (type == '0' || type == '1') {\n          //上架或下架\n          var arg = {\n            style_id: style_id.join(','),\n            type: type\n          };\n          resource.checkStatus(arg).then(function (res) {\n            if (res.data.code == 1) {\n              _this8.$message.success(res.data.msg); //获取列表\n\n\n              _this8.getGoodsList();\n            } else {\n              _this8.$message.warning(res.data.msg);\n            }\n          });\n        }\n      }).catch(function () {\n        _this8.$message({\n          type: 'info',\n          message: '已取消'\n        });\n      });\n    },\n    //监听更多操作按钮\n    handleCommand: function handleCommand(e, id, name) {\n      if (e == '1') {\n        //查看\n        this.$router.push('/gys_edit_goods?goods_type=3&style_id=' + id);\n      } else if (e == '2') {\n        //图片管理\n        this.$router.push('/gys_image_setting?style_id=' + id + '&style_name=' + name);\n      }\n    },\n    //切换上架或下架\n    checkStatus: function checkStatus(style_id, type) {\n      var _this9 = this;\n\n      this.style_id = style_id;\n\n      if (type == 5) {\n        //上架\n        this.$confirm('确认上架?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          var arg = {\n            style_id: _this9.style_id,\n            type: 1\n          };\n          resource.checkStatus(arg).then(function (res) {\n            if (res.data.code == 1) {\n              _this9.$message.success(res.data.msg); //获取列表\n\n\n              _this9.getGoodsList();\n            } else {\n              _this9.$message.warning(res.data.msg);\n            }\n          });\n        }).catch(function () {\n          _this9.$message({\n            type: 'info',\n            message: '已取消'\n          });\n        });\n      } else {\n        //下架\n        this.down_dialog = true;\n      }\n    },\n    //确认下架\n    confirmOff: function confirmOff() {\n      var _this10 = this;\n\n      var arg = {\n        style_id: this.style_id,\n        type: 0,\n        off_reason: this.off_reason\n      };\n      resource.checkStatus(arg).then(function (res) {\n        if (res.data.code == 1) {\n          _this10.$message.success(res.data.msg);\n\n          _this10.down_dialog = false; //获取列表\n\n          _this10.getGoodsList();\n        } else {\n          _this10.$message.warning(res.data.msg);\n        }\n      });\n    }\n  },\n  components: {\n    TableTitle: TableTitle,\n    PaginationWidget: PaginationWidget\n  }\n};",{"version":3,"mappings":";AA8LA;AACA;AACA;AAEA;AACA;AACA;EACAA,IADA,kBACA;IACA;MACAC,cADA;MAEAC,aAFA;MAEA;MACAC,gBAHA;MAGA;MACAC,eAJA;MAIA;MACAC,cALA;MAKA;MACAC,cANA;MAMA;MACAC,sBAPA;MAOA;MACAC,cARA;MAQA;MACAC,sBATA;MASA;MACAC;QACAC,aADA;QAEAC;MAFA,GAGA;QACAD,iBADA;QAEAC;MAFA,CAHA,EAMA;QACAD,cADA;QAEAC;MAFA,CANA,EASA;QACAD,aADA;QAEAC;MAFA,CATA,EAYA;QACAD,mBADA;QAEAC;MAFA,CAZA,EAeA;QACAD,cADA;QAEAC;MAFA,CAfA,CAVA;MA4BA;MACAC,mBA7BA;MA6BA;MACAC,QA9BA;MA8BA;MACAC;QACAC,YACA;UACAC,YADA;UAEAC,OAFA,mBAEAC,MAFA,EAEA;YACA;YACA;YACAA;UACA;QANA,CADA,EASA;UACAF,YADA;UAEAC,OAFA,mBAEAC,MAFA,EAEA;YACA;YACA;YACAA;UACA;QANA,CATA,EAiBA;UACAF,YADA;UAEAC,OAFA,mBAEAC,MAFA,EAEA;YACA;YACA;YACAA;UACA;QANA,CAjBA;MADA,CA/BA;MA2DAC,aA3DA;MA4DAC,OA5DA;MA6DArB,QA7DA;MA6DA;MACAsB,QA9DA;MA+DAC,eA/DA;MAgEAC,oBAhEA;MAgEA;MACAC,sBAjEA;MAkEAC,wBAlEA;MAkEA;MACAC,YAnEA;MAmEA;MACAC,kBApEA;MAoEA;MACAC,cArEA,CAqEA;;IArEA;EAuEA,CAzEA;EA0EAC,SA1EA,uBA0EA;IACA;MACA;MACA,oBAFA,CAGA;;MACA,sBAJA,CAKA;;MACA,qBANA,CAOA;;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAnBA,CAoBA;;;IACA;EACA,CAhGA;EAiGAC,SAjGA,uBAiGA;IACAC;EACA,CAnGA;EAoGAC,OApGA,qBAoGA;IACA;IACA;IACAD;EACA,CAxGA;EAyGAE;IACA;IACAC,MAFA,oBAEA;MACA;IACA;EAJA,CAzGA;EA+GAC;IACA;IACAC,QAFA,sBAEA;MAAA;;MACA;QACA;QACA;QACA;QACA,mBACAC,kBACAC,kBADA,GAEAC,iBAFA,GAGA,EAHA,GAIA,IALA;MAMA,CAVA;IAWA,CAdA;IAeA;IACAC,YAhBA,0BAgBA;MAAA;;MACAC;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAxBA;IAyBA;IACAC,cA1BA,4BA0BA;MAAA;;MACAD;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAlCA;IAmCA;IACAE,aApCA,2BAoCA;MAAA;;MACAF;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CA5CA;IA6CA;IACAG,aA9CA,2BA8CA;MAAA;;MACAH;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA;IAOA,CAtDA;IAuDA;IACAI,YAxDA,0BAwDA;MACAd;IACA,CA1DA;IA2DA;IACAe,SA5DA,uBA4DA;MAAA;;MACA;QACA;QACA;QACAC;UAAAC;QAAA;UACA;UACA;UACA;;UACA;YACA;;YACA,gBAFA,CAGA;;YACA;UACA,CALA,MAKA;YACA;UACA;QACA,CAZA;MAaA;IACA,CA9EA;IA+EA;IACAC,YAhFA,0BAgFA;MAAA;;MACA;QACAC,wCADA;QAEAC,oCAFA;QAGAC,oDAHA;QAIAC,8CAJA;QAKAC,iEALA;QAMAC,+DANA;QAOAC,kCAPA;QAQAC,sBARA;QASArC,eATA;QAUAsC;MAVA;MAYA;MACAX;QACA;UACA;UACA;UACA;UACA;UACAhD;YACA;YACA4D;cACA;gBACAC;cACA;YACA,CAJA;YAKAD;YACA;;YACA;cACAA;gBACAE;cACA,CAFA;cAGAF;YACA,CALA,MAKA;cACAA;YACA;UACA,CAjBA;UAkBA;QACA,CAxBA,MAwBA;UACA;QACA;MACA,CA5BA;IA6BA,CA3HA;IA4HA;IACAG,SA7HA,qBA6HAC,CA7HA,EA6HA;MACA,cADA,CAEA;;MACA;IACA,CAjIA;IAkIA;IACAC,qBAnIA,iCAmIAC,GAnIA,EAmIA;MACA;IACA,CArIA;IAsIA;IACAC,UAvIA,sBAuIAC,IAvIA,EAuIA;MAAA;;MACA,eADA,CACA;;MACA,+CAFA,CAEA;;MACA,kBAHA,CAGA;;MACA;;MACA;QACA;QACA;MACA;;MAEA;QAAA;QACAC;QACA;UACA;QACA,CAFA;QAGAC;UACA3C;QACA,CAFA;QAGA4C;MACA,CATA,MASA;QAAA;QACAF;;QACA;UACA;QACA,CAFA;;QAGAC;UACA3C;QACA,CAFA;;QAGA4C;MACA;;MACA;QACA;QACA;MACA;;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAL;MAHA,GAIAM,IAJA,CAIA;QACA;UAAA;UACA;YACA/C,4BADA;YAEAyC;UAFA;UAIApB;YACA;cACA,sCADA,CAEA;;;cACA;YACA,CAJA,MAIA;cACA;YACA;UACA,CARA;QASA;MACA,CApBA,EAoBA2B,KApBA,CAoBA;QACA;UACAP,YADA;UAEAQ;QAFA;MAIA,CAzBA;IA0BA,CAlMA;IAmMA;IACAC,aApMA,yBAoMAC,CApMA,EAoMAlE,EApMA,EAoMAD,IApMA,EAoMA;MACA;QAAA;QACA;MACA,CAFA,MAEA;QAAA;QACA;MACA;IACA,CA1MA;IA2MA;IACAoE,WA5MA,uBA4MApD,QA5MA,EA4MAyC,IA5MA,EA4MA;MAAA;;MACA;;MACA;QAAA;QACA;UACAI,uBADA;UAEAC,sBAFA;UAGAL;QAHA,GAIAM,IAJA,CAIA;UACA;YACA/C,yBADA;YAEAyC;UAFA;UAIApB;YACA;cACA,sCADA,CAEA;;;cACA;YACA,CAJA,MAIA;cACA;YACA;UACA,CARA;QASA,CAlBA,EAkBA2B,KAlBA,CAkBA;UACA;YACAP,YADA;YAEAQ;UAFA;QAIA,CAvBA;MAwBA,CAzBA,MAyBA;QAAA;QACA;MACA;IACA,CA1OA;IA2OA;IACAI,UA5OA,wBA4OA;MAAA;;MACA;QACArD,uBADA;QAEAyC,OAFA;QAGAvC;MAHA;MAKAmB;QACA;UACA;;UACA,4BAFA,CAGA;;UACA;QACA,CALA,MAKA;UACA;QACA;MACA,CATA;IAUA;EA5PA,CA/GA;EA6WAiC;IACAC,sBADA;IAEAC;EAFA;AA7WA","names":["data","loading","cate_list","category_ids","market_list","market_ids","style_list","shooting_style_ids","class_list","classification_ids","check_status_list","name","id","check_status_id","date","pickerOptions","shortcuts","text","onClick","picker","max_height","page","total","button_list","import_dialog","multiple_selection","fullscreenLoading","style_id","down_dialog","off_reason","activated","destroyed","window","mounted","computed","domain","methods","onResize","card_box_height","table_title_height","bottom_row_height","ajaxCateList","commonResource","ajaxMarketList","ajaxStyleList","ajaxClassList","downTemplate","uploadCsv","resource","file","getGoodsList","category_id","market_id","classification_id","shooting_id","start_time","end_time","check_status","status","pagesize","item","images","ksbm","checkPage","v","handleSelectionChange","val","allSetting","type","title","unset_list","unset_num","confirmButtonText","cancelButtonText","then","catch","message","handleCommand","e","checkStatus","confirmOff","components","TableTitle","PaginationWidget"],"sourceRoot":"src/pages/StyleInfo","sources":["style_info.vue"],"sourcesContent":["<template>\n\t<div class=\"chain_page_content\" v-loading.fullscreen.lock=\"fullscreenLoading\">\n\t\t<el-card class=\"form_card\">\n\t\t\t<el-form :inline=\"true\" size=\"mini\">\n\t\t\t\t<el-form-item label=\"类目：\">\n\t\t\t\t\t<el-select v-model=\"category_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in cate_list\" :key=\"item.category_id\" :label=\"item.category_name\" :value=\"item.category_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"拍摄风格：\">\n\t\t\t\t\t<el-select v-model=\"shooting_style_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in style_list\" :key=\"item.shooting_style_id\" :label=\"item.shooting_style_name\" :value=\"item.shooting_style_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"市场：\">\n\t\t\t\t\t<el-select v-model=\"market_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in market_list\" :key=\"item.market_id\" :label=\"item.market_name\" :value=\"item.market_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"分类：\">\n\t\t\t\t\t<el-select v-model=\"classification_ids\" clearable multiple filterable collapse-tags placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in class_list\" :key=\"item.classification_id\" :label=\"item.classification_name\" :value=\"item.classification_id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"审核状态：\">\n\t\t\t\t\t<el-select v-model=\"check_status_id\" clearable placeholder=\"全部\">\n\t\t\t\t\t\t<el-option v-for=\"item in check_status_list\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\n\t\t\t\t\t\t</el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"上新日期：\">\n\t\t\t\t\t<el-date-picker v-model=\"date\" size=\"mini\" type=\"daterange\" unlink-panels value-format=\"yyyy-MM-dd\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :picker-options=\"pickerOptions\">\n\t\t\t\t\t</el-date-picker>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item class=\"form_item\">\n\t\t\t\t\t<el-button type=\"primary\" @click=\"checkPage(1)\">查询</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</el-card>\n\t\t<el-card class=\"card_box\" id=\"card_box\">\n\t\t\t<TableTitle title=\"数据列表\" id=\"table_title\">\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('1')\">批量上架</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"allSetting('0')\">批量下架</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"$router.push('/gys_edit_goods?goods_type=1')\">添加</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"import_dialog = true\">导入</el-button>\n\t\t\t</TableTitle>\n\t\t\t<el-table size=\"mini\" :data=\"data\" tooltip-effect=\"dark\" style=\"width: 100%\" :header-cell-style=\"{'background':'#f4f4f4','text-align': 'center'}\" :cell-style=\"{'text-align':'center'}\" :max-height=\"max_height\" @selection-change=\"handleSelectionChange\" v-loading=\"loading\">\n\t\t\t\t<el-table-column type=\"selection\" width=\"55\" fixed>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"标题\" prop=\"title\"></el-table-column>\n\t\t\t\t<el-table-column label=\"款号\" prop=\"style_name\"></el-table-column>\n\t\t\t\t<el-table-column label=\"图片\" width=\"120\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div v-if=\"scope.row.images.length == 0\">暂无</div>\n\t\t\t\t\t\t<el-image :z-index=\"2006\" class=\"image\" :src=\"scope.row.images[0]\" fit=\"scale-down\" :preview-src-list=\"scope.row.images\" v-else></el-image>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"颜色\" prop=\"color\"></el-table-column>\n\t\t\t\t<el-table-column label=\"成本价\" prop=\"cost_price\"></el-table-column>\n\t\t\t\t<el-table-column label=\"尺码\" prop=\"size\"></el-table-column>\n\t\t\t\t<el-table-column label=\"面料\" prop=\"fabric\"></el-table-column>\n\t\t\t\t<el-table-column label=\"市场\" prop=\"market\"></el-table-column>\n\t\t\t\t<el-table-column label=\"提供拍照\" prop=\"common_text\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div>{{scope.row.photograph == 1?'是':'否'}}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"拍摄风格\" prop=\"shooting_style\"></el-table-column>\n\t\t\t\t<el-table-column label=\"类目\" prop=\"category\"></el-table-column>\n\t\t\t\t<el-table-column label=\"分类\" prop=\"classification\"></el-table-column>\n\t\t\t\t<el-table-column label=\"合作模式\" prop=\"mode\"></el-table-column>\n\t\t\t\t<el-table-column label=\"上新时间\" prop=\"new_time_name\"></el-table-column>\n\t\t\t\t<el-table-column label=\"审核状态\" prop=\"common_text\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 1\">上架待审核</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 2\">已上架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 3\">拒绝上架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 4\">下架待审核</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 5\">已下架</div>\n\t\t\t\t\t\t<div v-if=\"scope.row.check_status == 6\">拒绝下架</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"拒绝备注\" prop=\"refuse_reason\"></el-table-column>\n\t\t\t\t<el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"scope.row.check_status == 2 || scope.row.check_status == 5 || scope.row.check_status == 6\" @click=\"checkStatus(scope.row.style_id,scope.row.check_status)\">{{scope.row.check_status == 2 || scope.row.check_status == 6?'下架':'上架'}}</el-button>\n\t\t\t\t\t\t<el-button style=\"margin-right: 10px\" type=\"text\" size=\"small\" v-if=\"scope.row.check_status == 2 || scope.row.check_status == 6\" @click=\"$router.push('/gys_edit_goods?goods_type=2&style_id=' + scope.row.style_id)\">编辑</el-button>\n\t\t\t\t\t\t<el-dropdown size=\"small\" v-if=\"scope.row.check_status == 2 || scope.row.check_status == 6\" @command=\"handleCommand($event,scope.row.style_id,scope.row.style_name)\">\n\t\t\t\t\t\t\t<el-button type=\"text\" size=\"small\">\n\t\t\t\t\t\t\t\t更多<i class=\"el-icon-arrow-down el-icon--right\"></i>\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<el-dropdown-menu slot=\"dropdown\">\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"1\">查看</el-dropdown-item>\n\t\t\t\t\t\t\t\t<el-dropdown-item command=\"2\">图片管理</el-dropdown-item>\n\t\t\t\t\t\t\t</el-dropdown-menu>\n\t\t\t\t\t\t</el-dropdown>\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" v-if=\"scope.row.check_status == 3\" @click=\"$router.push('/gys_edit_goods?goods_type=5&style_id=' + scope.row.style_id)\">重新提交</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t\t<PaginationWidget id=\"bottom_row\" :total=\"total\" :page=\"page\" :pagesize=\"100\" @checkPage=\"checkPage\"/>\n\t\t</el-card>\n\t\t<!-- 导入 -->\n\t\t<el-dialog :visible.sync=\"import_dialog\" width=\"30%\">\n\t\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t\t<div>导入</div>\n\t\t\t\t<img class=\"close_icon\" src=\"../../static/close_icon.png\" @click=\"import_dialog = false\">\n\t\t\t</div>\n\t\t\t<div class=\"down_box\">\n\t\t\t\t<el-button type=\"primary\" plain size=\"small\" @click=\"downTemplate\">下载模版<i class=\"el-icon-download el-icon--right\"></i></el-button>\n\t\t\t\t<div class=\"upload_box\">\n\t\t\t\t\t<el-button type=\"primary\" size=\"small\">\n\t\t\t\t\t\t导入\n\t\t\t\t\t\t<i class=\"el-icon-upload el-icon--right\"></i>\n\t\t\t\t\t</el-button>\n\t\t\t\t\t<input type=\"file\" ref=\"csvUpload\" class=\"upload_file\" accept=\".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" @change=\"uploadCsv\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t\t<el-button size=\"small\" @click=\"import_dialog = false\">取消</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t\t<!-- 下架原因 -->\n\t\t<el-dialog :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :show-close=\"false\" destroy-on-close @close=\"off_reason = ''\" :visible.sync=\"down_dialog\" width=\"30%\">\n\t\t\t<div slot=\"title\" class=\"dialog_title\">\n\t\t\t\t<div>确认下架？</div>\n\t\t\t\t<img class=\"close_icon\" src=\"../../static/close_icon.png\" @click=\"down_dialog = false\">\n\t\t\t</div>\n\t\t\t<div class=\"remark_content\">\n\t\t\t\t<el-input type=\"textarea\" :rows=\"3\" placeholder=\"请输入下架原因\" v-model=\"off_reason\">\n\t\t\t\t</el-input>\n\t\t\t</div>\n\t\t\t<div slot=\"footer\" class=\"dialog_footer\">\n\t\t\t\t<el-button size=\"mini\" @click=\"down_dialog = false\">关闭</el-button>\n\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"confirmOff\">提交</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</div>\n</template>\n<style lang=\"less\" scoped>\n.chain_page_content{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 20rem 98rem;\n\tdisplay: flex;\n\tflex-direction: column;\n\t.form_card{\n\t\tmargin-bottom: 16rem;\n\t\t.form_item{\n\t\t\tmargin-bottom:0 !important;\n\t\t}\n\t}\n\t.card_box{\n\t\tflex:1;\n\t\t.image{\n\t\t\twidth: 58rem;\n\t\t\theight: 58rem;\n\t\t}\n\t}\n\t.down_box{\n\t\tdisplay:flex;\n\t\tpadding:30rem;\n\t\t.upload_box{\n\t\t\tmargin-left: 10px;\n\t\t\tposition: relative;\n\t\t\t.upload_file{\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\topacity: 0;\n\t\t\t}\n\t\t}\n\t}\n\t.remark_content{\n\t\tpadding:20rem;\n\t}\n}\n</style>\n<script>\n\timport commonResource from '../../api/common_resource.js'\n\timport resource from '../../api/supplier_resource.js'\n\timport { getNowDate,getCurrentDate } from \"../../api/date.js\";\n\n\timport TableTitle from '../SupplyChain/components/table_title.vue'\n\timport PaginationWidget from '../../components/pagination_widget.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tloading:false,\n\t\t\t\tcate_list:[],\t\t\t//类目列表\n\t\t\t\tcategory_ids:[],\t\t//选中的类目\n\t\t\t\tmarket_list:[],\t\t\t//市场列表\n\t\t\t\tmarket_ids:[],\t\t\t//选中的市场\n\t\t\t\tstyle_list:[],\t\t\t//拍摄风格列表\n\t\t\t\tshooting_style_ids:[],\t//选中的拍摄风格\n\t\t\t\tclass_list:[],\t\t\t//分类列表\n\t\t\t\tclassification_ids:[],\t//选中的分类\n\t\t\t\tcheck_status_list:[{\n\t\t\t\t\tname:'上架待审核',\n\t\t\t\t\tid:1\n\t\t\t\t},{\n\t\t\t\t\tname:'审核通过(已上架)',\n\t\t\t\t\tid:2\n\t\t\t\t},{\n\t\t\t\t\tname:'上架审核拒绝',\n\t\t\t\t\tid:3\n\t\t\t\t},{\n\t\t\t\t\tname:'下架待审核',\n\t\t\t\t\tid:4\n\t\t\t\t},{\n\t\t\t\t\tname:'下架审核通过(已下架)',\n\t\t\t\t\tid:5\n\t\t\t\t},{\n\t\t\t\t\tname:'下架审核拒绝',\n\t\t\t\t\tid:6\n\t\t\t\t}],\t\t\t\t\t\t//审核状态列表\n\t\t\t\tcheck_status_id:\"\",\t\t//选中的审核状态\n\t\t\t\tdate:[],\t\t\t\t//上新日期\n\t\t\t\tpickerOptions: {\n\t\t\t\t\tshortcuts: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"今日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getNowDate();\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"三日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getCurrentDate(3);\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: \"七日上新\",\n\t\t\t\t\t\tonClick(picker) {\n\t\t\t\t\t\t\tconst start = getCurrentDate(7);\n\t\t\t\t\t\t\tconst end = getNowDate();\n\t\t\t\t\t\t\tpicker.$emit(\"pick\", [start, end]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}, \n\t\t\t\tmax_height:0,\t\n\t\t\t\tpage:1,\n\t\t\t\tdata:[],\t\t\t\t//获取的数据\n\t\t\t\ttotal:0,\n\t\t\t\tbutton_list:{},\n\t\t\t\timport_dialog:false,\t//导入弹窗\n\t\t\t\tmultiple_selection:[],\n\t\t\t\tfullscreenLoading:false,\t//导入加载弹窗\n\t\t\t\tstyle_id:\"\",\t\t\t\t//点击的style_id\n\t\t\t\tdown_dialog:false,\t\t\t//下架原因弹窗\n\t\t\t\toff_reason:\"\",\t\t\t\t//下架原因\n\t\t\t}\n\t\t},\n\t\tactivated(){\n\t\t\tif(!this.$route.meta.use_cache){\n    \t\t\t//获取类目列表\n    \t\t\tthis.ajaxCateList();\n    \t\t\t//市场列表\n    \t\t\tthis.ajaxMarketList();\n    \t\t\t//拍摄风格列表\n    \t\t\tthis.ajaxStyleList();\n    \t\t\t//分类列表\n    \t\t\tthis.ajaxClassList();\n\n    \t\t\tthis.category_ids = [];\n    \t\t\tthis.market_ids = [];\n    \t\t\tthis.classification_ids = [];\n    \t\t\tthis.shooting_style_ids = [];\n    \t\t\tthis.date = [];\n    \t\t\tthis.check_status_id = \"\";\n    \t\t\tthis.status_id = \"\";\n    \t\t\tthis.page = 1;\n    \t\t}\n\t\t\t//获取列表\n\t\t\tthis.getGoodsList();\n\t\t},\n\t\tdestroyed() {\n\t\t\twindow.removeEventListener(\"resize\", () => {});\n\t\t},\n\t\tmounted() {\n    \t\t//获取表格最大高度\n    \t\tthis.onResize();\n    \t\twindow.addEventListener(\"resize\", this.onResize());\n    \t},\n    \tcomputed:{\n\t\t\t//图片前缀\n\t\t\tdomain(){\n\t\t\t\treturn this.$store.state.domain;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n    \t\t//监听屏幕大小变化\n    \t\tonResize() {\n    \t\t\tthis.$nextTick(() => {\n    \t\t\t\tlet card_box_height = document.getElementById(\"card_box\").offsetHeight;\n    \t\t\t\tlet table_title_height = document.getElementById(\"table_title\").offsetHeight;\n    \t\t\t\tlet bottom_row_height = document.getElementById(\"bottom_row\").offsetHeight;\n    \t\t\t\tthis.max_height =\n    \t\t\t\tcard_box_height -\n    \t\t\t\ttable_title_height -\n    \t\t\t\tbottom_row_height -\n    \t\t\t\t60 +\n    \t\t\t\t\"px\";\n    \t\t\t});\n    \t\t},\n\t\t\t//获取类目列表\n\t\t\tajaxCateList(){\n\t\t\t\tcommonResource.ajaxCateList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.cate_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//市场列表\n\t\t\tajaxMarketList(){\n\t\t\t\tcommonResource.ajaxMarketList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.market_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//拍摄风格列表\n\t\t\tajaxStyleList(){\n\t\t\t\tcommonResource.ajaxStyleList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.style_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//分类列表\n\t\t\tajaxClassList(){\n\t\t\t\tcommonResource.ajaxClassList().then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.class_list = res.data.data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//下载模版\n\t\t\tdownTemplate(){\n\t\t\t\twindow.open(`${this.downLoadUrl}/file/供应商商品批量导入模板.xlsx`);\n\t\t\t},\n\t\t\t//导入\n\t\t\tuploadCsv(){\n\t\t\t\tif (this.$refs.csvUpload.files.length > 0) {\n\t\t\t\t\tlet files = this.$refs.csvUpload.files;\n\t\t\t\t\tthis.fullscreenLoading = true;\n\t\t\t\t\tresource.addAllProductStyle({file:files[0]}).then(res => {\n\t\t\t\t\t\tthis.$refs.csvUpload.value = null;\n\t\t\t\t\t\tthis.import_dialog = false;\n\t\t\t\t\t\tthis.fullscreenLoading = false;\n\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\tthis.page = 1;\n\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t//获取列表\n\t\t\tgetGoodsList(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tcategory_id:this.category_ids.join(','),\n\t\t\t\t\tmarket_id:this.market_ids.join(','),\n\t\t\t\t\tclassification_id:this.classification_ids.join(','),\n\t\t\t\t\tshooting_id:this.shooting_style_ids.join(','),\n\t\t\t\t\tstart_time:this.date && this.date.length > 0?this.date[0]:\"\",\n\t\t\t\t\tend_time:this.date && this.date.length > 0?this.date[1]:\"\",\n\t\t\t\t\tcheck_status:this.check_status_id,\n\t\t\t\t\tstatus:this.status_id,\n\t\t\t\t\tpage:this.page,\n\t\t\t\t\tpagesize:100\n\t\t\t\t}\n\t\t\t\tthis.loading = true;\n\t\t\t\tresource.getSupplierGoods(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.button_list = res.data.data.button_list;\n\t\t\t\t\t\tthis.total = res.data.data.total;\n\t\t\t\t\t\tlet data = res.data.data.data;\n\t\t\t\t\t\tdata.map(item => {\n\t\t\t\t\t\t\tlet images = [];\n\t\t\t\t\t\t\titem.img.map(i => {\n\t\t\t\t\t\t\t\tif(i != ''){\n\t\t\t\t\t\t\t\t\timages.push(this.domain + i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\titem.images = images;\n\t\t\t\t\t\t\tlet ksbm = [];\n\t\t\t\t\t\t\tif(item.i_id){\n\t\t\t\t\t\t\t\titem.i_id.split(',').map(i => {\n\t\t\t\t\t\t\t\t\tksbm.push(i);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\titem.ksbm = ksbm;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\titem.ksbm = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.data = data;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t//切换页码\n\t\t\tcheckPage(v){\n\t\t\t\tthis.page = v;\n\t\t\t\t//获取列表\n\t\t\t\tthis.getGoodsList();\n\t\t\t},\n\t\t\t//切换多选\n\t\t\thandleSelectionChange(val) {\n\t\t\t\tthis.multiple_selection = val;\n\t\t\t},\n\t\t\t//批量操作\n\t\t\tallSetting(type){\n\t\t\t\tlet title = \"\";\t\t\t//提示标题\n\t\t\t\tlet total_num = this.multiple_selection.length;\t//选中的总数\n\t\t\t\tlet unset_num = 0;\t//不能操作的数量\n\t\t\t\tlet style_id = [];\n\t\t\t\tif(total_num == 0){\n\t\t\t\t\tthis.$message.warning('至少选择一条！');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(type == '0'){\t//下架\n\t\t\t\t\ttitle = '确认下架？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 2 ||  item.check_status == 6;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}else if(type == '1'){\t//上架\n\t\t\t\t\ttitle = '确认上架？'\n\t\t\t\t\tlet unset_list = this.multiple_selection.filter(item => {\n\t\t\t\t\t\treturn item.check_status == 5;\n\t\t\t\t\t})\n\t\t\t\t\tunset_list.map(item => {\n\t\t\t\t\t\tstyle_id.push(item.style_id)\n\t\t\t\t\t})\n\t\t\t\t\tunset_num = total_num - unset_list.length;\n\t\t\t\t}\n\t\t\t\tif(total_num == unset_num){\n\t\t\t\t\tthis.$message.warning('没有符合操作条件的记录！');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.$confirm(`您选择了${total_num}项，其中不可操作${unset_num}项，${title}`, '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tif(type == '0' || type == '1'){\t//上架或下架\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:style_id.join(','),\n\t\t\t\t\t\t\ttype:type\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.checkStatus(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t});          \n\t\t\t\t});\n\t\t\t},\n\t\t\t//监听更多操作按钮\n\t\t\thandleCommand(e,id,name){\n\t\t\t\tif(e == '1'){\t//查看\n\t\t\t\t\tthis.$router.push('/gys_edit_goods?goods_type=3&style_id=' + id);\n\t\t\t\t}else if(e == '2'){\t//图片管理\n\t\t\t\t\tthis.$router.push('/gys_image_setting?style_id=' + id + '&style_name=' + name);\n\t\t\t\t}\n\t\t\t},\n\t\t\t//切换上架或下架\n\t\t\tcheckStatus(style_id,type){\n\t\t\t\tthis.style_id = style_id;\n\t\t\t\tif(type == 5){\t//上架\n\t\t\t\t\tthis.$confirm('确认上架?', '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tlet arg = {\n\t\t\t\t\t\t\tstyle_id:this.style_id,\n\t\t\t\t\t\t\ttype:1\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresource.checkStatus(arg).then(res => {\n\t\t\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\tmessage: '已取消'\n\t\t\t\t\t\t});          \n\t\t\t\t\t});\n\t\t\t\t}else{\t//下架\n\t\t\t\t\tthis.down_dialog = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\t//确认下架\n\t\t\tconfirmOff(){\n\t\t\t\tlet arg = {\n\t\t\t\t\tstyle_id:this.style_id,\n\t\t\t\t\ttype:0,\n\t\t\t\t\toff_reason:this.off_reason\n\t\t\t\t}\n\t\t\t\tresource.checkStatus(arg).then(res => {\n\t\t\t\t\tif(res.data.code == 1){\n\t\t\t\t\t\tthis.$message.success(res.data.msg);\n\t\t\t\t\t\tthis.down_dialog = false;\n\t\t\t\t\t\t//获取列表\n\t\t\t\t\t\tthis.getGoodsList();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$message.warning(res.data.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tcomponents:{\n\t\t\tTableTitle,\n\t\t\tPaginationWidget\n\t\t}\n\t}\n</script>\n\n\n\n\n\n\n"]}]}